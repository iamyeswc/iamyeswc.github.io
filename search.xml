<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜01æœˆ</title>
    <url>/dailyQuestionJan/</url>
    <content><![CDATA[<h2 id="01-02"><a href="#01-02" class="headerlink" title="01.02"></a>01.02</h2><h3 id="å¯»æ‰¾é‡å¤æ•°"><a href="#å¯»æ‰¾é‡å¤æ•°" class="headerlink" title="å¯»æ‰¾é‡å¤æ•°"></a>å¯»æ‰¾é‡å¤æ•°</h3><p><a href="https://leetcode.cn/problems/find-the-duplicate-number/description/">https://leetcode.cn/problems/find-the-duplicate-number/description/</a></p>
<p>ç»™å®šä¸€ä¸ªåŒ…å« <code>n + 1</code> ä¸ªæ•´æ•°çš„æ•°ç»„ <code>nums</code> ï¼Œå…¶æ•°å­—éƒ½åœ¨ <code>[1, n]</code> èŒƒå›´å†…ï¼ˆåŒ…æ‹¬ <code>1</code> å’Œ <code>n</code>ï¼‰ï¼Œå¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°ã€‚</p>
<p>å‡è®¾ <code>nums</code> åªæœ‰ <strong>ä¸€ä¸ªé‡å¤çš„æ•´æ•°</strong> ï¼Œè¿”å› <strong>è¿™ä¸ªé‡å¤çš„æ•°</strong> ã€‚</p>
<p>ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡» <strong>ä¸ä¿®æ”¹</strong> æ•°ç»„ <code>nums</code> ä¸”åªç”¨å¸¸é‡çº§ <code>O(1)</code> çš„é¢å¤–ç©ºé—´ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,3,4,2,2]</span><br><span class="line">è¾“å‡ºï¼š2</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3,1,3,4,2]</span><br><span class="line">è¾“å‡ºï¼š3</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= n &lt;= 105</code></li>
<li><code>nums.length == n + 1</code></li>
<li><code>1 &lt;= nums[i] &lt;= n</code></li>
<li><code>nums</code> ä¸­ <strong>åªæœ‰ä¸€ä¸ªæ•´æ•°</strong> å‡ºç° <strong>ä¸¤æ¬¡æˆ–å¤šæ¬¡</strong> ï¼Œå…¶ä½™æ•´æ•°å‡åªå‡ºç° <strong>ä¸€æ¬¡</strong></li>
</ul>
<h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>é¢˜ç›®ä¸­è¯´æ•°ç»„é‡Œçš„æ•°å­—ä¸º1 ~ n , å…¶ä¸­n+1 &#x3D; len(nums)</p>
<p>å¯ä»¥ç”¨äºŒåˆ†æ³•å»æ‰¾é‡å¤çš„æ•°å­—ï¼ˆå¦‚æœæ²¡æœ‰é‡å¤æ•°å­—ï¼Œé‚£ä¹ˆåœ¨left ~ midä¹‹é—´çš„æ•°å­—ä¸ªæ•°ä¸ºmid-left+1ï¼‰ï¼š</p>
<ol>
<li>left &#x3D; 1, right &#x3D; n, mid &#x3D; (left+right) &#x2F; 2</li>
<li>éå†æ•°ç»„ è®¡ç®—</li>
</ol>
<p>â€‹    [left mid] ä¸ªæ•°åº”è¯¥æ˜¯mid-left+1 å¦‚æœå¤šäºè¿™ä¸ªä¸ªæ•°ï¼Œè¯´æ˜é‡å¤çš„æ•°å­—åœ¨left midåŒºé—´ï¼Œ åä¹‹åœ¨mid+1 rightåŒºé—´</p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c"><a href="#c" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findDuplicate</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// äºŒåˆ†æ³•:left mid right æ•°ç»„å€¼ä¸º1~n numsé•¿åº¦ä¸ºn+1</span></span><br><span class="line">        <span class="comment">// è®¡ç®—ä¸ªæ•° å¦‚æœä¸ªæ•°å¤§äºmid - left + 1, é‡å¤æ•°å­—åœ¨[left, mid]ï¼Œ åä¹‹åœ¨[mid+1, right]</span></span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> left = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> right = n - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (left &lt; right)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[i] &gt;= left &amp;&amp; nums[i] &lt;= mid)</span><br><span class="line">                &#123;</span><br><span class="line">                    count++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count &gt; (mid - left + <span class="number">1</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                right = mid;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h5 id="go"><a href="#go" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findDuplicate</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="comment">//äºŒåˆ†æ³•ï¼Œ numsçš„å€¼åœ¨1~nä¹‹é—´</span></span><br><span class="line">	<span class="comment">// [left mid]  [mid+1 right]</span></span><br><span class="line">	n := <span class="built_in">len</span>(nums)</span><br><span class="line">	left := <span class="number">1</span></span><br><span class="line">	right := n - <span class="number">1</span></span><br><span class="line">	<span class="keyword">for</span> left &lt; right &#123;</span><br><span class="line">		mid := (left + right) / <span class="number">2</span></span><br><span class="line">		<span class="comment">//éå†æ•°ç»„ è®¡ç®—</span></span><br><span class="line">		<span class="comment">//[left mid] ä¸ªæ•°åº”è¯¥æ˜¯mid-left+1 å¦‚æœå¤šäºè¿™ä¸ªä¸ªæ•° è¯´æ˜é‡å¤çš„æ•°å­—åœ¨left midåŒºé—´ï¼Œ åä¹‹åœ¨mid+1 rightåŒºé—´</span></span><br><span class="line">		count := <span class="number">0</span></span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">			<span class="keyword">if</span> nums[i] &gt;= left &amp;&amp; nums[i] &lt;= mid &#123;</span><br><span class="line">				count++</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> count &gt; mid-left+<span class="number">1</span> &#123;</span><br><span class="line">			right = mid</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			left = mid + <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> left</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="01-03"><a href="#01-03" class="headerlink" title="01.03"></a>01.03</h2><h3 id="è·³è·ƒæ¸¸æˆ"><a href="#è·³è·ƒæ¸¸æˆ" class="headerlink" title="è·³è·ƒæ¸¸æˆ"></a>è·³è·ƒæ¸¸æˆ</h3><p><a href="https://leetcode.cn/problems/jump-game/description/">https://leetcode.cn/problems/jump-game/description/</a></p>
<p>ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ <strong>ç¬¬ä¸€ä¸ªä¸‹æ ‡</strong> ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚</p>
<p>åˆ¤æ–­ä½ æ˜¯å¦èƒ½å¤Ÿåˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ï¼Œå¦‚æœå¯ä»¥ï¼Œè¿”å› <code>true</code> ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code> ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [2,3,1,1,4]</span><br><span class="line">è¾“å‡ºï¼štrue</span><br><span class="line">è§£é‡Šï¼šå¯ä»¥å…ˆè·³ 1 æ­¥ï¼Œä»ä¸‹æ ‡ 0 åˆ°è¾¾ä¸‹æ ‡ 1, ç„¶åå†ä»ä¸‹æ ‡ 1 è·³ 3 æ­¥åˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3,2,1,0,4]</span><br><span class="line">è¾“å‡ºï¼šfalse</span><br><span class="line">è§£é‡Šï¼šæ— è®ºæ€æ ·ï¼Œæ€»ä¼šåˆ°è¾¾ä¸‹æ ‡ä¸º 3 çš„ä½ç½®ã€‚ä½†è¯¥ä¸‹æ ‡çš„æœ€å¤§è·³è·ƒé•¿åº¦æ˜¯ 0 ï¼Œ æ‰€ä»¥æ°¸è¿œä¸å¯èƒ½åˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 104</code></li>
<li><code>0 &lt;= nums[i] &lt;= 105</code></li>
</ul>
<h4 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>è´ªå¿ƒæ³•ï¼šæ‰¾åˆ°æœ€è¿œèƒ½åˆ°çš„ä½ç½®</p>
<p>éå†æ¯ä¸ªä½ç½®ï¼Œæ‰¾åˆ°æ¯ä¸ªä½ç½®æœ€è¿œèƒ½åˆ°çš„ä¸‹æ ‡: å½“å‰ä½ç½®+å½“å‰ä½ç½®ä¸Šèƒ½èµ°çš„è·ç¦»ï¼ˆi+nums[i]ï¼‰</p>
<ol>
<li>å¦‚æœä¸Šä¸€ä¸ªä½ç½®åˆ°ä¸äº†å½“å‰ä¸‹æ ‡ï¼Œç›´æ¥è¿”å›falseï¼ˆi&gt;maxJump)</li>
<li>æ‰¾åˆ°å½“å‰ä½ç½®èƒ½è·³çš„æœ€è¿œçš„ä½ç½®ï¼ˆi+nums[i]ï¼‰</li>
<li>å¦‚æœå½“å‰ä½ç½®æœ€è¿œä½ç½®èƒ½åˆ°æœ€åä¸€ä¸ªä¸‹æ ‡ç›´æ¥è¿”å›true ï¼ˆmaxJump&gt;&#x3D;len(nums)-1)</li>
</ol>
<h4 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3,2,1,0,4]</span><br><span class="line">è¾“å‡ºï¼šfalse</span><br><span class="line">è§£é‡Šï¼šæ— è®ºæ€æ ·ï¼Œæ€»ä¼šåˆ°è¾¾ä¸‹æ ‡ä¸º 3 çš„ä½ç½®ã€‚ä½†è¯¥ä¸‹æ ‡çš„æœ€å¤§è·³è·ƒé•¿åº¦æ˜¯ 0 ï¼Œ æ‰€ä»¥æ°¸è¿œä¸å¯èƒ½åˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚</span><br></pre></td></tr></table></figure>

<p>è¿‡ç¨‹ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>num[ i ]</th>
<th>æœ€è¿œçš„è·ç¦»ï¼ˆi&gt;maxJumpï¼Ÿè¿”å›false: è¿”å›trueï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>åˆå§‹åŒ–</td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>ç¬¬0ä¸ªæ•°</td>
<td>3</td>
<td>ä¸Šä¸€ä¸ªä½ç½®èƒ½åˆ°(0ä¸å¤§äº0)   max(0,  0+3) &#x3D; 3</td>
</tr>
<tr>
<td>ç¬¬1ä¸ªæ•°</td>
<td>2</td>
<td>ä¸Šä¸€ä¸ªä½ç½®èƒ½åˆ°(1&lt;3)             max(3,  1+2) &#x3D; 3</td>
</tr>
<tr>
<td>ç¬¬2ä¸ªæ•°</td>
<td>1</td>
<td>ä¸Šä¸€ä¸ªä½ç½®èƒ½åˆ°(2&lt;3)             max(3,  2+1) &#x3D; 3</td>
</tr>
<tr>
<td>ç¬¬3ä¸ªæ•°</td>
<td>0</td>
<td>ä¸Šä¸€ä¸ªä½ç½®èƒ½åˆ°(3ä¸å¤§äº3)    max(3,  2+1) &#x3D; 3</td>
</tr>
<tr>
<td>ç¬¬4ä¸ªæ•°</td>
<td>4</td>
<td>ä¸Šä¸€ä¸ªä½ç½®åˆ°ä¸äº†(<strong>4&gt;3</strong>)</td>
</tr>
</tbody></table>
<p>å› æ­¤è¿”å›false, å³åˆ°ä¸äº†æœ€åä¸€ä¸ªä¸‹æ ‡</p>
<h4 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-1"><a href="#c-1" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">canJump</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> maxJump = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 1.ä»å‰ä¸€ä¸ªä½ç½®æ— æ³•åˆ°è¾¾å½“å‰ï¼Œæ›´ä¸è¦è¯´å¾€åèµ°äº†</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt; maxJump)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 2.ä»å½“å‰ä½ç½®èƒ½èµ°åˆ°çš„æœ€é•¿çš„åœ°æ–¹</span></span><br><span class="line">            maxJump = <span class="built_in">max</span>(maxJump, i + nums[i]);</span><br><span class="line">            <span class="comment">// 3.ä»å½“å‰ä½ç½®èƒ½èµ°åˆ°æœ€åä¸€ä¸ªä¸‹æ ‡</span></span><br><span class="line">            <span class="keyword">if</span> (maxJump &gt;= nums.<span class="built_in">size</span>() - <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h5 id="go-1"><a href="#go-1" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">canJump</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	maxJump := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//è´ªå¿ƒæ³•ï¼šæ‰¾åˆ°æœ€è¿œèƒ½åˆ°çš„ä½ç½®</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">		<span class="comment">//1.å¦‚æœä¸Šä¸€ä¸ªä½ç½®åˆ°ä¸äº†å½“å‰ä¸‹æ ‡ï¼Œç›´æ¥è¿”å›false</span></span><br><span class="line">		<span class="keyword">if</span> i &gt; maxJump &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//2.æ‰¾åˆ°å½“å‰ä½ç½®èƒ½è·³çš„æœ€è¿œçš„ä½ç½®</span></span><br><span class="line">		<span class="keyword">if</span> maxJump &lt; (i + nums[i]) &#123;</span><br><span class="line">			maxJump = i + nums[i]</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//3.å¦‚æœå½“å‰ä½ç½®æœ€è¿œä½ç½®èƒ½åˆ°æœ€åä¸€ä¸ªä¸‹æ ‡ç›´æ¥è¿”å›</span></span><br><span class="line">		<span class="keyword">if</span> maxJump &gt;= (<span class="built_in">len</span>(nums) - <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="01-04"><a href="#01-04" class="headerlink" title="01.04"></a>01.04</h2><h3 id="å›æ–‡å­ä¸²"><a href="#å›æ–‡å­ä¸²" class="headerlink" title="å›æ–‡å­ä¸²"></a>å›æ–‡å­ä¸²</h3><p><a href="https://leetcode.cn/problems/palindromic-substrings/description/">https://leetcode.cn/problems/palindromic-substrings/description/</a></p>
<p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code> ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ä¸­ <strong>å›æ–‡å­ä¸²</strong> çš„æ•°ç›®ã€‚</p>
<p><strong>å›æ–‡å­—ç¬¦ä¸²</strong> æ˜¯æ­£ç€è¯»å’Œå€’è¿‡æ¥è¯»ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚</p>
<p><strong>å­å­—ç¬¦ä¸²</strong> æ˜¯å­—ç¬¦ä¸²ä¸­çš„ç”±è¿ç»­å­—ç¬¦ç»„æˆçš„ä¸€ä¸ªåºåˆ—ã€‚</p>
<p>å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = &quot;abc&quot;</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼šä¸‰ä¸ªå›æ–‡å­ä¸²: &quot;a&quot;, &quot;b&quot;, &quot;c&quot;</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = &quot;aaa&quot;</span><br><span class="line">è¾“å‡ºï¼š6</span><br><span class="line">è§£é‡Šï¼š6ä¸ªå›æ–‡å­ä¸²: &quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;aa&quot;, &quot;aa&quot;, &quot;aaa&quot;</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= s.length &lt;= 1000</code></li>
<li><code>s</code> ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li>
</ul>
<h4 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>å›æ–‡ä¸²å°±æ˜¯å¯¹ç§°ä¸²ï¼š</p>
<ul>
<li><p>å¦‚æœæ˜¯å¥‡æ•°ä¸ªæ•°ï¼Œå°±æ˜¯ä»¥æœ€ä¸­é—´ä¸€ä¸ªå­—æ¯ä¸ºè½´ éœ€è¦å¯¹ç§°ï¼›</p>
</li>
<li><p>å¦‚æœæ˜¯å¶æ•°ä¸ªæ•°ï¼Œå°±æ˜¯ä»¥ä¸­é—´ä¸¤ä¸ªæ•°ä¸ºè½´ éœ€è¦å¯¹ç§°ã€‚</p>
</li>
</ul>
<p>å› æ­¤ï¼Œéå†å­—ç¬¦ä¸²çš„æ¯ä¸ªä½ç½®ï¼Œä»å½“å‰ä½ç½®å‡ºå‘ï¼š</p>
<ol>
<li><p>è®¡ç®—å¥‡æ•°é•¿åº¦çš„å›æ–‡ä¸²ä¸ªæ•°: start &#x3D; i, end&#x3D;i</p>
<p>ä»¥ i ä¸ºè½´ï¼Œæ‰€ä»¥èµ·å§‹å’Œç»“æŸçš„æŒ‡é’ˆéƒ½æ˜¯ i </p>
<table>
<thead>
<tr>
<th></th>
<th>i-1</th>
<th>i</th>
<th>i+1</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>i-1çš„æ•°è¦å’Œi+1ç›¸åŒ</td>
<td>ä»¥æ­¤ä¸ºè½´</td>
<td>i-1çš„æ•°è¦å’Œi+1ç›¸åŒ</td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p>è®¡ç®—å¶æ•°é•¿åº¦çš„å›æ–‡ä¸²ä¸ªæ•°: start &#x3D; i, end&#x3D;i+1</p>
<p>æ­¤æ—¶æ²¡æœ‰è½´äº†ï¼Œæ‰€ä»¥èµ·å§‹æŒ‡é’ˆæ˜¯ i ï¼Œ ç»“æŸæŒ‡é’ˆæ˜¯i+1</p>
<table>
<thead>
<tr>
<th></th>
<th>i</th>
<th>i+1</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>içš„æ•°è¦å’Œi+1ç›¸åŒ</td>
<td>içš„æ•°è¦å’Œi+1ç›¸åŒ</td>
<td></td>
</tr>
</tbody></table>
</li>
</ol>
<p>å¦‚ä½•ç®—å›æ–‡ä¸²å‘¢ï¼š</p>
<p>åŒæŒ‡é’ˆï¼Œä¸€ä¸ªå‘å‰ä¸€ä¸ªå‘å åˆ¤æ–­å½“å‰çš„å­—ç¬¦æ˜¯ä¸æ˜¯ä¸€æ ·çš„ï¼Œä¸€æ ·å°±æ˜¯å›æ–‡ï¼Œåä¹‹ä¸æ»¡è¶³</p>
<h4 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-2"><a href="#c-2" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countSubstrings</span><span class="params">(string s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// ä¸­å¿ƒæ‰©å±•æ³•</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; s.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å¥‡æ•°ä½ç½® ä»è‡ªå·±çš„ä½ç½®æ‰©å±•</span></span><br><span class="line">            count += <span class="built_in">countPliand</span>(s, i, i);</span><br><span class="line">            <span class="comment">// å¶æ•°ä½ç½® ä»iå’Œæ—è¾¹çš„æ•°å­—æ‰©å±•</span></span><br><span class="line">            count += <span class="built_in">countPliand</span>(s, i, i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countPliand</span><span class="params">(string s, <span class="type">int</span> start, <span class="type">int</span> end)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (start &gt;= <span class="number">0</span> &amp;&amp; end &lt;= s.<span class="built_in">size</span>() - <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[start] == s[end])</span><br><span class="line">            &#123;</span><br><span class="line">                count++;</span><br><span class="line">                <span class="comment">// ç§»åŠ¨æŒ‡é’ˆ åˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡</span></span><br><span class="line">                start--;</span><br><span class="line">                end++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h5 id="go-2"><a href="#go-2" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countSubstrings</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	count := <span class="number">0</span></span><br><span class="line">	<span class="comment">//ä¸­å¿ƒæ‰©å±•æ³•ï¼Œæ‰¾åˆ°ä»å½“å‰ä½ç½®æ‰©å±•çš„å­ä¸²æ˜¯ä¸æ˜¯å›æ–‡</span></span><br><span class="line">	<span class="comment">//ä»å½“å‰ä½ç½®å‡ºå‘å¯èƒ½æ˜¯å¥‡æ•°é•¿åº¦ä¹Ÿå¯èƒ½æ˜¯å¶æ•°é•¿åº¦</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">		<span class="comment">//å¥‡æ•°é•¿åº¦</span></span><br><span class="line">		count += countPalind(s, i, i)</span><br><span class="line">		<span class="comment">//å¶æ•°é•¿åº¦</span></span><br><span class="line">		count += countPalind(s, i, i+<span class="number">1</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countPalind</span><span class="params">(s <span class="type">string</span>, start, end <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	count := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> start &gt;= <span class="number">0</span> &amp;&amp; end &lt;= <span class="built_in">len</span>(s)<span class="number">-1</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> s[start] == s[end] &#123;</span><br><span class="line">			count++</span><br><span class="line">			<span class="comment">//å¾€ä¸¤è¾¹èµ°</span></span><br><span class="line">			start--</span><br><span class="line">			end++</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="01-05"><a href="#01-05" class="headerlink" title="01.05"></a>01.05</h2><h3 id="é•¿åº¦æœ€å°çš„å­æ•°ç»„"><a href="#é•¿åº¦æœ€å°çš„å­æ•°ç»„" class="headerlink" title="é•¿åº¦æœ€å°çš„å­æ•°ç»„"></a>é•¿åº¦æœ€å°çš„å­æ•°ç»„</h3><p><a href="https://leetcode.cn/problems/minimum-size-subarray-sum/description/">https://leetcode.cn/problems/minimum-size-subarray-sum/description/</a></p>
<p>ç»™å®šä¸€ä¸ªå«æœ‰ <code>n</code> ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° <code>target</code> <strong>ã€‚</strong></p>
<p>æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶æ€»å’Œå¤§äºç­‰äº <code>target</code> çš„é•¿åº¦æœ€å°çš„ <strong>è¿ç»­å­æ•°ç»„</strong> <code>[numsl, numsl+1, ..., numsr-1, numsr]</code> ï¼Œå¹¶è¿”å›å…¶é•¿åº¦<strong>ã€‚</strong>å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› <code>0</code> ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line">è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼štarget = 4, nums = [1,4,4]</span><br><span class="line">è¾“å‡ºï¼š1</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼štarget = 11, nums = [1,1,1,1,1,1,1,1]</span><br><span class="line">è¾“å‡ºï¼š0</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= target &lt;= 109</code></li>
<li><code>1 &lt;= nums.length &lt;= 105</code></li>
<li><code>1 &lt;= nums[i] &lt;= 105</code></li>
</ul>
<h4 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>æ‰¾åˆ°å’Œæ˜¯å¤§äºç­‰äºtargetçš„è¿ç»­å­æ•°ç»„ï¼Œæƒ³åˆ°ç”¨æ»‘åŠ¨çª—å£(æ­£æ•´æ•°çš„æ•°ç»„å’Œ, <strong>å…¨æ˜¯æ­£æ•°æ‰èƒ½ç”¨æ»‘åŠ¨çª—å£</strong>)</p>
<ol>
<li><p>å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆleft, right ä»0å¼€å§‹</p>
</li>
<li><p>æ‰©å¤§rightæŒ‡é’ˆ</p>
<p>ä¸€ç›´æŠŠrightæŒ‡é’ˆçš„å†…å®¹åŠ å…¥åˆ°sumå’Œä¸­ï¼Œç›´åˆ°æ‰¾åˆ°å’Œå¤§äºç­‰äºç»™å®šå€¼</p>
</li>
<li><p>ç¼©å°leftæŒ‡é’ˆ</p>
<p>ä¸€ç›´å‡å»leftæŒ‡é’ˆï¼Œåœ¨å’Œå¤§äºç­‰äºç»™å®šå€¼çš„åŸºç¡€ä¸Šå‡å»leftæŒ‡é’ˆçš„å†…å®¹</p>
</li>
</ol>
<p>è¿™æ ·æ‰¾åˆ°çš„å°±æ˜¯è¿ç»­çš„å­æ•°ç»„çš„å’Œå¤§äºç­‰äºç»™å®šå€¼çš„æœ€å°é•¿åº¦ï¼Œä¸€ç›´æ‰¾ï¼Œæ›´æ–°æœ€å°é•¿åº¦å³å¯</p>
<h4 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line">è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„</span><br></pre></td></tr></table></figure>



<h5 id="æ‰©å¤§rightæŒ‡é’ˆ"><a href="#æ‰©å¤§rightæŒ‡é’ˆ" class="headerlink" title="æ‰©å¤§rightæŒ‡é’ˆ"></a>æ‰©å¤§rightæŒ‡é’ˆ</h5><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>right</td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>nums</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>sum</td>
<td>2&lt;7</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>minLen</td>
<td>math.MaxInt64</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>right</td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>nums</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>sum</td>
<td></td>
<td>5&#x3D;2+3 &lt;7</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>minLen</td>
<td></td>
<td>math.MaxInt64</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>right</td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>nums</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>sum</td>
<td></td>
<td></td>
<td>6&#x3D;2+3+1 &lt;7</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>minLen</td>
<td></td>
<td></td>
<td>math.MaxInt64</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h5 id="æ­¤æ—¶sum-gt-x3D-target"><a href="#æ­¤æ—¶sum-gt-x3D-target" class="headerlink" title="æ­¤æ—¶sum&gt;&#x3D;target"></a>æ­¤æ—¶sum&gt;&#x3D;target</h5><p>æ‰©å¤§æŒ‡é’ˆçš„æ—¶å€™minLenæ˜¯ä¸ä¼šå˜çš„ï¼Œåªæœ‰æ‰¾åˆ°äº†sum&gt;&#x3D;targetçš„æ—¶å€™æ‰ä¼šæ›´æ–°minLen</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>right</td>
<td></td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
</tr>
<tr>
<td>nums</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>sum</td>
<td></td>
<td></td>
<td></td>
<td>8&#x3D;2+3+1+2&gt;&#x3D;7</td>
<td></td>
<td></td>
</tr>
<tr>
<td>minLen</td>
<td></td>
<td></td>
<td></td>
<td>3-0+1 &#x3D; 4</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h5 id="ç¼©å°leftæŒ‡é’ˆ"><a href="#ç¼©å°leftæŒ‡é’ˆ" class="headerlink" title="ç¼©å°leftæŒ‡é’ˆ"></a>ç¼©å°leftæŒ‡é’ˆ</h5><p>å› ä¸ºæ­¤æ—¶sum&lt;7 æ‰€ä»¥ä¸æ›´æ–°minLen</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>right</td>
<td></td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
</tr>
<tr>
<td>nums</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>sum</td>
<td></td>
<td></td>
<td></td>
<td>6&#x3D;8-2&lt;7</td>
<td></td>
<td></td>
</tr>
<tr>
<td>minLen</td>
<td></td>
<td></td>
<td></td>
<td>3-0+1 &#x3D; 4</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h5 id="ç»§ç»­æ‰©å¤§rightæŒ‡é’ˆ"><a href="#ç»§ç»­æ‰©å¤§rightæŒ‡é’ˆ" class="headerlink" title="ç»§ç»­æ‰©å¤§rightæŒ‡é’ˆ"></a>ç»§ç»­æ‰©å¤§rightæŒ‡é’ˆ</h5><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>right</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
</tr>
<tr>
<td>nums</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>sum</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>10&#x3D;6+4&gt;&#x3D;7</td>
<td></td>
</tr>
<tr>
<td>minLen</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>min(4, 4-1+1) &#x3D; 4</td>
<td></td>
</tr>
</tbody></table>
<h5 id="ç»§ç»­ç¼©å°leftæŒ‡é’ˆ"><a href="#ç»§ç»­ç¼©å°leftæŒ‡é’ˆ" class="headerlink" title="ç»§ç»­ç¼©å°leftæŒ‡é’ˆ"></a>ç»§ç»­ç¼©å°leftæŒ‡é’ˆ</h5><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>right</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
</tr>
<tr>
<td>nums</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>sum</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>7&#x3D;10-3&gt;&#x3D;7</td>
<td></td>
</tr>
<tr>
<td>minLen</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>min(4, 4-2+1) &#x3D; 3</td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td></td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
<td></td>
</tr>
<tr>
<td>right</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
</tr>
<tr>
<td>nums</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>sum</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6&#x3D;7-1&lt;&#x3D;7</td>
<td></td>
</tr>
<tr>
<td>minLen</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>3</td>
<td></td>
</tr>
</tbody></table>
<h5 id="ç»§ç»­æ‰©å¤§rightæŒ‡é’ˆ-1"><a href="#ç»§ç»­æ‰©å¤§rightæŒ‡é’ˆ-1" class="headerlink" title="ç»§ç»­æ‰©å¤§rightæŒ‡é’ˆ"></a>ç»§ç»­æ‰©å¤§rightæŒ‡é’ˆ</h5><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>right</td>
<td></td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
<td>ğŸ‘‡</td>
</tr>
<tr>
<td>nums</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>sum</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>9&#x3D;6+3&gt;&#x3D;7</td>
</tr>
<tr>
<td>minLen</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>min(3, 5-3+1) &#x3D; 3</td>
</tr>
</tbody></table>
<h5 id="ç»§ç»­ç¼©å°leftæŒ‡é’ˆ-1"><a href="#ç»§ç»­ç¼©å°leftæŒ‡é’ˆ-1" class="headerlink" title="ç»§ç»­ç¼©å°leftæŒ‡é’ˆ"></a>ç»§ç»­ç¼©å°leftæŒ‡é’ˆ</h5><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
<td></td>
</tr>
<tr>
<td>right</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>ğŸ‘‡</td>
</tr>
<tr>
<td>nums</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>sum</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>7&#x3D;9-2&gt;&#x3D;7</td>
<td></td>
</tr>
<tr>
<td>minLen</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>min(3, 5-4&#x3D;1) &#x3D; 2</td>
<td></td>
</tr>
</tbody></table>
<p>æ‰€ä»¥æœ€ç»ˆç­”æ¡ˆæ˜¯2</p>
<h4 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-3"><a href="#c-3" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="type">int</span> target, vector&lt;<span class="type">int</span>&gt; &amp;nums)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// æ»‘åŠ¨çª—å£: æ€»å’Œå¤§äºç­‰äº target çš„é•¿åº¦æœ€å°çš„ è¿ç»­å­æ•°ç»„</span></span><br><span class="line">        <span class="comment">// 2, 3, 1, 2, 4, 3 -&gt; 7</span></span><br><span class="line">        <span class="type">int</span> left = <span class="number">0</span>, right = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> len = INT_MAX;</span><br><span class="line">        <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (right &lt;= nums.<span class="built_in">size</span>() - <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            sum += nums[right];</span><br><span class="line">            <span class="keyword">while</span> (sum &gt;= target &amp;&amp; left &lt;= right)</span><br><span class="line">            &#123;</span><br><span class="line">                len = <span class="built_in">min</span>(len, right - left + <span class="number">1</span>);</span><br><span class="line">                sum -= nums[left];</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            right++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (len == INT_MAX)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> len;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h5 id="go-3"><a href="#go-3" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minSubArrayLen</span><span class="params">(target <span class="type">int</span>, nums []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="comment">//æ»‘åŠ¨çª—å£ æ€»å’Œå¤§äºç­‰äº target</span></span><br><span class="line">	left := <span class="number">0</span></span><br><span class="line">	right := <span class="number">0</span></span><br><span class="line">	minLen := math.MaxInt64</span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> right &lt;= <span class="built_in">len</span>(nums)<span class="number">-1</span> &#123;</span><br><span class="line">		sum += nums[right]</span><br><span class="line">		<span class="keyword">for</span> sum &gt;= target &amp;&amp; left &lt;= right &#123;</span><br><span class="line">			<span class="keyword">if</span> right-left+<span class="number">1</span> &lt; minLen &#123;</span><br><span class="line">				minLen = right - left + <span class="number">1</span></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			sum -= nums[left]</span><br><span class="line">			left++</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//ä¸€ç›´ç´¯åŠ </span></span><br><span class="line">		right++</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//è¯´æ˜æ²¡æœ‰ç¬¦åˆçš„ ç›´æ¥è¿”å›0</span></span><br><span class="line">	<span class="keyword">if</span> minLen == math.MaxInt64 &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> minLen</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="01-08"><a href="#01-08" class="headerlink" title="01.08"></a>01.08</h2><h3 id="å’Œä¸ºkçš„å­æ•°ç»„"><a href="#å’Œä¸ºkçš„å­æ•°ç»„" class="headerlink" title="å’Œä¸ºkçš„å­æ•°ç»„"></a>å’Œä¸ºkçš„å­æ•°ç»„</h3><p><a href="https://leetcode.cn/problems/subarray-sum-equals-k/description/">https://leetcode.cn/problems/subarray-sum-equals-k/description/</a></p>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªæ•´æ•° <code>k</code> ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å› <em>è¯¥æ•°ç»„ä¸­å’Œä¸º <code>k</code> çš„å­æ•°ç»„çš„ä¸ªæ•°</em> ã€‚</p>
<p>å­æ•°ç»„æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„è¿ç»­éç©ºåºåˆ—ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,1,1], k = 2</span><br><span class="line">è¾“å‡ºï¼š2</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,2,3], k = 3</span><br><span class="line">è¾“å‡ºï¼š2</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 2 * 104</code></li>
<li><code>-1000 &lt;= nums[i] &lt;= 1000</code></li>
<li><code>-107 &lt;= k &lt;= 107</code></li>
</ul>
<h4 id="æ€è·¯-4"><a href="#æ€è·¯-4" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><h5 id="æ»‘åŠ¨çª—å£"><a href="#æ»‘åŠ¨çª—å£" class="headerlink" title="æ»‘åŠ¨çª—å£"></a>æ»‘åŠ¨çª—å£</h5><p>å¯¹äºæ±‚è¿ç»­çš„å­åºåˆ—ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°æ»‘åŠ¨çª—å£ï¼Œä½†æ˜¯è¿™é‡Œä¸èƒ½ç”¨ï¼š</p>
<p>å› ä¸ºå½“sum&#x3D;&#x3D;kçš„æ—¶å€™ï¼Œå°±æ˜¯æ­£ç¡®ç»“æœã€‚ä½†æ˜¯å½“sum&lt;kæˆ–è€…sum&gt;kçš„æ—¶å€™ï¼Œæ— æ³•åˆ¤æ–­å¦‚ä½•ç§»åŠ¨çª—å£çš„æŒ‡é’ˆ</p>
<p><strong>å› ä¸ºæ²¡è¯´æ•°ç»„çš„å€¼éƒ½æ˜¯æ­£æ•°ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ»‘åŠ¨çª—å£</strong></p>
<h5 id="æš´åŠ›æ³•"><a href="#æš´åŠ›æ³•" class="headerlink" title="æš´åŠ›æ³•"></a>æš´åŠ›æ³•</h5><p>æšä¸¾ï¼Œä» i ä½ç½®å‡ºå‘ï¼Œå¾€åæ‰¾æ•°å­—åŠ åˆ°sumé‡Œï¼Œå¦‚æœæ»¡è¶³sum&#x3D;kï¼Œé‚£ä¹ˆå°±æ˜¯æ‰¾åˆ°äº†ä¸€ä¸ªæ­£ç¡®çš„ç»“æœ</p>
<h5 id="å‰ç¼€å’Œ"><a href="#å‰ç¼€å’Œ" class="headerlink" title="å‰ç¼€å’Œ"></a>å‰ç¼€å’Œ</h5><p>ä½¿ç”¨prefixSumä¿å­˜ä»0~iä½ç½®ä¸Šçš„å’Œï¼ŒprefixSum[sum(0:i)] &#x3D; 1(è¡¨ç¤ºå’Œå‡ºç°çš„æ¬¡æ•°)</p>
<p>è¦æ±‚è¿ç»­çš„å­åºåˆ—çš„å’Œä¸ºkï¼Œ å³æ±‚prefixSum[ i ] - prefixSum[ j ] &#x3D; kï¼Œå› æ­¤ï¼š</p>
<ol>
<li><p>éå†æ¯ä¸ªä½ç½®è®¡ç®—å½“å‰0~i çš„å’Œ</p>
</li>
<li><p>ç‰¹æ®Šå¤„ç†ï¼š</p>
<p>å¦‚æœ<strong>é¦–æ¬¡å‡ºç°å‰ç¼€å’Œå·®å€¼ä¸º0</strong> å³prefixSum[i] -k &#x3D; 0  prefixSum[j] &#x3D; 0ï¼Œç»™è¿™ä¸ªé¦–æ¬¡å‡ºç°çš„å‰ç¼€å’Œ0 ++ -&gt; prefixSum[0]++ï¼Œä¸ç„¶ç´¯åŠ ä¼šå‡ºé”™</p>
<p>ï¼ˆå› ä¸ºä¹‹å‰å‡ºç°çš„å¯èƒ½æ˜¯ä»è‡ªå·±ä½ç½®å‡ºå‘çš„å’Œä¸º0ï¼Œä¸æ˜¯å‰ç¼€å’Œçš„å·®å€¼ä¸º0ï¼‰</p>
</li>
<li><p>åœ¨mapé‡Œæ‰¾æ˜¯å¦æœ‰prefixSum[ sum ] - kçš„å€¼ï¼Œå¦‚æœæœ‰è¯´æ˜å­˜åœ¨ prefixSum[ j ]çš„å‰ç¼€å’Œï¼Œ ä½¿å¾—æ¡ä»¶prefixSum[ i ] - prefixSum[ j ] &#x3D; kæ»¡è¶³ï¼Œè¿™æ—¶å€™åŠ ä¸Šå‰ç¼€å’Œçš„ä¸ªæ•°</p>
</li>
<li><p>å†æŠŠå½“å‰çš„sumçš„å’ŒåŠ å…¥åˆ°prefixSumä¸­</p>
</li>
</ol>
<h4 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-4"><a href="#c-4" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// è¦å’Œä¸ºkçš„è¿ç»­å­æ•°ç»„ ä¸èƒ½ç”¨æ»‘åŠ¨çª—å£ï¼Œ å› ä¸ºä¸ç¡®å®šsum!=kæ—¶æ˜¯å¾€å‰è¿˜æ˜¯å¾€åç§»åŠ¨æŒ‡é’ˆ</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨å‰ç¼€å’Œ</span></span><br><span class="line">    <span class="comment">// ä»0~iä½ç½®çš„å…ƒç´ å’Œ</span></span><br><span class="line">    <span class="comment">//-1 -1 1</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">subarraySum</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums, <span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; prefixSum;</span><br><span class="line">        <span class="type">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="type">bool</span> isFirstComplentZero = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// prefixSumè¡¨ç¤ºå‰ç¼€å’Œ</span></span><br><span class="line">        <span class="comment">// é¢˜ç›®å¯ä»¥è½¬æ¢ä¸ºä¸¤ä¸ªå‰ç¼€å’Œçš„å·®ä¸ºk prefixSum[i] - prefixSum[j] = k</span></span><br><span class="line">        <span class="comment">// å¯¹äºæ¯ä¸ªå‰ç¼€å’Œ åˆ¤æ–­æ˜¯å¦ä¹‹å‰çš„mapé‡Œå­˜åœ¨prefixSum[j]å³prefixSum[i]-k</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            sum += nums[i];</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœå·®å€¼ä¸º0ï¼Œå› æ­¤éœ€è¦åˆå§‹åŒ–çš„æ—¶å€™çš„æŠŠmap[0]è®¾ç½®ä¸º1</span></span><br><span class="line">            <span class="type">int</span> complent = sum - k;</span><br><span class="line">            <span class="comment">// å¦‚æœé¦–æ¬¡å‡ºç°å‰ç¼€å’Œå·®å€¼ä¸º0 å³prefixSum[i] -k = 0  prefixSum[j] = 0ï¼Œç»™è¿™ä¸ªé¦–æ¬¡å‡ºç°çš„å‰ç¼€å’Œ0 ++ -&gt; map[0]++ï¼Œä¸ç„¶ç´¯åŠ ä¼šå‡ºé”™</span></span><br><span class="line">            <span class="keyword">if</span> (complent == <span class="number">0</span> &amp;&amp; isFirstComplentZero)</span><br><span class="line">            &#123;</span><br><span class="line">                prefixSum[complent]++;</span><br><span class="line">                isFirstComplentZero = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¹‹å‰çš„mapé‡Œå­˜åœ¨prefixSum[j]å³prefixSum[i]-k</span></span><br><span class="line">            <span class="keyword">if</span> (prefixSum.<span class="built_in">find</span>(complent) != prefixSum.<span class="built_in">end</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                result += prefixSum[complent];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// åŠ ä¸Šå½“å‰çš„å‰ç¼€å’Œ prefixSum[i]</span></span><br><span class="line">            prefixSum[sum]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="go-4"><a href="#go-4" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">subarraySum</span><span class="params">(nums []<span class="type">int</span>, k <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	result := <span class="number">0</span></span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">	prefixSum := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>&#123;&#125;</span><br><span class="line">	isFirstComplentZero := <span class="literal">true</span></span><br><span class="line">	<span class="comment">// é¢˜ç›®å¯ä»¥è½¬æ¢ä¸ºä¸¤ä¸ªå‰ç¼€å’Œçš„å·®ä¸ºk prefixSum[i] - prefixSum[j] = k</span></span><br><span class="line">	<span class="comment">// å¯¹äºæ¯ä¸ªå‰ç¼€å’Œ åˆ¤æ–­æ˜¯å¦ä¹‹å‰çš„mapé‡Œå­˜åœ¨prefixSum[j]å³prefixSum[i]-k</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">		sum += nums[i]</span><br><span class="line">		complent := sum - k</span><br><span class="line">		<span class="comment">//å¦‚æœé¦–æ¬¡å‡ºç°å‰ç¼€å’Œå·®å€¼ä¸º0 å³prefixSum[i] -k = 0  prefixSum[j] = 0ï¼Œç»™è¿™ä¸ªé¦–æ¬¡å‡ºç°çš„å‰ç¼€å’Œ0 ++ -&gt; map[0]++ï¼Œä¸ç„¶ç´¯åŠ ä¼šå‡ºé”™</span></span><br><span class="line">		<span class="keyword">if</span> complent == <span class="number">0</span> &amp;&amp; isFirstComplentZero &#123;</span><br><span class="line">			prefixSum[complent]++</span><br><span class="line">			isFirstComplentZero = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> _, exist := prefixSum[complent]; exist &#123;</span><br><span class="line">			result += prefixSum[complent]</span><br><span class="line">		&#125;</span><br><span class="line">		prefixSum[sum]++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="01-09"><a href="#01-09" class="headerlink" title="01.09"></a>01.09</h2><h3 id="ç¿»è½¬äºŒå‰æ ‘"><a href="#ç¿»è½¬äºŒå‰æ ‘" class="headerlink" title="ç¿»è½¬äºŒå‰æ ‘"></a>ç¿»è½¬äºŒå‰æ ‘</h3><p><a href="https://leetcode.cn/problems/invert-binary-tree/description/">https://leetcode.cn/problems/invert-binary-tree/description/</a></p>
<p>ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ <code>root</code> ï¼Œç¿»è½¬è¿™æ£µäºŒå‰æ ‘ï¼Œå¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2021/03/14/invert1-tree.jpg" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [4,2,7,1,3,6,9]</span><br><span class="line">è¾“å‡ºï¼š[4,7,2,9,6,3,1]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2021/03/14/invert2-tree.jpg" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [2,1,3]</span><br><span class="line">è¾“å‡ºï¼š[2,3,1]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = []</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´åœ¨ <code>[0, 100]</code> å†…</li>
<li><code>-100 &lt;= Node.val &lt;= 100</code></li>
</ul>
<h4 id="æ€è·¯-5"><a href="#æ€è·¯-5" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>é€’å½’ï¼š</p>
<ol>
<li>é€’å½’ç»“æŸæ¡ä»¶ï¼šå½“æ ¹èŠ‚ç‚¹ä¸ºç©ºè¿”å›</li>
<li>é€’å½’ç¿»è½¬ï¼š<ol>
<li>äº¤æ¢å½“å‰çš„å·¦å³èŠ‚ç‚¹</li>
<li>é€’å½’ç¿»è½¬å·¦èŠ‚ç‚¹</li>
<li>é€’å½’ç¿»è½¬å³èŠ‚ç‚¹</li>
</ol>
</li>
</ol>
<h5 id="å¦‚ä½•æ‰“å°æ ‘"><a href="#å¦‚ä½•æ‰“å°æ ‘" class="headerlink" title="å¦‚ä½•æ‰“å°æ ‘"></a>å¦‚ä½•æ‰“å°æ ‘</h5><p>ä½¿ç”¨é˜Ÿåˆ—</p>
<ol>
<li>åˆå§‹åŒ–ï¼šæŠŠæ ¹èŠ‚ç‚¹å…¥é˜Ÿ</li>
<li>é˜Ÿåˆ—ä¸ä¸ºç©º<ol>
<li>æ‰“å°é˜Ÿé¦–çš„èŠ‚ç‚¹çš„å€¼</li>
<li>æŠŠé˜Ÿé¦–å€¼å‡ºé˜Ÿ</li>
<li>å½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸ä¸ºç©º å·¦å­æ ‘å…¥é˜Ÿ</li>
<li>å½“å‰èŠ‚ç‚¹çš„å³å­æ ‘ä¸ä¸ºç©º å³å­æ ‘å…¥é˜Ÿ</li>
</ol>
</li>
</ol>
<p>goè¯­è¨€ä¸­ä½¿ç”¨sliceä½œä¸ºé˜Ÿåˆ—ï¼Œå…ˆè¿›å…ˆå‡º</p>
<h4 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-5"><a href="#c-5" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TreeNode</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    TreeNode *left;</span><br><span class="line">    TreeNode *right;</span><br><span class="line">    <span class="built_in">TreeNode</span>() : <span class="built_in">val</span>(<span class="number">0</span>), <span class="built_in">left</span>(<span class="literal">nullptr</span>), <span class="built_in">right</span>(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">    <span class="built_in">TreeNode</span>(<span class="type">int</span> x) : <span class="built_in">val</span>(x), <span class="built_in">left</span>(<span class="literal">nullptr</span>), <span class="built_in">right</span>(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">    <span class="built_in">TreeNode</span>(<span class="type">int</span> x, TreeNode *_left, TreeNode *_right) : <span class="built_in">val</span>(x), <span class="built_in">left</span>(_left), <span class="built_in">right</span>(_right) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">TreeNode *<span class="title">invertTree</span><span class="params">(TreeNode *root)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// ç¿»è½¬äºŒå‰æ ‘</span></span><br><span class="line">        <span class="comment">// å¯¹äºä¸€ä¸ªèŠ‚ç‚¹äº¤æ¢å·¦å³å­æ ‘</span></span><br><span class="line">        <span class="built_in">dfs</span>(root);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(TreeNode *root)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// é€’å½’ç»“æŸï¼šè¾¹ç•Œæˆ–è€…æ»¡è¶³æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€’å½’:äº¤æ¢å·¦å³å­æ ‘</span></span><br><span class="line">        TreeNode *tmp = root-&gt;left;</span><br><span class="line">        root-&gt;left = root-&gt;right;</span><br><span class="line">        root-&gt;right = tmp;</span><br><span class="line">        <span class="built_in">dfs</span>(root-&gt;left);</span><br><span class="line">        <span class="built_in">dfs</span>(root-&gt;right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintTree</span><span class="params">(TreeNode *root)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    queue&lt;TreeNode *&gt; queueTree;</span><br><span class="line">    queueTree.<span class="built_in">push</span>(root);</span><br><span class="line">    <span class="keyword">while</span> (!queueTree.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        TreeNode *qnode = queueTree.<span class="built_in">front</span>();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, qnode-&gt;val);</span><br><span class="line">        queueTree.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (qnode-&gt;left != <span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            queueTree.<span class="built_in">push</span>(qnode-&gt;left);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (qnode-&gt;right != <span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            queueTree.<span class="built_in">push</span>(qnode-&gt;right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Solution s;</span><br><span class="line">    TreeNode *node = <span class="keyword">new</span> <span class="built_in">TreeNode</span>(<span class="number">2</span>);</span><br><span class="line">    node-&gt;left = <span class="keyword">new</span> <span class="built_in">TreeNode</span>(<span class="number">1</span>);</span><br><span class="line">    node-&gt;right = <span class="keyword">new</span> <span class="built_in">TreeNode</span>(<span class="number">3</span>);</span><br><span class="line">    node = s.<span class="built_in">invertTree</span>(node);</span><br><span class="line">    <span class="built_in">PrintTree</span>(node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="go-5"><a href="#go-5" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> &#123;</span><br><span class="line">	Val   <span class="type">int</span></span><br><span class="line">	Left  *TreeNode</span><br><span class="line">	Right *TreeNode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">invertTree</span><span class="params">(root *TreeNode)</span></span> *TreeNode &#123;</span><br><span class="line">	dfs(root)</span><br><span class="line">	<span class="keyword">return</span> root</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dfs</span><span class="params">(root *TreeNode)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> root == <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	tmp := root.Left</span><br><span class="line">	root.Left = root.Right</span><br><span class="line">	root.Right = tmp</span><br><span class="line">	dfs(root.Left)</span><br><span class="line">	dfs(root.Right)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PrintTree</span><span class="params">(root *TreeNode)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> root == <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	queueTree := []*TreeNode&#123;&#125;</span><br><span class="line">	queueTree = <span class="built_in">append</span>(queueTree, root)</span><br><span class="line">	<span class="keyword">for</span> <span class="built_in">len</span>(queueTree) &gt; <span class="number">0</span> &#123;</span><br><span class="line">		qNode := queueTree[<span class="number">0</span>]</span><br><span class="line">		fmt.Println(qNode.Val)</span><br><span class="line">		queueTree = queueTree[<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> qNode.Left != <span class="literal">nil</span> &#123;</span><br><span class="line">			queueTree = <span class="built_in">append</span>(queueTree, qNode.Left)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> qNode.Right != <span class="literal">nil</span> &#123;</span><br><span class="line">			queueTree = <span class="built_in">append</span>(queueTree, qNode.Right)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	root := &amp;TreeNode&#123;Val: <span class="number">2</span>&#125;</span><br><span class="line">	root.Left = &amp;TreeNode&#123;Val: <span class="number">1</span>&#125;</span><br><span class="line">	root.Right = &amp;TreeNode&#123;Val: <span class="number">3</span>&#125;</span><br><span class="line">	invertTree(root)</span><br><span class="line">	PrintTree(root)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>daily</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜12æœˆ</title>
    <url>/dailyQuestionDec/</url>
    <content><![CDATA[<h2 id="12-14"><a href="#12-14" class="headerlink" title="12.14"></a>12.14</h2><h3 id="ç§»æ‰Kä½æ•°å­—"><a href="#ç§»æ‰Kä½æ•°å­—" class="headerlink" title="ç§»æ‰Kä½æ•°å­—"></a>ç§»æ‰Kä½æ•°å­—</h3><p><a href="https://leetcode.cn/problems/remove-k-digits/">https://leetcode.cn/problems/remove-k-digits/</a></p>
<p>ç»™ä½ ä¸€ä¸ªä»¥å­—ç¬¦ä¸²è¡¨ç¤ºçš„éè´Ÿæ•´æ•° num å’Œä¸€ä¸ªæ•´æ•° k ï¼Œç§»é™¤è¿™ä¸ªæ•°ä¸­çš„ k ä½æ•°å­—ï¼Œä½¿å¾—å‰©ä¸‹çš„æ•°å­—æœ€å°ã€‚è¯·ä½ ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›è¿™ä¸ªæœ€å°çš„æ•°å­—ã€‚</p>
<p>ç¤ºä¾‹ 1 ï¼š</p>
<p>è¾“å…¥ï¼šnum &#x3D; â€œ1432219â€, k &#x3D; 3<br>è¾“å‡ºï¼šâ€1219â€<br>è§£é‡Šï¼šç§»é™¤æ‰ä¸‰ä¸ªæ•°å­— 4, 3, å’Œ 2 å½¢æˆä¸€ä¸ªæ–°çš„æœ€å°çš„æ•°å­— 1219 ã€‚<br>ç¤ºä¾‹ 2 ï¼š</p>
<p>è¾“å…¥ï¼šnum &#x3D; â€œ10200â€, k &#x3D; 1<br>è¾“å‡ºï¼šâ€200â€<br>è§£é‡Šï¼šç§»æ‰é¦–ä½çš„ 1 å‰©ä¸‹çš„æ•°å­—ä¸º 200. æ³¨æ„è¾“å‡ºä¸èƒ½æœ‰ä»»ä½•å‰å¯¼é›¶ã€‚<br>ç¤ºä¾‹ 3 ï¼š</p>
<p>è¾“å…¥ï¼šnum &#x3D; â€œ10â€, k &#x3D; 2<br>è¾“å‡ºï¼šâ€0â€<br>è§£é‡Šï¼šä»åŸæ•°å­—ç§»é™¤æ‰€æœ‰çš„æ•°å­—ï¼Œå‰©ä½™ä¸ºç©ºå°±æ˜¯ 0 ã€‚</p>
<p>æç¤ºï¼š</p>
<p>1 &lt;&#x3D; k &lt;&#x3D; num.length &lt;&#x3D; 105<br>num ä»…ç”±è‹¥å¹²ä½æ•°å­—ï¼ˆ0 - 9ï¼‰ç»„æˆ<br>é™¤äº† 0 æœ¬èº«ä¹‹å¤–ï¼Œnum ä¸å«ä»»ä½•å‰å¯¼é›¶</p>
<h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>è´ªå¿ƒæ³•ï¼šé«˜ä½æ•°å­—çš„å½±å“æ¯”ä½ä½æ•°å­—å¤§ï¼Œæ‰€ä»¥éœ€è¦å°½å¯èƒ½è®©é«˜ä½çš„æ•°å­—å°</p>
<p>ï¼ˆ1ï¼‰åˆ©ç”¨æ ˆï¼ŒæŠŠæ•°å­—ä»é«˜ä½å¼€å§‹ä¾æ¬¡å…¥æ ˆ</p>
<p>å…¥æ ˆçš„æ—¶å€™åˆ¤æ–­æ˜¯å¦æ¯”æ ˆé‡Œçš„æ•°å­—å° å¦‚æœæ˜¯ å°±ä¸€ç›´å‡ºæ ˆåˆ°kçš„é¢åº¦ç”¨å®Œï¼Œè¿™æ ·ä¿è¯äº†å°çš„æ•°å­—åœ¨é«˜ä½</p>
<p>å½“kçš„é¢åº¦ç”¨å®Œ é‚£å°±æŠŠå‰©ä¸‹çš„æ•°å­—éƒ½å…¥æ ˆ</p>
<p>å¦‚æœå…¨éƒ¨å…¥æ ˆå kçš„é¢åº¦è¿˜æœ‰ å°±é»˜è®¤ä»æ ˆé¡¶å¼€å§‹å‡ºæ ˆ</p>
<p>ï¼ˆ2ï¼‰å‡ºæ ˆæ‰€æœ‰æ•°å­—å°±æ˜¯ç»“æœï¼ˆéœ€è¦åˆ é™¤æœ€å‰é¢çš„0ï¼‰</p>
<p>è¿™æ—¶å€™éœ€è¦æ³¨æ„ï¼š</p>
<p>å¦‚æœå…¨ä¸º0çš„ç»“æœå’Œå‰é¢æ˜¯0åé¢æœ‰æ•°å­—çš„æƒ…å†µå¤„ç†</p>
<h4 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>num &#x3D; â€œ1456128â€, k &#x3D; 4  é¢„æœŸè¾“å‡º 112 </p>
<p>å¤„ç†è¿‡ç¨‹ï¼š</p>
<p>1.å…¥æ ˆ</p>
<table>
<thead>
<tr>
<th>ç¬¬ä¸€ä¸ªï¼ˆk&#x3D;4ï¼‰</th>
<th>ç¬¬äºŒä¸ªï¼ˆk&#x3D;4ï¼‰</th>
<th align="left">ç¬¬ä¸‰ä¸ªï¼ˆk&#x3D;4ï¼‰</th>
<th>ç¬¬å››ä¸ªï¼ˆk&#x3D;4ï¼‰</th>
<th>ç¬¬äº”ä¸ªï¼ˆk&#x3D;3ï¼‰</th>
<th>ç¬¬äº”ä¸ªï¼ˆk&#x3D;2ï¼‰</th>
<th>ç¬¬äº”ä¸ªï¼ˆk&#x3D;1ï¼‰</th>
<th>ç¬¬å…­ä¸ªï¼ˆk&#x3D;1ï¼‰</th>
<th>ç¬¬ä¸ƒä¸ªï¼ˆk&#x3D;1ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td align="left"></td>
<td>6</td>
<td><del>6</del>    ï¼ˆ1å°äº6ï¼Œ6å‡ºæ ˆï¼‰</td>
<td></td>
<td></td>
<td></td>
<td>8</td>
</tr>
<tr>
<td></td>
<td></td>
<td align="left">5</td>
<td>5</td>
<td>5</td>
<td><del>5</del>  ï¼ˆ1å°äº5ï¼Œ5å‡ºæ ˆï¼‰</td>
<td></td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td></td>
<td>4</td>
<td align="left">4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td><del>4</del>  1    ï¼ˆ1å°äº4ï¼Œ4å‡ºæ ˆï¼Œ 1å…¥æ ˆï¼‰</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td align="left">1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody></table>
<p>kè¿˜æœ‰é¢åº¦ åˆ™ æ ˆé¡¶çš„8è¦å‡ºæ ˆ</p>
<p>2.å‡ºæ ˆ</p>
<p>æœ€ç»ˆç»“æœæ˜¯112</p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c"><a href="#c" class="headerlink" title="c++"></a>c++</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">class Solution</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    <span class="type">string</span> removeKdigits(<span class="type">string</span> num, <span class="type">int</span> k)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">string</span> result;</span><br><span class="line">        <span class="type">string</span> resultTmp;</span><br><span class="line">        stack&lt;char&gt; st;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.å…¥æ ˆ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            char c = num[i];</span><br><span class="line">            <span class="comment">// 1.1 æ ˆä¸ä¸ºç©ºï¼Œå¹¶ä¸”å½“å‰å€¼æ¯”æ ˆå†…å€¼å°ï¼Œå¹¶ä¸”æœ‰å‰©ä½™ç§»é™¤çš„é¢åº¦</span></span><br><span class="line">            while (!st.empty() &amp;&amp; c &lt; st.top() &amp;&amp; k &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                st.pop();</span><br><span class="line">                k--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 1.2 æ ˆä¸ºç©ºå°±å…¥æ ˆï¼›å½“å‰å€¼æ¯”æ ˆå†…å€¼å¤§ä¹Ÿå…¥æ ˆ</span></span><br><span class="line">            st.push(c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ‰å‰©ä½™çš„é¢åº¦è¦ç»§ç»­å‡ºæ ˆ</span></span><br><span class="line">        while (k &gt; <span class="number">0</span> &amp;&amp; !st.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            st.pop();</span><br><span class="line">            k--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. å‡ºæ ˆ</span></span><br><span class="line">        while (!st.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            resultTmp += st.top();</span><br><span class="line">            st.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        reverse(resultTmp.begin(), resultTmp.end());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!resultTmp.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// æ ˆé‡Œæœ‰å†…å®¹åˆ é™¤å‰é¢çš„0</span></span><br><span class="line">            <span class="type">int</span> index = <span class="number">0</span>;</span><br><span class="line">            while (index &lt; resultTmp.size() &amp;&amp; resultTmp[index] == <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// åˆ é™¤å‰é¢0çš„resultTmp</span></span><br><span class="line">            <span class="keyword">if</span> (index &lt; resultTmp.size())</span><br><span class="line">            &#123;</span><br><span class="line">                result = resultTmp.substr(index);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// å…¨æ˜¯0çš„resultTmp</span></span><br><span class="line">                resultTmp = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">                result = resultTmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// æ ˆé‡Œæ²¡å†…å®¹å°±æ˜¯ç©º</span></span><br><span class="line">            resultTmp = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">            result = resultTmp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="go"><a href="#go" class="headerlink" title="go"></a>go</h5><p>goä»£ç é‡Œæ²¡æœ‰stackï¼Œéœ€è¦ç”¨åˆ‡ç‰‡æ¥å®ç°stack</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Stack []<span class="type">byte</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span></span> Push(str <span class="type">byte</span>) &#123;</span><br><span class="line">	*s = <span class="built_in">append</span>(*s, str)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span></span> Pop() <span class="type">error</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> s.IsEmpty() &#123;</span><br><span class="line">		<span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;Stack is empty&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		i := <span class="built_in">len</span>(*s) - <span class="number">1</span></span><br><span class="line">		*s = (*s)[:i]</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span></span> Top() (<span class="type">byte</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> s.IsEmpty() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, fmt.Errorf(<span class="string">&quot;Stack is empty&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		i := <span class="built_in">len</span>(*s) - <span class="number">1</span></span><br><span class="line">		elenment := (*s)[i]</span><br><span class="line">		<span class="keyword">return</span> elenment, <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span></span> IsEmpty() <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(*s) == <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ReverseSlice</span><span class="params">(s []<span class="type">byte</span>)</span></span> &#123;</span><br><span class="line">	length := <span class="built_in">len</span>(s)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; length/<span class="number">2</span>; i++ &#123;</span><br><span class="line">		s[i], s[length<span class="number">-1</span>-i] = s[length<span class="number">-1</span>-i], s[i]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeKdigits</span><span class="params">(num <span class="type">string</span>, k <span class="type">int</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> st Stack</span><br><span class="line">	<span class="keyword">var</span> resultTmp []<span class="type">byte</span></span><br><span class="line">	<span class="keyword">var</span> result <span class="type">string</span></span><br><span class="line">	<span class="comment">//1.å…¥æ ˆ</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(num); i++ &#123;</span><br><span class="line">		c := num[i]</span><br><span class="line">		<span class="keyword">for</span> !st.IsEmpty() &amp;&amp; k &gt; <span class="number">0</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> s, _ := st.Top(); c &lt; s &#123;</span><br><span class="line">				st.Pop()</span><br><span class="line">				k--</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		st.Push(c)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> k &gt; <span class="number">0</span> &amp;&amp; !st.IsEmpty() &#123;</span><br><span class="line">		st.Pop()</span><br><span class="line">		k--</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.å‡ºæ ˆ</span></span><br><span class="line">	<span class="keyword">for</span> !st.IsEmpty() &#123;</span><br><span class="line">		s, _ := st.Top()</span><br><span class="line">		resultTmp = <span class="built_in">append</span>(resultTmp, s)</span><br><span class="line">		st.Pop()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(resultTmp) != <span class="number">0</span> &#123;</span><br><span class="line">		ReverseSlice(resultTmp)</span><br><span class="line">		index := <span class="number">0</span></span><br><span class="line">		<span class="keyword">for</span> index &lt; <span class="built_in">len</span>(resultTmp) &amp;&amp; resultTmp[index] == <span class="string">&#x27;0&#x27;</span> &#123;</span><br><span class="line">			index++</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> index &lt; <span class="built_in">len</span>(resultTmp) &#123;</span><br><span class="line">			<span class="keyword">for</span> index &lt; <span class="built_in">len</span>(resultTmp) &#123;</span><br><span class="line">				<span class="comment">//å‡½æ•°string()å¯ä»¥å°†ä¸€ä¸ªbyteï¼ˆæˆ–runeï¼‰è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«è¯¥å­—ç¬¦çš„å­—ç¬¦ä¸²</span></span><br><span class="line">				result += <span class="type">string</span>(resultTmp[index])</span><br><span class="line">				index++</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> result</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="12-15"><a href="#12-15" class="headerlink" title="12.15"></a>12.15</h2><h3 id="æœ€å°è·¯å¾„å’Œ"><a href="#æœ€å°è·¯å¾„å’Œ" class="headerlink" title="æœ€å°è·¯å¾„å’Œ"></a>æœ€å°è·¯å¾„å’Œ</h3><p>ç»™å®šä¸€ä¸ªåŒ…å«éè´Ÿæ•´æ•°çš„ <code>*m* x *n*</code> ç½‘æ ¼ <code>grid</code> ï¼Œè¯·æ‰¾å‡ºä¸€æ¡ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ•°å­—æ€»å’Œä¸ºæœ€å°ã€‚</p>
<p><strong>è¯´æ˜ï¼š</strong>æ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/11/05/minpath.jpg" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šgrid = [[1,3,1],[1,5,1],[4,2,1]]</span><br><span class="line">è¾“å‡ºï¼š7</span><br><span class="line">è§£é‡Šï¼šå› ä¸ºè·¯å¾„ 1â†’3â†’1â†’1â†’1 çš„æ€»å’Œæœ€å°ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šgrid = [[1,2,3],[4,5,6]]</span><br><span class="line">è¾“å‡ºï¼š12</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>m == grid.length</code></li>
<li><code>n == grid[i].length</code></li>
<li><code>1 &lt;= m, n &lt;= 200</code></li>
<li><code>0 &lt;= grid[i][j] &lt;= 200</code></li>
</ul>
<h4 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>åŠ¨æ€è§„åˆ’é¢˜ï¼Œå½“å‰çš„æœ€å°è·¯å¾„ä¾èµ–äºä¹‹å‰è·¯å¾„çš„æœ€å°å€¼+å½“å‰æ ¼å­å€¼</p>
<ul>
<li>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ ï¼ˆæ‰¾dp[ i ] [ j ]  å¦‚ä½•å¾—åˆ°ï¼‰</li>
</ul>
<p>dpè¡¨ç¤ºåˆ°ä½ç½®[ i ] [ j ] çš„è·¯å¾„æœ€å°å€¼</p>
<p>å› ä¸ºè·¯å¾„æ˜¯ä»å·¦å¾€å³ï¼Œæ‰€ä»¥åˆ°å½“å‰çš„æœ€å°è·¯å¾„æ˜¯ä¹‹å‰æœ€å°è·¯å¾„+å½“å‰æ ¼å­å€¼</p>
<p>å…¶ä¸­ä¹‹å‰æœ€å°è·¯å¾„æ˜¯min(dp[ i ] [ j -1 ], dp[ i - 1 ] [ j ])</p>
<p>å³dp[ i ] [ j ]  &#x3D; min(dp[ i ] [ j -1 ], dp[ i - 1 ] [ j ]) + grid[ i ] [ j ] </p>
<ul>
<li>åˆå§‹å€¼</li>
</ul>
<p>ç¬¬0è¡Œç¬¬0åˆ—çš„å€¼ä¸ºæ ¼å­è‡ªèº«</p>
<p>ç¬¬0è¡Œ ç¬¬ 1 åˆ— ~ ç¬¬ j åˆ— çš„å€¼éƒ½æ˜¯å‰ä¸€ä¸ªè·¯å¾„å€¼å’Œ+è‡ªèº«æ ¼å­å€¼ å³ dp[ 0 ] [ j - 1] + grid[ 0 ] [ j ]  &#x3D;  dp[ 0 ] [ j ]</p>
<p>ç¬¬0åˆ— ç¬¬ 1 è¡Œ ~ ç¬¬ j è¡Œ çš„å€¼éƒ½æ˜¯å‰ä¸€ä¸ªè·¯å¾„å€¼å’Œ+è‡ªèº«æ ¼å­å€¼ å³ dp[ i - 1 ] [ 0 ] + grid[ i ] [ 0 ] &#x3D; dp[ i ] [ 0 ]</p>
<table>
<thead>
<tr>
<th></th>
<th>ç¬¬ 0 åˆ—</th>
<th>ç¬¬ â€¦ åˆ—</th>
<th>ç¬¬ j-1 åˆ—</th>
<th>ç¬¬ j åˆ—</th>
<th>â€¦</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ç¬¬ 0 è¡Œ</strong></td>
<td><em>grid[ 0 ] [ 0 ] &#x3D; dp [ 0 ] [ 0 ]</em></td>
<td></td>
<td><em>grid[ 0 ] [ j-1 ] + dp [ 0 ] [ j-2 ]</em></td>
<td><em>grid[ 0 ] [ j ] + dp [ 0 ] [ j-1 ]</em></td>
<td></td>
</tr>
<tr>
<td><strong>ç¬¬ â€¦ è¡Œ</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>ç¬¬ i-1 è¡Œ</strong></td>
<td><em>grid[ i-1 ] [ 0 ] + dp [ i-2] [ 0 ]</em></td>
<td></td>
<td></td>
<td>grid[ i - 1 ] [ j ] ï¼ˆdp[ i - 1 ] [ j ]ï¼‰</td>
<td></td>
</tr>
<tr>
<td><strong>ç¬¬ i è¡Œ</strong></td>
<td><em>grid[ i ] [ 0 ] &#x3D; dp [ i-1] [ 0 ]</em></td>
<td></td>
<td>grid[ i ] [ j -1 ] ï¼ˆdp[ i ] [ j -1 ]ï¼‰</td>
<td>grid[ i ] [ j ] ï¼ˆdp[ i ] [ j ]ï¼‰</td>
<td></td>
</tr>
<tr>
<td>â€¦</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-1"><a href="#c-1" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minPathSum</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp;grid)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (grid.<span class="built_in">empty</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> m = grid.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> n = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n));</span><br><span class="line">        <span class="comment">// 1.åˆå§‹åŒ–</span></span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = grid[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// 1.1 ç¬¬0åˆ—</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[<span class="number">0</span>][j] = dp[<span class="number">0</span>][j - <span class="number">1</span>] + grid[<span class="number">0</span>][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 1.2 ç¬¬0è¡Œ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = dp[i - <span class="number">1</span>][<span class="number">0</span>] + grid[i][<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.çŠ¶æ€è½¬ç§»</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; n; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                dp[i][j] = <span class="built_in">min</span>(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]) + grid[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[m - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="go-1"><a href="#go-1" class="headerlink" title="go"></a>go</h5><p>é”™è¯¯ï¼švar dp [m][n]int<br>æ•°ç»„é•¿åº¦å¿…é¡»æ˜¯ä¸€ä¸ªå¸¸é‡ ç¼–è¯‘æ—¶å°±è¦ç¡®å®š</p>
<p>éœ€è¦ä¸€ä¸ªåŠ¨æ€å¤§å°çš„äºŒç»´ç»“æ„ï¼Œä½¿ç”¨makeåˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ä¸ªäºŒç»´åˆ‡ç‰‡</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Min</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> a &lt; b &#123;</span><br><span class="line">		<span class="keyword">return</span> a</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minPathSum</span><span class="params">(grid [][]<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(grid) == <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">	&#125;</span><br><span class="line">	m := <span class="built_in">len</span>(grid)</span><br><span class="line">	n := <span class="built_in">len</span>(grid[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">	<span class="comment">//é”™è¯¯ï¼švar dp [m][n]int</span></span><br><span class="line">	<span class="comment">//æ•°ç»„é•¿åº¦å¿…é¡»æ˜¯ä¸€ä¸ªå¸¸é‡ ç¼–è¯‘æ—¶å°±è¦ç¡®å®š</span></span><br><span class="line">	dp := <span class="built_in">make</span>([][]<span class="type">int</span>, m)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; m; i++ &#123;</span><br><span class="line">		dp[i] = <span class="built_in">make</span>([]<span class="type">int</span>, n)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//1.åˆå§‹åŒ–</span></span><br><span class="line">	dp[<span class="number">0</span>][<span class="number">0</span>] = grid[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> j := <span class="number">1</span>; j &lt; n; j++ &#123;</span><br><span class="line">		dp[<span class="number">0</span>][j] = dp[<span class="number">0</span>][j<span class="number">-1</span>] + grid[<span class="number">0</span>][j]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; m; i++ &#123;</span><br><span class="line">		dp[i][<span class="number">0</span>] = dp[i<span class="number">-1</span>][<span class="number">0</span>] + grid[i][<span class="number">0</span>]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.çŠ¶æ€è½¬ç§»</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; m; i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">1</span>; j &lt; n; j++ &#123;</span><br><span class="line">			dp[i][j] = Min(dp[i][j<span class="number">-1</span>], dp[i<span class="number">-1</span>][j]) + grid[i][j]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> dp[m<span class="number">-1</span>][n<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-18"><a href="#12-18" class="headerlink" title="12.18"></a>12.18</h2><h3 id="æ‰“å®¶åŠ«èˆ"><a href="#æ‰“å®¶åŠ«èˆ" class="headerlink" title="æ‰“å®¶åŠ«èˆ"></a>æ‰“å®¶åŠ«èˆ</h3><p><a href="https://leetcode.cn/problems/house-robber/">https://leetcode.cn/problems/house-robber/</a></p>
<p>ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œ<strong>å¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦</strong>ã€‚</p>
<p>ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  <strong>ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹</strong> ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[1,2,3,1]</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line">è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚</span><br><span class="line">     å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[2,7,9,3,1]</span><br><span class="line">è¾“å‡ºï¼š12</span><br><span class="line">è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 2), å·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 9)ï¼Œæ¥ç€å·çªƒ 5 å·æˆ¿å±‹ (é‡‘é¢ = 1)ã€‚</span><br><span class="line">     å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 2 + 9 + 1 = 12 ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 100</code></li>
<li><code>0 &lt;= nums[i] &lt;= 400</code></li>
</ul>
<h4 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>åŠ¨æ€è§„åˆ’</p>
<p>å½“å‰èƒ½å·åˆ°çš„æœ€å¤§å€¼ï¼šå·å½“å‰çš„+dp[ i - 2]  å’Œ ä¸å·å½“å‰çš„å³ dp[ i - 1]  å–ä¸¤ä¸ªä¸­çš„å¤§çš„å€¼</p>
<ul>
<li>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</li>
</ul>
<p>dp[ i ] &#x3D; max(dp[ i - 2 ] + num [ i ], dp[ i - 1])</p>
<ul>
<li>åˆå§‹åŒ–</li>
</ul>
<p>å› ä¸ºä¸èƒ½è¿ç€å· , æ‰€ä»¥ä½ç½® 0<del>ï¼Œ1</del>å°±æ˜¯å½“å‰numçš„å€¼</p>
<p>ç¬¬0ä¸ªï¼š dp[ 0 ] &#x3D; num [ 0 ]</p>
<p>ç¬¬1ä¸ªï¼š<del>dp[ 1 ] &#x3D; num[ 1 ]</del></p>
<p>ï¼ˆç¬¬1ä¸ªå¯ä»¥é€‰æ‹©ä¸å·å½“å‰ å·ä¸Šä¸€ä¸ªï¼Œæˆ–è€…æ˜¯å·å½“å‰çš„ï¼‰</p>
<p>æ‰€ä»¥åº”è¯¥æ˜¯</p>
<p>dp[ 1 ] &#x3D; max(num [ 0 ], num[ 1 ])</p>
<table>
<thead>
<tr>
<th>ç¬¬0ä¸ª</th>
<th>ç¬¬1ä¸ª</th>
<th>..</th>
<th>ç¬¬iä¸ª</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>num[ 0 ] &#x3D; dp [ 0 ]</td>
<td>dp[ 1 ] &#x3D; max(num [ 0 ], num[ 1 ])</td>
<td></td>
<td>dp[ i ] &#x3D; max(dp[ i - 2 ] + num [ i ], dp[ i - 1])</td>
<td></td>
</tr>
</tbody></table>
<p>note: è¿˜éœ€è¦å¤„ç† å¦‚æœnumé•¿åº¦åªæœ‰1çš„ç‰¹æ®Šæƒ…å†µ</p>
<h4 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-2"><a href="#c-2" class="headerlink" title="c++"></a>c++</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">class Solution</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    <span class="type">int</span> rob(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 0.ç‰¹æ®Šæƒ…å†µï¼Œå¦‚æœnumsé•¿åº¦åªæœ‰1ï¼ˆ1 &lt;= nums.length &lt;= 100ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (nums.size() == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; dp(nums.size());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.åˆå§‹åŒ–</span></span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        dp[<span class="number">1</span>] = max(nums[<span class="number">0</span>], nums[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.çŠ¶æ€è½¬ç§»æ–¹ç¨‹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; nums.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i] = max(dp[i - <span class="number">2</span>] + nums[i], dp[i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[nums.size() - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="go-2"><a href="#go-2" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rob</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="comment">//0.ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line">	n := <span class="built_in">len</span>(nums)</span><br><span class="line">	<span class="keyword">if</span> n == <span class="number">1</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	dp := <span class="built_in">make</span>([]<span class="type">int</span>, n)</span><br><span class="line">	<span class="comment">//1.åˆå§‹åŒ–</span></span><br><span class="line">	dp[<span class="number">0</span>] = nums[<span class="number">0</span>]</span><br><span class="line">	<span class="keyword">if</span> nums[<span class="number">0</span>] &gt; nums[<span class="number">1</span>] &#123;</span><br><span class="line">		dp[<span class="number">1</span>] = nums[<span class="number">0</span>]</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		dp[<span class="number">1</span>] = nums[<span class="number">1</span>]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.çŠ¶æ€è½¬ç§»æ–¹ç¨‹</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">2</span>; i &lt; n; i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> dp[i<span class="number">-1</span>] &gt; dp[i<span class="number">-2</span>]+nums[i] &#123;</span><br><span class="line">			dp[i] = dp[i<span class="number">-1</span>]</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			dp[i] = dp[i<span class="number">-2</span>] + nums[i]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> dp[n<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="12-19"><a href="#12-19" class="headerlink" title="12.19"></a>12.19</h2><h3 id="æœ€é•¿è¿ç»­åºåˆ—"><a href="#æœ€é•¿è¿ç»­åºåˆ—" class="headerlink" title="æœ€é•¿è¿ç»­åºåˆ—"></a>æœ€é•¿è¿ç»­åºåˆ—</h3><p><a href="https://leetcode.cn/problems/longest-consecutive-sequence/">https://leetcode.cn/problems/longest-consecutive-sequence/</a></p>
<p>ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œæ‰¾å‡ºæ•°å­—è¿ç»­çš„æœ€é•¿åºåˆ—ï¼ˆä¸è¦æ±‚åºåˆ—å…ƒç´ åœ¨åŸæ•°ç»„ä¸­è¿ç»­ï¼‰çš„é•¿åº¦ã€‚</p>
<p>è¯·ä½ è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code> çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [100,4,200,1,3,2]</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line">è§£é‡Šï¼šæœ€é•¿æ•°å­—è¿ç»­åºåˆ—æ˜¯ [1, 2, 3, 4]ã€‚å®ƒçš„é•¿åº¦ä¸º 4ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [0,3,7,2,5,8,4,6,0,1]</span><br><span class="line">è¾“å‡ºï¼š9</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>0 &lt;= nums.length &lt;= 105</code></li>
<li><code>-109 &lt;= nums[i] &lt;= 109</code></li>
</ul>
<h4 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>å› ä¸ºéœ€è¦æ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code> çš„ç®—æ³•</p>
<p>å› æ­¤ ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œè¿™æ ·æŸ¥æ‰¾ æ’å…¥çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)</p>
<p>ï¼ˆ1ï¼‰æŠŠæ•°å­—æ”¾å…¥unordered_setå†…</p>
<p>ï¼ˆ2ï¼‰å¾ªç¯ï¼šæ—¶é—´å¤æ‚åº¦æ˜¯O(n)</p>
<ul>
<li><p>åœ¨unordered_setä¸­å¯¹æ¯ä¸ªæ•°å­—æŸ¥æ‰¾æ‰¾åˆ°è¿ç»­åºåˆ—çš„<strong>èµ·å§‹å…ƒç´ </strong>, å³<strong>ä¸å­˜åœ¨æ¯”è‡ªèº«è¿˜å°1</strong>çš„æ•°å­—</p>
</li>
<li><p>å½“æ‰¾åˆ°åå°±ç¡®å®šäº†è¿ç»­æ•°åˆ—çš„èµ·å§‹å€¼ï¼Œéå†æ‰¾åˆ°è¿ç»­æ•°åˆ—çš„é•¿åº¦ï¼ˆæ¯æ¬¡éƒ½åŠ 1ï¼Œåˆ¤æ–­æ˜¯å¦åœ¨unordered_seté‡Œï¼‰</p>
<blockquote>
<p>å½“ç¡®å®šäº†èµ·å§‹å€¼çš„éå†ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œ å› ä¸ºæ¯ä¸ªæ•°å­—åªä¼šè¿›å…¥ä¸€æ¬¡éå†é‡Œé¢</p>
</blockquote>
</li>
</ul>
<h4 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-3"><a href="#c-3" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestConsecutive</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> maxLength = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 1.æ”¾å…¥setå†…</span></span><br><span class="line">        <span class="function">unordered_set&lt;<span class="type">int</span>&gt; <span class="title">numsSet</span><span class="params">(nums.begin(), nums.end())</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.å¯¹setä¸­æ¯ä¸ªæ•°å­—è¿›è¡ŒæŸ¥æ‰¾, æ‰¾åˆ°è¿ç»­åºåˆ—çš„èµ·å§‹å…ƒç´ </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 2.1 å½“å‰å€¼æ˜¯èµ·å§‹å…ƒç´ </span></span><br><span class="line">            <span class="keyword">if</span> (numsSet.<span class="built_in">find</span>(nums[i] - <span class="number">1</span>) == numsSet.<span class="built_in">end</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// 2.2 æ‰¾åˆ°ä»å½“å‰å€¼å¼€å§‹æœ€é•¿çš„åºåˆ—</span></span><br><span class="line">                <span class="type">int</span> currentNum = nums[i];</span><br><span class="line">                <span class="type">int</span> currentLength = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> (numsSet.<span class="built_in">find</span>(currentNum + <span class="number">1</span>) != numsSet.<span class="built_in">end</span>())</span><br><span class="line">                &#123;</span><br><span class="line">                    currentNum++;</span><br><span class="line">                    currentLength++;</span><br><span class="line">                &#125;</span><br><span class="line">                maxLength = <span class="built_in">max</span>(maxLength, currentLength);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> maxLength;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h5 id="go-3"><a href="#go-3" class="headerlink" title="go"></a>go</h5><p>æ’å…¥map, æŠŠnumsé‡Œçš„å€¼ä½œä¸ºkeyï¼Œ è¿™æ ·å¯ä»¥åˆ©ç”¨</p>
<p>**_, exists :&#x3D; numsMap[key-1]**åˆ¤æ–­æ˜¯å¦æ˜¯è¿ç»­åºåˆ—çš„èµ·å§‹å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">longestConsecutive</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> result <span class="type">int</span></span><br><span class="line">	numsMap := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>&#123;&#125;</span><br><span class="line">	<span class="comment">//1.æ’å…¥map, æŠŠnumsé‡Œçš„å€¼ä½œä¸ºkey</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">		numsMap[nums[i]] = <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//2.éå†map, æ‰¾èµ·å§‹å€¼</span></span><br><span class="line">	<span class="keyword">for</span> key := <span class="keyword">range</span> numsMap &#123;</span><br><span class="line">		<span class="comment">// 2.1å½“å‰å€¼ä¸ºèµ·å§‹å€¼ æ‰¾ä¸åˆ°æ¯”è‡ªå·±å°1çš„æ•°</span></span><br><span class="line">		<span class="keyword">if</span> _, exists := numsMap[key<span class="number">-1</span>]; !exists &#123;</span><br><span class="line">			currentNum := key</span><br><span class="line">			currentLen := <span class="number">1</span></span><br><span class="line">			<span class="comment">// 2.2 æ‰¾æœ€é•¿çš„åºåˆ—</span></span><br><span class="line">			<span class="keyword">for</span> _, exists := numsMap[currentNum+<span class="number">1</span>]; exists; _, exists = numsMap[currentNum+<span class="number">1</span>] &#123;</span><br><span class="line">				currentNum++</span><br><span class="line">				currentLen++</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> currentLen &gt; result &#123;</span><br><span class="line">				result = currentLen</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="12-20"><a href="#12-20" class="headerlink" title="12.20"></a>12.20</h2><h3 id="ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°"><a href="#ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°" class="headerlink" title="ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°"></a>ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°</h3><p><a href="https://leetcode.cn/problems/first-missing-positive/">https://leetcode.cn/problems/first-missing-positive/</a></p>
<p>ç»™ä½ ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚</p>
<p>è¯·ä½ å®ç°æ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code> å¹¶ä¸”åªä½¿ç”¨å¸¸æ•°çº§åˆ«é¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,2,0]</span><br><span class="line">è¾“å‡ºï¼š3</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3,4,-1,1]</span><br><span class="line">è¾“å‡ºï¼š2</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [7,8,9,11,12]</span><br><span class="line">è¾“å‡ºï¼š1</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 5 * 105</code></li>
<li><code>-231 &lt;= nums[i] &lt;= 231 - 1</code></li>
</ul>
<h4 id="æ€è·¯1"><a href="#æ€è·¯1" class="headerlink" title="æ€è·¯1"></a>æ€è·¯1</h4><p>æ—¶é—´å¤æ‚åº¦æ˜¯O(n) æƒ³åˆ°å“ˆå¸Œè¡¨unordered_set</p>
<blockquote>
<p>ç†æƒ³æƒ…å†µä¸‹ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ ï¼ˆä½¿ç”¨unordered_setçš„findå‡½æ•°ï¼‰çš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œä¹Ÿå°±æ˜¯å¸¸æ•°æ—¶é—´ã€‚ç„¶è€Œï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æ‰€æœ‰é”®éƒ½å“ˆå¸Œåˆ°åŒä¸€bucketæ—¶ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥é€€åŒ–åˆ°O(n)</p>
</blockquote>
<p>1.æŠŠå½“å‰numsé‡Œçš„å€¼åŠ å…¥unordered_set</p>
<p>2.ä»<strong>1</strong>å¼€å§‹éå†ï¼Œæ‰¾åˆ°unordered_seté‡Œ<strong>æ²¡æœ‰å‡ºç°çš„å€¼</strong>å°±æ˜¯æœ€å°æ­£æ•´æ•°</p>
<p><u>è™½ç„¶è¿™ä¸ªåšæ³•æ»¡è¶³æ—¶é—´å¤æ‚åº¦æ˜¯O(n) ï¼Œä½†æ˜¯ç”¨äº†é¢å¤–çš„unordered_setï¼Œ ç©ºé—´å¤æ‚åº¦æ˜¯O(n), ä¸æ»¡è¶³å¸¸æ•°çº§åˆ«çš„ç©ºé—´å¤æ‚åº¦</u></p>
<h4 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-4"><a href="#c-4" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">firstMissingPositive</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> result = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 1. æ’å…¥unordered_set</span></span><br><span class="line">        <span class="function">unordered_set&lt;<span class="type">int</span>&gt; <span class="title">uset</span><span class="params">(nums.begin(), nums.end())</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. ä»1å¼€å§‹éå†æ˜¯å¦åœ¨unordered_seté‡Œ</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 2.1 ä¸åœ¨é‡Œé¢è¯´æ˜æ˜¯æœ€å°çš„æ­£æ•´æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (!uset.<span class="built_in">count</span>(result))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                result++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="go-4"><a href="#go-4" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">firstMissingPositive</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	mp := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>&#123;&#125;</span><br><span class="line">	result := <span class="number">1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//1.æ’å…¥å“ˆå¸Œè¡¨</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">		mp[nums[i]] = <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.ä»1å¼€å§‹éå†</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">//2.1æ‰¾ä¸åˆ°å°±æ˜¯æœ€å°æ­£æ•´æ•°</span></span><br><span class="line">		<span class="keyword">if</span> _, exists := mp[result]; !exists &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			result++</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="æ€è·¯2"><a href="#æ€è·¯2" class="headerlink" title="æ€è·¯2"></a>æ€è·¯2</h4><p><u>è¦ä½¿å¾—æ—¶é—´å¤æ‚åº¦æ˜¯O(n), é‚£åªèƒ½å¯¹nä¸ªæ•°éå†ä¸€æ¬¡</u></p>
<p><u>ç©ºé—´å¤æ‚åº¦æ˜¯å¸¸æ•°çº§åˆ«ï¼Œé‚£å°±ä¸èƒ½æ„é€ æ–°çš„ç»“æ„ï¼ˆå“ˆå¸Œè¡¨ï¼‰ï¼Œè¦åœ¨åŸå§‹çš„æ•°ç»„ä¸Šæ“ä½œ</u></p>
<ul>
<li><p>å¯¹äºé•¿åº¦ä¸ºnçš„æ•°ç»„ï¼Œå¦‚æœå€¼æ˜¯ä»1åˆ°nï¼Œ æœ€å°çš„æ­£æ•´æ•°ä¹Ÿæ˜¯n+1, å¦åˆ™ æœ€å°æ­£æ•´æ•°æ˜¯åœ¨1~nä¹‹é—´</p>
</li>
<li><p>å› æ­¤åªéœ€è¦å…³æ³¨1~nä¹‹é—´æ˜¯å¦æœ‰ä¸åœ¨æ•°ç»„é‡Œçš„å€¼å³å¯ï¼ˆå¦‚æœéƒ½åœ¨æ•°ç»„é‡Œï¼Œåˆ™ç­”æ¡ˆå°±æ˜¯n+1ï¼‰</p>
</li>
</ul>
<p>ç»¼ä¸Šï¼Œ é¢˜ç›®æ˜¯ä¸¤ç§æƒ…å†µï¼š</p>
<p>æ­£é¢ï¼š ç­”æ¡ˆåœ¨1~nä¹‹é—´</p>
<p>åé¢ï¼šç­”æ¡ˆæ˜¯n+1</p>
<p>å½“åœ¨æ­£é¢æƒ…å†µä¸‹æ‰¾ä¸åˆ°çš„æ—¶å€™ ç­”æ¡ˆè‚¯å®šæ˜¯n+1</p>
<p>æ‰€ä»¥æ­¤é¢˜ç®€åŒ–ä¸º<strong>æ‰¾1~næ˜¯å¦éƒ½åœ¨æ•°ç»„é‡Œ</strong></p>
<p>å› ä¸ºè¦çœç©ºé—´ï¼Œæ‰€ä»¥è¦åˆ©ç”¨åŸæ•°ç»„</p>
<ol>
<li><p>å¯¹äºè´Ÿæ•°å’Œå¤§äºæ•°ç»„é•¿åº¦çš„å€¼ç»Ÿä¸€èµ‹å€¼ä¸ºn+1ï¼Œ è®©æ•°ç»„çš„å€¼éƒ½ä¸ºæ­£æ•´æ•°</p>
</li>
<li><p>åˆ©ç”¨æ•°ç»„ç´¢å¼•å’Œnumsçš„å€¼å¯¹åº”ï¼ˆç´¢å¼• +1 &#x3D; i )ï¼Œ å¦‚æœ i åœ¨æ•°ç»„é‡Œï¼Œåˆ™å°†nums[ i -1] çš„ä½ç½®çš„å€¼ å†™ä¸ºè´Ÿæ•° ï¼ˆå½“å‰å€¼çš„è´Ÿæ•°ï¼‰</p>
</li>
<li><p>æœ€ç»ˆéå†å®Œæ•°ç»„ï¼Œæ­£æ•´æ•°çš„å€¼æ‰€åœ¨çš„ç´¢å¼•+1 å°±æ˜¯1 ~ nä¸­æ²¡æœ‰å‡ºç°çš„æ­£æ•´æ•°</p>
<p>å¦‚æœéƒ½ä¸ºè´Ÿæ•°ï¼Œé‚£ç­”æ¡ˆå°±æ˜¯n+1</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3,4,-1,1]</span><br><span class="line">è¾“å‡ºï¼š2</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th></th>
<th>ç¬¬0ä¸ª</th>
<th>ç¬¬1ä¸ª</th>
<th>ç¬¬2ä¸ª</th>
<th>ç¬¬3ä¸ª</th>
</tr>
</thead>
<tbody><tr>
<td>åŸå§‹æ•°ç»„</td>
<td>3</td>
<td>4</td>
<td>-1</td>
<td>1</td>
</tr>
<tr>
<td>è´Ÿæ•°è½¬æ¢ä¸ºn+1</td>
<td>3</td>
<td>4</td>
<td><strong>5</strong></td>
<td>1</td>
</tr>
<tr>
<td>å¼€å§‹éå†</td>
<td><u>3</u></td>
<td>4</td>
<td><strong>-5</strong> ï¼ˆ3 å¯¹åº”ç´¢å¼• 3 -1 &#x3D;2ï¼‰</td>
<td>1</td>
</tr>
<tr>
<td></td>
<td><u>3</u></td>
<td><u>4</u></td>
<td>-5</td>
<td><strong>-1</strong> ï¼ˆ4 å¯¹åº”ç´¢å¼• 4 -1 &#x3D;3ï¼‰</td>
</tr>
<tr>
<td></td>
<td><u>3</u></td>
<td><u>4</u></td>
<td><u>-5</u> ï¼ˆ5å¯¹åº”ç´¢å¼• 5 - 1&gt; nä¸å¤„ç†ï¼‰</td>
<td>-1</td>
</tr>
<tr>
<td></td>
<td><strong><u>-3</u></strong></td>
<td><u>4</u></td>
<td><u>-5</u></td>
<td><u>-1</u> ï¼ˆ1å¯¹åº”ç´¢å¼• 1 - 1 &#x3D; 0ï¼‰</td>
</tr>
</tbody></table>
<p>æœ€åçš„æ­£æ•´æ•°æ˜¯4ï¼Œç´¢å¼•æ˜¯1ï¼Œç­”æ¡ˆæ˜¯ç´¢å¼•1+1 &#x3D; 2</p>
<h4 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-5"><a href="#c-5" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">firstMissingPositive</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> result = n + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.è½¬æ¢è´Ÿæ•°å’Œå¤§äºnçš„å€¼ä¸ºn+1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &lt;= <span class="number">0</span> || nums[i] &gt; n)</span><br><span class="line">            &#123;</span><br><span class="line">                nums[i] = n + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.æ‰¾1~nçš„å€¼æ˜¯å¦åœ¨numsé‡Œï¼ˆåˆ©ç”¨ç´¢å¼•ï¼‰</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> c = <span class="built_in">abs</span>(nums[i]);</span><br><span class="line">            <span class="keyword">if</span> (c &gt; n)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            nums[c - <span class="number">1</span>] = -<span class="built_in">abs</span>(nums[c - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. æ‰¾æ˜¯å¦æ˜¯æœ‰æ­£æ•´æ•°å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                result = i + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="go-5"><a href="#go-5" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">firstMissingPositive</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	n := <span class="built_in">len</span>(nums)</span><br><span class="line">	result := n + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//1.å¤„ç†è´Ÿæ•°å’Œå¤§äºnçš„æ•°ä¸ºn+1</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> nums[i] &lt;= <span class="number">0</span> || nums[i] &gt; n &#123;</span><br><span class="line">			nums[i] = n + <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//2.æ‰¾1~næ˜¯å¦åœ¨æ•°ç»„é‡Œ åˆ©ç”¨ç´¢å¼•</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">		<span class="keyword">var</span> c <span class="type">int</span></span><br><span class="line">		<span class="comment">//2.1 å–ç»å¯¹å€¼</span></span><br><span class="line">		<span class="keyword">if</span> nums[i] &gt; <span class="number">0</span> &#123;</span><br><span class="line">			c = nums[i]</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			c = -nums[i]</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//2.2 æ‰¾1~n åˆ©ç”¨ç´¢å¼•èµ‹å€¼ä¸ºè´Ÿæ•°</span></span><br><span class="line">		<span class="keyword">if</span> c &gt; n &#123;</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> nums[c<span class="number">-1</span>] &gt; <span class="number">0</span> &#123;</span><br><span class="line">			nums[c<span class="number">-1</span>] = -nums[c<span class="number">-1</span>]</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			nums[c<span class="number">-1</span>] = nums[c<span class="number">-1</span>]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.æ‰¾æ˜¯å¦æœ‰æ­£æ•´æ•°</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> nums[i] &gt; <span class="number">0</span> &#123;</span><br><span class="line">			result = i + <span class="number">1</span></span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="12-21"><a href="#12-21" class="headerlink" title="12.21"></a>12.21</h2><h3 id="å•è¯æœç´¢"><a href="#å•è¯æœç´¢" class="headerlink" title="å•è¯æœç´¢"></a>å•è¯æœç´¢</h3><p><a href="https://leetcode.cn/problems/word-search/">https://leetcode.cn/problems/word-search/</a></p>
<p>ç»™å®šä¸€ä¸ª <code>m x n</code> äºŒç»´å­—ç¬¦ç½‘æ ¼ <code>board</code> å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ <code>word</code> ã€‚å¦‚æœ <code>word</code> å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› <code>true</code> ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code> ã€‚</p>
<p>å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/11/04/word2.jpg" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šboard = [[&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;E&quot;],[&quot;S&quot;,&quot;F&quot;,&quot;C&quot;,&quot;S&quot;],[&quot;A&quot;,&quot;D&quot;,&quot;E&quot;,&quot;E&quot;]], word = &quot;ABCCED&quot;</span><br><span class="line">è¾“å‡ºï¼štrue</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/11/04/word-1.jpg" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šboard = [[&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;E&quot;],[&quot;S&quot;,&quot;F&quot;,&quot;C&quot;,&quot;S&quot;],[&quot;A&quot;,&quot;D&quot;,&quot;E&quot;,&quot;E&quot;]], word = &quot;SEE&quot;</span><br><span class="line">è¾“å‡ºï¼štrue</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/10/15/word3.jpg" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šboard = [[&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;E&quot;],[&quot;S&quot;,&quot;F&quot;,&quot;C&quot;,&quot;S&quot;],[&quot;A&quot;,&quot;D&quot;,&quot;E&quot;,&quot;E&quot;]], word = &quot;ABCB&quot;</span><br><span class="line">è¾“å‡ºï¼šfalse</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>m == board.length</code></li>
<li><code>n = board[i].length</code></li>
<li><code>1 &lt;= m, n &lt;= 6</code></li>
<li><code>1 &lt;= word.length &lt;= 15</code></li>
<li><code>board</code> å’Œ <code>word</code> ä»…ç”±å¤§å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li>
</ul>
<p><strong>è¿›é˜¶ï¼š</strong>ä½ å¯ä»¥ä½¿ç”¨æœç´¢å‰ªæçš„æŠ€æœ¯æ¥ä¼˜åŒ–è§£å†³æ–¹æ¡ˆï¼Œä½¿å…¶åœ¨ <code>board</code> æ›´å¤§çš„æƒ…å†µä¸‹å¯ä»¥æ›´å¿«è§£å†³é—®é¢˜ï¼Ÿ</p>
<h4 id="æ€è·¯-4"><a href="#æ€è·¯-4" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>æ‰¾æ˜¯å¦å­˜åœ¨ä¸€ä¸ªè·¯å¾„ å¯ä»¥ç”¨æ·±åº¦ä¼˜å…ˆéå†</p>
<ul>
<li><p>å¯¹åŸå§‹boardé‡Œçš„æ¯ä¸€ä¸ªå€¼éƒ½å»æ·±åº¦ä¼˜å…ˆéå†ï¼Œçœ‹èƒ½å¦æ‰¾åˆ°ä¸€æ¡è·¯å¾„æ»¡è¶³çš„ï¼Œ å¦‚æœæ‰¾åˆ°äº†å°±è¿”å›trueï¼Œ å¦‚æœæ‰€æœ‰å€¼éƒ½æ‰¾ä¸åˆ°å°±è¿”å›false</p>
</li>
<li><p>æ·±åº¦ä¼˜å…ˆéå†æ˜¯ä¸€ä¸ªé€’å½’</p>
<ol>
<li><p>é€’å½’ç»“æŸ</p>
<p>(1)è¶Šç•Œ æˆ–è€… å½“å‰å€¼ä¸åœ¨è¦æ‰¾çš„stringé‡Œ</p>
<p>(2)æ‰¾åˆ°äº†æœ«å°¾ å¹¶ä¸”å½“å‰å€¼åœ¨è¦æ‰¾çš„stringé‡Œ</p>
</li>
<li><p>é€’å½’</p>
<p>ä¿å­˜å½“å‰å€¼ï¼Œå¹¶æ ‡è®°ä¸ºå·²è®¿é—®(ç”¨\0æ ‡è®°)</p>
<p>å› ä¸ºè¦æ‰¾çš„stringé‡Œçš„å€¼è‚¯å®šä¸æ˜¯\0, å¦‚æœæ˜¯è®¿é—®è¿‡çš„èŠ‚ç‚¹å°±è‚¯å®šæ»¡è¶³word[wordStart] !&#x3D; board[ i ] [ j ] è¿™æ ·å°±èƒ½æ ‡è®°äº†</p>
</li>
<li><p>é€’å½’å›æº¯</p>
<p>æŠŠä¹‹å‰ä¿å­˜çš„å€¼ç½®å›å»ï¼Œè¿™æ ·åé¢èƒ½ç»§ç»­ç”¨æ¥æ‰¾è·¯å¾„</p>
</li>
</ol>
</li>
</ul>
<h4 id="ä»£ç -6"><a href="#ä»£ç -6" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-6"><a href="#c-6" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">exist</span><span class="params">(vector&lt;vector&lt;<span class="type">char</span>&gt;&gt; &amp;board, string word)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = board.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> n = board[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// ä»å½“å‰å€¼å‡ºå‘èƒ½å¦æ‰¾åˆ°ä¸€ä¸ªè·¯å¾„</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">dfs</span>(i, j, board, word, <span class="number">0</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€’å½’æŸ¥æ‰¾</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j, vector&lt;vector&lt;<span class="type">char</span>&gt;&gt; &amp;board, string word, <span class="type">int</span> wordStart)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 1.é€’å½’ç»“æŸæ¡ä»¶</span></span><br><span class="line">        <span class="comment">// 1.1 ä¸åˆæ³•æƒ…å†µ i,j æ‰¾çš„ä½ç½®è¶Šç•Œäº† å€¼ä¸ç›¸ç­‰</span></span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt; board.<span class="built_in">size</span>() - <span class="number">1</span> || j &lt; <span class="number">0</span> || j &gt; board[<span class="number">0</span>].<span class="built_in">size</span>() - <span class="number">1</span> || word[wordStart] != board[i][j])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 1.2 æ‰¾åˆ°äº†wordçš„ç»“å°¾ è¯´æ˜æ˜¯ä¸€æ¡é€šçš„è·¯çº¿ (æ­¤æ—¶åˆæ³•å¹¶ä¸”å€¼ç›¸ç­‰)</span></span><br><span class="line">        <span class="keyword">if</span> (wordStart == word.<span class="built_in">size</span>() - <span class="number">1</span> &amp;&amp; word[wordStart] == board[i][j])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å½“åˆ°ä¸‹é¢çš„æ—¶å€™è¯´æ˜word[wordStart] == board[i][j]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.é€’å½’æ¡ä»¶</span></span><br><span class="line">        <span class="comment">// 2.1å­˜å‚¨å½“å‰çš„å€¼</span></span><br><span class="line">        <span class="type">char</span> c = board[i][j];</span><br><span class="line">        <span class="comment">// 2.2æ ‡è®°è®¿é—®è¿‡è¯¥èŠ‚ç‚¹ï¼ˆå› ä¸ºwordé‡Œçš„å€¼è‚¯å®šä¸æ˜¯\0, ç”¨\0æ ‡è®° å¦‚æœæ˜¯è®¿é—®è¿‡çš„èŠ‚ç‚¹å°±è‚¯å®šæ»¡è¶³word[wordStart] != board[i][j])</span></span><br><span class="line">        board[i][j] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        <span class="comment">// 2.3æ·±åº¦ä¼˜å…ˆéå† ä¸Šä¸‹å·¦å³æ‰¾</span></span><br><span class="line">        <span class="type">bool</span> found = <span class="built_in">dfs</span>(i - <span class="number">1</span>, j, board, word, wordStart + <span class="number">1</span>) || <span class="built_in">dfs</span>(i + <span class="number">1</span>, j, board, word, wordStart + <span class="number">1</span>) || <span class="built_in">dfs</span>(i, j - <span class="number">1</span>, board, word, wordStart + <span class="number">1</span>) || <span class="built_in">dfs</span>(i, j + <span class="number">1</span>, board, word, wordStart + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 2.4å›æº¯  ç½®å›boardåŸæ¥çš„å€¼</span></span><br><span class="line">        board[i][j] = c;</span><br><span class="line">        <span class="keyword">return</span> found;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="go-6"><a href="#go-6" class="headerlink" title="go"></a>go</h5><p>goä»£ç é‡Œbyteçš„ç©ºå€¼æ˜¯0</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">bfs</span><span class="params">(i, j <span class="type">int</span>, board [][]<span class="type">byte</span>, word <span class="type">string</span>, wordStart <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="comment">//1.é€’å½’ç»“æŸ</span></span><br><span class="line">	<span class="keyword">if</span> i &lt; <span class="number">0</span> || i &gt; <span class="built_in">len</span>(board)<span class="number">-1</span> || j &lt; <span class="number">0</span> || j &gt; <span class="built_in">len</span>(board[<span class="number">0</span>])<span class="number">-1</span> || board[i][j] != word[wordStart] &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> wordStart == <span class="built_in">len</span>(word)<span class="number">-1</span> &amp;&amp; board[i][j] == word[wordStart] &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.é€’å½’</span></span><br><span class="line">	c := board[i][j]</span><br><span class="line">	board[i][j] = <span class="number">0</span></span><br><span class="line">	found := bfs(i<span class="number">-1</span>, j, board, word, wordStart+<span class="number">1</span>) || bfs(i+<span class="number">1</span>, j, board, word, wordStart+<span class="number">1</span>) || bfs(i, j<span class="number">-1</span>, board, word, wordStart+<span class="number">1</span>) || bfs(i, j+<span class="number">1</span>, board, word, wordStart+<span class="number">1</span>)</span><br><span class="line">	board[i][j] = c</span><br><span class="line">	<span class="keyword">return</span> found</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exist</span><span class="params">(board [][]<span class="type">byte</span>, word <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(board); i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="built_in">len</span>(board[<span class="number">0</span>]); j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> bfs(i, j, board, word, <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="12-22"><a href="#12-22" class="headerlink" title="12.22"></a>12.22</h2><h3 id="å…¨æ’åˆ—"><a href="#å…¨æ’åˆ—" class="headerlink" title="å…¨æ’åˆ—"></a>å…¨æ’åˆ—</h3><p><a href="https://leetcode.cn/problems/permutations/">https://leetcode.cn/problems/permutations/</a></p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,2,3]</span><br><span class="line">è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [0,1]</span><br><span class="line">è¾“å‡ºï¼š[[0,1],[1,0]]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1]</span><br><span class="line">è¾“å‡ºï¼š[[1]]</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 6</code></li>
<li><code>-10 &lt;= nums[i] &lt;= 10</code></li>
<li><code>nums</code> ä¸­çš„æ‰€æœ‰æ•´æ•° <strong>äº’ä¸ç›¸åŒ</strong></li>
</ul>
<h4 id="æ€è·¯-5"><a href="#æ€è·¯-5" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>éœ€è¦æ‰¾åˆ°æ‰€æœ‰çš„ç»„åˆ æ˜¯ä¸ªé€’å½’ æ·±åº¦ä¼˜å…ˆéå†</p>
<p>è¿™ä¸ªè·Ÿ12.21æ—¥çš„æŸ¥æ‰¾è·¯å¾„ä¸ä¸€æ ·</p>
<p>æŸ¥æ‰¾è·¯å¾„å› ä¸ºéå†æ‰€æœ‰å¯èƒ½çš„èµ·å§‹ä½ç½®çš„è·¯å¾„ï¼Œæ‰€ä»¥forå¾ªç¯ï¼Œ <u>ä»æ‰€æœ‰çš„èµ·å§‹ä½ç½®å¼€å§‹æ·±åº¦ä¼˜å…ˆéå†</u></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">dfs</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="type">bool</span> found =...</span><br><span class="line">    <span class="keyword">return</span> found;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¨æ’åˆ—è¿™é‡Œæ˜¯è¦åˆ—å‡ºæ‰€æœ‰å¯èƒ½ï¼Œéå†æ•°ç»„é‡Œçš„æ¯ä¸ªå…ƒç´  åªè¦ä¸åœ¨ç»“æœé‡Œå°±ç»§ç»­åŠ </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">dfs</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">dfs</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€’å½’ä¸¤æ­¥</p>
<ul>
<li><p>é€’å½’ç»“æŸæ¡ä»¶</p>
<p>ï¼ˆ1ï¼‰è¶Šç•Œ</p>
<p>è¿™é‡Œä¸å­˜åœ¨è¶Šç•Œ</p>
<p>ï¼ˆ2ï¼‰æ‰¾åˆ°ç»“æœ </p>
<p>å°±æ˜¯å½“å‰çš„pathç­‰äºnumsæ•°ç»„çš„é•¿åº¦</p>
</li>
<li><p>é€’å½’</p>
<p>ï¼ˆ1ï¼‰æ¯ä¸€ä¸ªå…ƒç´ éƒ½å»éå†åŠ å…¥åˆ°å½“å‰pathä¸­ï¼ˆè¿™é‡Œéœ€è¦åˆ¤æ–­ä¸é‡å¤ï¼‰</p>
<p>ï¼ˆ2ï¼‰ç»§ç»­åŠ ä¸‹ä¸€ä¸ªå…ƒç´ è¿›å»ï¼ˆé€’å½’ï¼‰</p>
<p>ï¼ˆ3ï¼‰å›æº¯  æŠŠä¹‹å‰åŠ çš„å…ƒç´ ä»pathä¸­åˆ æ‰</p>
</li>
</ul>
<h4 id="ä»£ç -7"><a href="#ä»£ç -7" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-7"><a href="#c-7" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">permute</span>(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span><br><span class="line">    &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; result;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; dfsRes;</span><br><span class="line">        <span class="built_in">dfs</span>(nums, dfsRes, result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums, vector&lt;<span class="type">int</span>&gt; &amp;dfsRes, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp;result)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 1.ç»“æŸ</span></span><br><span class="line">        <span class="comment">// æ‰¾åˆ°æœ€å</span></span><br><span class="line">        <span class="keyword">if</span> (dfsRes.<span class="built_in">size</span>() == nums.<span class="built_in">size</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            result.<span class="built_in">push_back</span>(dfsRes);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.éå†æ¯ä¸ªå…ƒç´  åªè¦ä¸åœ¨ç»“æœé‡Œå°±ç»§ç»­åŠ </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// æ‰¾ä¸åˆ° å³æœªåŠ å…¥</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">find</span>(dfsRes.<span class="built_in">begin</span>(), dfsRes.<span class="built_in">end</span>(), nums[i]) == dfsRes.<span class="built_in">end</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// 2.1åŠ å…¥å½“å‰æ•°å­—</span></span><br><span class="line">                dfsRes.<span class="built_in">push_back</span>(nums[i]);</span><br><span class="line">                <span class="comment">// 2.2é€’å½’ æŠŠå‰©ä¸‹èƒ½åŠ çš„æ•°éƒ½åŠ å…¥</span></span><br><span class="line">                <span class="built_in">dfs</span>(nums, dfsRes, result);</span><br><span class="line">                <span class="comment">// 2.3å›æº¯ æ–¹ä¾¿ç»§ç»­ä¸‹ä¸€ä¸ªç»„åˆ</span></span><br><span class="line">                dfsRes.<span class="built_in">pop_back</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="go-7"><a href="#go-7" class="headerlink" title="go"></a>go</h5><p>ç»“æŸé€’å½’çš„æ—¶å€™éœ€è¦æŠŠpath<strong>ï¼ˆç±»å‹sliceï¼‰æ‹·è´ä¸€ä»½å‰¯æœ¬å‡ºæ¥</strong></p>
<p>å› ä¸ºgoä»£ç é‡Œé¢sliceä¼ é€’çš„æ—¶å€™æ˜¯å¼•ç”¨ä¼ é€’ï¼Œåç»­çš„å€¼æ”¹å˜ä¼šå½±å“åŸæ¥çš„å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">permute</span><span class="params">(nums []<span class="type">int</span>)</span></span> [][]<span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> result [][]<span class="type">int</span></span><br><span class="line">	<span class="keyword">var</span> dfsRes []<span class="type">int</span></span><br><span class="line">	<span class="comment">//é€šè¿‡ &amp; ç¬¦å·è·å– result çš„åœ°å€</span></span><br><span class="line">	dfs(nums, &amp;result, dfsRes)</span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dfs</span><span class="params">(nums []<span class="type">int</span>, result *[][]<span class="type">int</span>, dfsRes []<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">//1.ç»“æŸé€’å½’</span></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(dfsRes) == <span class="built_in">len</span>(nums) &#123;</span><br><span class="line">		<span class="comment">// æ‹·è´dfsReså‰¯æœ¬ ä¸ç„¶ä¼šæ”¹å˜å€¼</span></span><br><span class="line">		temp := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="built_in">len</span>(dfsRes))</span><br><span class="line">		<span class="built_in">copy</span>(temp, dfsRes)</span><br><span class="line">		*result = <span class="built_in">append</span>(*result, temp)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.é€’å½’</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> !isFound(dfsRes, nums[i]) &#123;</span><br><span class="line">			dfsRes = <span class="built_in">append</span>(dfsRes, nums[i])</span><br><span class="line">			dfs(nums, result, dfsRes)</span><br><span class="line">			dfsRes = dfsRes[:<span class="built_in">len</span>(dfsRes)<span class="number">-1</span>]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isFound</span><span class="params">(dfsRes []<span class="type">int</span>, num <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(dfsRes); i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> dfsRes[i] == num &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="12-25"><a href="#12-25" class="headerlink" title="12.25"></a>12.25</h2><h3 id="æ¯æ—¥æ¸©åº¦"><a href="#æ¯æ—¥æ¸©åº¦" class="headerlink" title="æ¯æ—¥æ¸©åº¦"></a>æ¯æ—¥æ¸©åº¦</h3><p><a href="https://leetcode.cn/problems/daily-temperatures/description/">https://leetcode.cn/problems/daily-temperatures/description/</a></p>
<p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>temperatures</code> ï¼Œè¡¨ç¤ºæ¯å¤©çš„æ¸©åº¦ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ <code>answer</code> ï¼Œå…¶ä¸­ <code>answer[i]</code> æ˜¯æŒ‡å¯¹äºç¬¬ <code>i</code> å¤©ï¼Œä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦å‡ºç°åœ¨å‡ å¤©åã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ <code>0</code> æ¥ä»£æ›¿ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: temperatures = [73,74,75,71,69,72,76,73]</span><br><span class="line">è¾“å‡º: [1,1,4,2,1,1,0,0]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: temperatures = [30,40,50,60]</span><br><span class="line">è¾“å‡º: [1,1,1,0]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: temperatures = [30,60,90]</span><br><span class="line">è¾“å‡º: [1,1,0]</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= temperatures.length &lt;= 10çš„5æ¬¡æ–¹</code></li>
<li><code>30 &lt;= temperatures[i] &lt;= 100</code></li>
</ul>
<h4 id="æ€è·¯-6"><a href="#æ€è·¯-6" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>çœ‹åˆ°è¿™é¢˜å¾ˆå®¹æ˜“æƒ³åˆ°æ˜¯ç”¨ä¸¤å±‚åµŒå¥—å¾ªç¯ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½éå†å…¶åé¢çš„å…ƒç´ æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„æ•°å­—ï¼Œè¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ä¼šæ˜¯nçš„å¹³æ–¹ï¼Œç”±äºé¢˜ç›®ä¸­æ•°ç»„é•¿åº¦ä¸ºtemperatures.length &lt;&#x3D; 10çš„5æ¬¡æ–¹ï¼Œè¿™æ ·ä¼šè¶…æ—¶ã€‚</p>
<p>è€ƒè™‘ä½¿ç”¨å•è°ƒæ ˆçš„æƒ…å†µï¼š</p>
<ol>
<li>éœ€è¦æ‰¾åˆ°æ•°ç»„ä¸­æŸä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªï¼ˆæˆ–å‰ä¸€ä¸ªï¼‰æ›´å¤§ï¼ˆæˆ–æ›´å°ï¼‰çš„å…ƒç´ ã€‚</li>
<li>å½“éœ€è¦åœ¨O(1)çš„æ—¶é—´å¤æ‚åº¦å†…ï¼Œè·å–å½“å‰å…ƒç´ ä¹‹å‰ï¼ˆæˆ–ä¹‹åï¼‰çš„æœ€è¿‘çš„æ¯”å®ƒå¤§ï¼ˆæˆ–å°ï¼‰çš„å…ƒç´ ã€‚</li>
<li>å½“ä½ éœ€è¦ç»´æŠ¤ä¸€ä¸ªåŠ¨æ€çš„ã€å§‹ç»ˆä¿æŒå•è°ƒæ€§ï¼ˆå•è°ƒé€’å¢æˆ–å•è°ƒé€’å‡ï¼‰çš„æ•°æ®ç»“æ„ï¼Œä¸”éœ€è¦å¿«é€Ÿåœ°æ·»åŠ æ–°å…ƒç´ å’Œåˆ é™¤å·²å­˜åœ¨çš„å…ƒç´ ã€‚</li>
<li>å½“ä½ éœ€è¦æ‰¾åˆ°æŸä¸ªå…ƒç´ åœ¨å…¶å‰ç¼€æˆ–åç¼€ä¸­çš„ä½ç½®ï¼ˆå³åœ¨å…¶å·¦è¾¹æˆ–å³è¾¹ï¼‰çš„æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å…ƒç´ æ—¶ã€‚</li>
</ol>
<p>ä¸€èˆ¬æ¥è¯´ æ¶‰åŠå‰å æœ€å¤§æœ€å°çš„é—®é¢˜ å¯ä»¥è€ƒè™‘ä½¿ç”¨å•è°ƒæ ˆ</p>
<p>è¿™é¢˜ä½¿ç”¨å•è°ƒæ ˆ</p>
<ul>
<li><p>æŠŠæ•°ç»„ç´¢å¼•å…¥æ ˆ</p>
<p>ä½¿ç”¨ç´¢å¼•æ˜¯å› ä¸º è¿™é‡Œéœ€è¦è·å–çš„æ˜¯æ¯”è‡ªå·±å¤§çš„æ•°ä¸è‡ªå·±çš„è·ç¦»</p>
<p>ä¿å­˜ç´¢å¼•å¯ä»¥ç›´æ¥è·å–å€¼ åŒæ—¶æ–¹ä¾¿è®¡ç®—è·ç¦»</p>
</li>
<li><p>å¦‚æœå½“å‰å€¼æ¯”æ ˆé¡¶å€¼å¤§ï¼Œå°±ä¸€ç›´å‡ºæ ˆï¼Œå¹¶è®¡ç®—è·ç¦»ï¼Œè¿™æ—¶å€™å‡ºæ ˆçš„ å°±æ˜¯æ‰¾åˆ°æœ€è¿‘æ¯”è‡ªå·±å¤§çš„æ•°å­—</p>
</li>
<li><p>å¦‚æœå‡ºæ ˆåˆ°æœ€åæ ˆå†…è¿˜æœ‰æ•°å­— å°±æ˜¯æ²¡æ‰¾åˆ°æ¯”è‡ªå·±å¤§çš„</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: temperatures = [73,74,75,71,69,72,76,73]</span><br><span class="line">è¾“å‡º: [1,1,4,2,1,1,0,0]</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>ç¬¬ä¸€ä¸ª</th>
<th>ç¬¬äºŒä¸ª</th>
<th>ç¬¬ä¸‰ä¸ª</th>
<th>ç¬¬å››ä¸ª</th>
<th>ç¬¬äº”ä¸ª</th>
<th>ç¬¬å…­ä¸ª</th>
<th>ç¬¬ä¸ƒä¸ª</th>
<th>ç¬¬å…«ä¸ª</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>73ï¼ˆ73å…¥æ ˆï¼‰</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>76ï¼ˆ76å…¥æ ˆï¼‰</td>
<td>76</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>72ï¼ˆ72å…¥æ ˆï¼‰</td>
<td><del>72</del></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td>69ï¼ˆ69å…¥æ ˆï¼‰</td>
<td><del>69</del></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>71ï¼ˆ71å…¥æ ˆï¼‰</td>
<td>71</td>
<td><del>71</del></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>75 ï¼ˆ75å…¥æ ˆï¼‰</td>
<td>75</td>
<td>75</td>
<td>75</td>
<td><del>75</del></td>
<td></td>
</tr>
<tr>
<td></td>
<td>74 ï¼ˆ74å…¥æ ˆï¼‰</td>
<td><del>74</del> ï¼ˆ75 &gt; 74ï¼‰</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>73ï¼ˆ73å…¥æ ˆï¼‰</td>
<td><del>73</del>ï¼ˆ74 &gt; 73 ï¼‰</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>index&#x3D;0</th>
<th>index&#x3D;1</th>
<th>index&#x3D;2</th>
<th>index&#x3D;3</th>
<th>index&#x3D;4</th>
<th>index&#x3D;5</th>
<th>index&#x3D;6</th>
<th>index&#x3D;7</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>4</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
</tbody></table>
<p>æ‰¾åˆ°å½“å‰å€¼å‡ºæ ˆæ—¶å€™çš„æ¯”å¤§å°çš„æ•°å­— å‡å»å½“å‰æ•°å­— çš„ç´¢å¼•</p>
<p>æœ€åçš„76 73å‰©ä½™åœ¨æ ˆé‡Œ å¯¹åº”çš„å€¼å°±æ˜¯0ï¼ˆæ²¡æ‰¾åˆ°æ¯”è‡ªå·±å¤§çš„æ•°å­—ï¼‰</p>
<h4 id="ä»£ç -8"><a href="#ä»£ç -8" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-8"><a href="#c-8" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dailyTemperatures</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;temperatures)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">result</span><span class="params">(temperatures.size())</span></span>;</span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; st;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; temperatures.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (!st.<span class="built_in">empty</span>() &amp;&amp; temperatures[i] &gt; temperatures[st.<span class="built_in">top</span>()])</span><br><span class="line">            &#123;</span><br><span class="line">                result[st.<span class="built_in">top</span>()] = i - st.<span class="built_in">top</span>();</span><br><span class="line">                st.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            st.<span class="built_in">push</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!st.<span class="built_in">empty</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            result[st.<span class="built_in">top</span>()] = <span class="number">0</span>;</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="go-8"><a href="#go-8" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Stack <span class="keyword">struct</span> &#123;</span><br><span class="line">	data []<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span></span> IsEmpty() <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(s.data) == <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span></span> Pop() &#123;</span><br><span class="line">	s.data = s.data[:<span class="built_in">len</span>(s.data)<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span></span> Top() <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> s.data[<span class="built_in">len</span>(s.data)<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span></span> Push(c <span class="type">int</span>) &#123;</span><br><span class="line">	s.data = <span class="built_in">append</span>(s.data, c)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dailyTemperatures</span><span class="params">(temperatures []<span class="type">int</span>)</span></span> []<span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> st Stack</span><br><span class="line">	result := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="built_in">len</span>(temperatures))</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(temperatures); i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> !st.IsEmpty() &amp;&amp; temperatures[i] &gt; temperatures[st.Top()] &#123;</span><br><span class="line">			result[st.Top()] = i - st.Top()</span><br><span class="line">			st.Pop()</span><br><span class="line">		&#125;</span><br><span class="line">		st.Push(i)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> !st.IsEmpty() &#123;</span><br><span class="line">		result[st.Top()] = <span class="number">0</span></span><br><span class="line">		st.Pop()</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="12-26"><a href="#12-26" class="headerlink" title="12.26"></a>12.26</h2><h3 id="åˆå¹¶åŒºé—´"><a href="#åˆå¹¶åŒºé—´" class="headerlink" title="åˆå¹¶åŒºé—´"></a>åˆå¹¶åŒºé—´</h3><p><a href="https://leetcode.cn/problems/merge-intervals/description/">https://leetcode.cn/problems/merge-intervals/description/</a></p>
<p>ä»¥æ•°ç»„ <code>intervals</code> è¡¨ç¤ºè‹¥å¹²ä¸ªåŒºé—´çš„é›†åˆï¼Œå…¶ä¸­å•ä¸ªåŒºé—´ä¸º <code>intervals[i] = [starti, endi]</code> ã€‚è¯·ä½ åˆå¹¶æ‰€æœ‰é‡å çš„åŒºé—´ï¼Œå¹¶è¿”å› <em>ä¸€ä¸ªä¸é‡å çš„åŒºé—´æ•°ç»„ï¼Œè¯¥æ•°ç»„éœ€æ°å¥½è¦†ç›–è¾“å…¥ä¸­çš„æ‰€æœ‰åŒºé—´</em> ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šintervals = [[1,3],[2,6],[8,10],[15,18]]</span><br><span class="line">è¾“å‡ºï¼š[[1,6],[8,10],[15,18]]</span><br><span class="line">è§£é‡Šï¼šåŒºé—´ [1,3] å’Œ [2,6] é‡å , å°†å®ƒä»¬åˆå¹¶ä¸º [1,6].</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šintervals = [[1,4],[4,5]]</span><br><span class="line">è¾“å‡ºï¼š[[1,5]]</span><br><span class="line">è§£é‡Šï¼šåŒºé—´ [1,4] å’Œ [4,5] å¯è¢«è§†ä¸ºé‡å åŒºé—´ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= intervals.length &lt;= 104</code></li>
<li><code>intervals[i].length == 2</code></li>
<li><code>0 &lt;= starti &lt;= endi &lt;= 104</code></li>
</ul>
<h4 id="æ€è·¯-7"><a href="#æ€è·¯-7" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>æœ¬é¢˜å…³é”®æ˜¯å¦‚ä½•å¤„ç†é‡å çš„åŒºé—´</p>
<ol>
<li><p>äºŒç»´æ•°ç»„æŒ‰ç…§ç¬¬ä¸€ä¸ªæ•°å­—è¿›è¡Œå‡åºæ’åº</p>
</li>
<li><p>åˆå§‹åŒ– <strong>å°†æ’åºåçš„ç»“æœå…ˆæ”¾ä¸€ä¸ªæ•°ç»„å€¼</strong>ï¼Œè¿™æ ·åé¢è¿­ä»£æ¯æ¬¡éƒ½æ¯”è¾ƒçœ‹èƒ½å¦åˆå¹¶</p>
</li>
<li><p>è¿­ä»£ éå†å‰©ä½™çš„åŒºé—´ [a0, a1] [b0, b1]</p>
<ol>
<li><p>b0 &gt; a1 ä¸åˆå¹¶</p>
<p>ä¸å­˜åœ¨é‡å  åŠ å…¥ç»“æœé›†</p>
</li>
<li><p>b0 &lt;&#x3D; a1åˆå¹¶</p>
</li>
<li><p>a1 &lt;&#x3D; b1 åˆå¹¶ä¸º[a0, b1]</p>
</li>
<li><p>a1 &gt; b1 åˆå¹¶ä¸º[a0, a1] ç›¸å½“äºä¸åˆå¹¶</p>
</li>
</ol>
</li>
</ol>
<h4 id="ä»£ç -9"><a href="#ä»£ç -9" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-9"><a href="#c-9" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">merge</span>(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp;intervals)</span><br><span class="line">    &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; result;</span><br><span class="line">        <span class="comment">// 1.äºŒç»´æ•°ç»„æŒ‰ç…§ç¬¬ä¸€ä¸ªæ•°å­—è¿›è¡Œå‡åºæ’åº</span></span><br><span class="line">        <span class="built_in">sort</span>(intervals.<span class="built_in">begin</span>(), intervals.<span class="built_in">end</span>(), [](<span class="type">const</span> vector&lt;<span class="type">int</span>&gt; &amp;a, <span class="type">const</span> vector&lt;<span class="type">int</span>&gt; &amp;b)</span><br><span class="line">             &#123; <span class="keyword">return</span> a[<span class="number">0</span>] &lt; b[<span class="number">0</span>]; &#125;);</span><br><span class="line"></span><br><span class="line">        result.<span class="built_in">push_back</span>(intervals[<span class="number">0</span>]);</span><br><span class="line">        <span class="comment">// 2.[a0, a1], [b0, b1]</span></span><br><span class="line">        <span class="comment">// 2.1å¦‚æœåä¸€ä¸ªå…ƒç´  ç¬¬ä¸€ä¸ªæ•°å­—b0 &gt; å‰ä¸€ä¸ªå…ƒç´  ç¬¬äºŒä¸ªæ•°å­—a1 åˆ™ä¸èƒ½åˆå¹¶</span></span><br><span class="line">        <span class="comment">// 2.2å¦‚æœåä¸€ä¸ªå…ƒç´  ç¬¬ä¸€ä¸ªæ•°å­—b0 &lt;= å‰ä¸€ä¸ªå…ƒç´  ç¬¬äºŒä¸ªæ•°å­—a1</span></span><br><span class="line">        <span class="comment">// 2.2.1 a1 &lt;= b1   åˆå¹¶ æˆ[a0, b1]</span></span><br><span class="line">        <span class="comment">// 2.2.2 a1 &gt; b1   åˆå¹¶ æˆ[a0, a1]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; intervals.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (intervals[i][<span class="number">0</span>] &gt; result.<span class="built_in">back</span>()[<span class="number">1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                result.<span class="built_in">push_back</span>(intervals[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (result.<span class="built_in">back</span>()[<span class="number">1</span>] &lt;= intervals[i][<span class="number">1</span>])</span><br><span class="line">                &#123;</span><br><span class="line">                    result.<span class="built_in">back</span>()[<span class="number">1</span>] = intervals[i][<span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="go-9"><a href="#go-9" class="headerlink" title="go"></a>go</h5><p>sliceæ’åºè¦ç”¨sort.Sliceï¼Œ å‡½æ•°åŸå‹ä¸º</p>
<p><code>func sort.Slice(x any, less func(i int, j int) bool)</code></p>
<p>å…¶ä¸­åé¢ä¸€ä¸ªå‚æ•°æ˜¯lambdaï¼Œ <strong>ä¼ å…¥çš„å‚æ•°å¿…é¡»æ˜¯ä¸‹æ ‡</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">merge</span><span class="params">(intervals [][]<span class="type">int</span>)</span></span> [][]<span class="type">int</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> result [][]<span class="type">int</span></span><br><span class="line">	<span class="comment">//1.å…ˆæŠŠæ•°ç»„æŒ‰ç…§ç¬¬ä¸€ä¸ªæ•°å­—æ’åº</span></span><br><span class="line">	sort.Slice(intervals, <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> intervals[a][<span class="number">0</span>] &lt; intervals[b][<span class="number">0</span>]</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ç»“æœé‡Œé¢å…ˆæ”¾ä¸€ä¸ªæ•°ç»„å€¼ï¼Œè¿™æ ·æ¯æ¬¡éƒ½æ¯”è¾ƒçœ‹èƒ½å¦åˆå¹¶</span></span><br><span class="line">	result = <span class="built_in">append</span>(result, intervals[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.[a0, a1] [b0, b1]</span></span><br><span class="line">	<span class="comment">//2.1 b0 &gt; a1 ä¸åˆå¹¶</span></span><br><span class="line">	<span class="comment">//2.2 b0 &lt;= a1åˆå¹¶</span></span><br><span class="line">	<span class="comment">//2.2.1 a1 &lt;= b1 åˆå¹¶ä¸º[a0, b1]</span></span><br><span class="line">	<span class="comment">//2.2.1 a1 &gt; b1 åˆå¹¶ä¸º[a0, a1] ç›¸å½“äºä¸åˆå¹¶</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="built_in">len</span>(intervals); i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> intervals[i][<span class="number">0</span>] &gt; result[<span class="built_in">len</span>(result)<span class="number">-1</span>][<span class="number">1</span>] &#123;</span><br><span class="line">			result = <span class="built_in">append</span>(result, intervals[i])</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> result[<span class="built_in">len</span>(result)<span class="number">-1</span>][<span class="number">1</span>] &lt;= intervals[i][<span class="number">1</span>] &#123;</span><br><span class="line">				result[<span class="built_in">len</span>(result)<span class="number">-1</span>][<span class="number">1</span>] = intervals[i][<span class="number">1</span>]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-27"><a href="#12-27" class="headerlink" title="12.27"></a>12.27</h2><h3 id="å®Œå…¨å¹³æ–¹æ•°"><a href="#å®Œå…¨å¹³æ–¹æ•°" class="headerlink" title="å®Œå…¨å¹³æ–¹æ•°"></a>å®Œå…¨å¹³æ–¹æ•°</h3><p><a href="https://leetcode.cn/problems/perfect-squares/">https://leetcode.cn/problems/perfect-squares/</a></p>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•° <code>n</code> ï¼Œè¿”å› <em>å’Œä¸º <code>n</code> çš„å®Œå…¨å¹³æ–¹æ•°çš„æœ€å°‘æ•°é‡</em> ã€‚</p>
<p><strong>å®Œå…¨å¹³æ–¹æ•°</strong> æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå…¶å€¼ç­‰äºå¦ä¸€ä¸ªæ•´æ•°çš„å¹³æ–¹ï¼›æ¢å¥è¯è¯´ï¼Œå…¶å€¼ç­‰äºä¸€ä¸ªæ•´æ•°è‡ªä¹˜çš„ç§¯ã€‚ä¾‹å¦‚ï¼Œ<code>1</code>ã€<code>4</code>ã€<code>9</code> å’Œ <code>16</code> éƒ½æ˜¯å®Œå…¨å¹³æ–¹æ•°ï¼Œè€Œ <code>3</code> å’Œ <code>11</code> ä¸æ˜¯ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = 12</span><br><span class="line">è¾“å‡ºï¼š3 </span><br><span class="line">è§£é‡Šï¼š12 = 4 + 4 + 4</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = 13</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line">è§£é‡Šï¼š13 = 4 + 9</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= n &lt;= 104</code></li>
</ul>
<h4 id="æ€è·¯-8"><a href="#æ€è·¯-8" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p><u>è¿™é¢˜æ˜¯æ‰¾ å’Œä¸º <code>n</code> çš„å®Œå…¨å¹³æ–¹æ•°çš„æœ€å°‘æ•°é‡ï¼Œ å³ä¸ºæ±‚è§£æœ€ä¼˜è§£ï¼Œ æƒ³åˆ°ç”¨åŠ¨æ€è§„åˆ’</u></p>
<p>dp[ i ] &#x3D; x  è¡¨ç¤ºå®Œå…¨å¹³æ–¹æ•°çš„å’Œä¸º i çš„ æœ€å°‘æ•°é‡ x</p>
<ul>
<li><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p>
<p>å’Œä¸º i çš„å®Œå…¨å¹³æ–¹æ•°ï¼Œä»1~iä¹‹é—´æ‰¾åˆ°å¹³æ–¹æ•°j,  æ»¡è¶³j*j &lt;&#x3D;iï¼Œ æŠŠ j ä½œä¸ºå®Œå…¨å¹³æ–¹æ•°åŠ å…¥ï¼Œåˆ™dp[ i ] &#x3D; dp[ i - j *j ] + 1 , æ¥ç€ dp[ i - j *j ] å¯ä»¥å†ç»§ç»­å¾€ä¸‹æ‰¾</p>
<ol>
<li>éå†æ‰€æœ‰å°äºç­‰äºå½“å‰å€¼çš„å®Œå…¨å¹³æ–¹æ•°</li>
<li>å¦‚æœæ‰¾åˆ°ç¬¦åˆçš„å®Œå…¨å¹³æ–¹æ•°ï¼ŒæŠŠå…¶åŠ å…¥ æ­¤æ—¶ç»„æˆå’Œçš„æ•°é‡+1</li>
</ol>
</li>
<li><p>åˆå§‹åŒ–</p>
</li>
</ul>
<p>dp[ 0 ] å®Œå…¨å¹³æ–¹æ•°çš„å’Œä¸º0 çš„ æœ€å°‘æ•°é‡ 0</p>
<p>dp[ 1 ] å®Œå…¨å¹³æ–¹æ•°çš„å’Œä¸º1 çš„ æœ€å°‘æ•°é‡ 1</p>
<p>dp[ n ]åˆå§‹å€¼ä¸ºINT_MAX ä¸ºæ— é™å¤§</p>
<h4 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><blockquote>
<p>è¾“å…¥</p>
<p>n &#x3D;5</p>
<p>è¾“å‡º</p>
<p>2</p>
<p>é¢„æœŸç»“æœ</p>
<p>2</p>
</blockquote>
<ol>
<li><p>dp[ 2 ]  ä»1 ~ 2ä¹‹é—´æ‰¾ j</p>
<p>j &#x3D; 1 : dp[ 2 ] &#x3D;  min(dp[ 2 ], dp[2 - 1* 1] + 1) å…¶ä¸­  dp[2 - 1* 1] &#x3D; dp[ 1 ] &#x3D; 1    â€”â€“&gt;  dp[ 2 ] &#x3D; 2</p>
<p>j &#x3D; 2 : 2 * 2 &gt; 2 ä¸ç¬¦åˆ</p>
<p>ç»¼ä¸Š  dp[ 2 ] &#x3D; 2</p>
</li>
<li><p>dp[ 3 ]  ä»1 ~ 3ä¹‹é—´æ‰¾ j</p>
<p>j &#x3D; 1 : dp[ 3 ] &#x3D;  min(dp[ 3 ], dp[3 - 1* 1] + 1) å…¶ä¸­  dp[3 - 1* 1] &#x3D; dp[ 2 ] &#x3D; 2   â€”â€“&gt;  dp[ 3 ] &#x3D; 3</p>
<p>j &#x3D; 2 : 2 * 2 &gt; 3 ä¸ç¬¦åˆ</p>
<p>j &#x3D; 3 : 3 * 3 &gt; 3 ä¸ç¬¦åˆ</p>
<p>ç»¼ä¸Š  dp[ 3 ] &#x3D; 3</p>
</li>
<li><p>dp[ 4 ]  ä»1 ~ 4ä¹‹é—´æ‰¾ j</p>
<p>j &#x3D; 1 : dp[ 4 ] &#x3D;  min(dp[ 4 ], dp[4 - 1* 1] + 1) å…¶ä¸­  dp[4 - 1* 1] &#x3D; dp[ 3 ] &#x3D; 3   â€”â€“&gt;  dp[ 4 ] &#x3D; 4</p>
<p>j &#x3D; 2 : dp[ 4 ] &#x3D;  min(dp[ 4 ], dp[4 - 2* 2] + 1) å…¶ä¸­  dp[4 - 2* 2] &#x3D; dp[ 0 ] &#x3D; 0   â€”â€“&gt;  dp[ 4 ] &#x3D; 1</p>
<p>j &#x3D; 3 : 3 * 3 &gt; 4 ä¸ç¬¦åˆ</p>
<p>j &#x3D; 4 : 4 * 4 &gt; 4 ä¸ç¬¦åˆ</p>
<p>ç»¼ä¸Š  dp[ 4 ] &#x3D; 1</p>
</li>
<li><p>dp[ 5 ]  ä»1 ~ 5ä¹‹é—´æ‰¾ j</p>
<p>j &#x3D; 1 : dp[ 5 ] &#x3D;  min(dp[ 5 ], dp[5 - 1* 1] + 1) å…¶ä¸­  dp[5 - 1* 1] &#x3D; dp[ 4 ] &#x3D; 1   â€”â€“&gt;  dp[ 5 ] &#x3D; 2</p>
<p>j &#x3D; 2 : dp[ 5 ] &#x3D;  min(dp[ 5 ], dp[5 - 2* 2] + 1) å…¶ä¸­  dp[5 - 2* 2] &#x3D; dp[ 1 ] &#x3D; 1   â€”â€“&gt;  dp[ 4 ] &#x3D; 2</p>
<p>j &#x3D; 3 : 3 * 3 &gt; 5 ä¸ç¬¦åˆ</p>
<p>j &#x3D; 4 : 4 * 4 &gt; 5 ä¸ç¬¦åˆ</p>
<p>j &#x3D; 5 : 5 * 5 &gt; 5 ä¸ç¬¦åˆ</p>
<p>ç»¼ä¸Š  dp[ 5 ] &#x3D; 2</p>
</li>
</ol>
<h5 id="ä»£ç -10"><a href="#ä»£ç -10" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><h5 id="c-10"><a href="#c-10" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">numSquares</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 0.è¡¨ç¤ºå®Œå…¨å¹³æ–¹æ•°ä¸ºiçš„æœ€å°æ•°é‡</span></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(n + <span class="number">1</span>, INT_MAX)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.åˆå§‹çŠ¶æ€</span></span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.çŠ¶æ€è½¬ç§»æ–¹ç¨‹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 2.1 éå†æ‰€æœ‰å°äºç­‰äºå½“å‰å€¼çš„å®Œå…¨å¹³æ–¹æ•°</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n &amp;&amp; j * j &lt;= i; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// 2.2å¦‚æœæ‰¾åˆ°ç¬¦åˆçš„å®Œå…¨å¹³æ–¹æ•°ï¼ŒæŠŠå…¶åŠ å…¥ æ­¤æ—¶ç»„æˆå’Œçš„æ•°é‡+1</span></span><br><span class="line">                dp[i] = <span class="built_in">min</span>(dp[i], dp[i - j * j] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h5 id="go-10"><a href="#go-10" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">numSquares</span><span class="params">(n <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="comment">//0.åˆå§‹åŒ–dpä¸ºé•¿åº¦ä¸ºn+1</span></span><br><span class="line">	dp := <span class="built_in">make</span>([]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">range</span> dp &#123;</span><br><span class="line">		dp[i] = math.MaxInt64</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//1.åˆå§‹çŠ¶æ€</span></span><br><span class="line">	dp[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">	dp[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.çŠ¶æ€è½¬ç§»æ–¹ç¨‹</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">2</span>; i &lt;= n; i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= n &amp;&amp; j*j &lt;= i; j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> dp[i-j*j]+<span class="number">1</span> &lt; dp[i] &#123;</span><br><span class="line">				dp[i] = dp[i-j*j] + <span class="number">1</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> dp[n]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-28"><a href="#12-28" class="headerlink" title="12.28"></a>12.28</h2><h3 id="å²›å±¿æ•°é‡"><a href="#å²›å±¿æ•°é‡" class="headerlink" title="å²›å±¿æ•°é‡"></a>å²›å±¿æ•°é‡</h3><p><a href="https://leetcode.cn/problems/number-of-islands/description/">https://leetcode.cn/problems/number-of-islands/description/</a></p>
<p>ç»™ä½ ä¸€ä¸ªç”± <code>&#39;1&#39;</code>ï¼ˆé™†åœ°ï¼‰å’Œ <code>&#39;0&#39;</code>ï¼ˆæ°´ï¼‰ç»„æˆçš„çš„äºŒç»´ç½‘æ ¼ï¼Œè¯·ä½ è®¡ç®—ç½‘æ ¼ä¸­å²›å±¿çš„æ•°é‡ã€‚</p>
<p>å²›å±¿æ€»æ˜¯è¢«æ°´åŒ…å›´ï¼Œå¹¶ä¸”æ¯åº§å²›å±¿åªèƒ½ç”±æ°´å¹³æ–¹å‘å’Œ&#x2F;æˆ–ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿æ¥å½¢æˆã€‚</p>
<p>æ­¤å¤–ï¼Œä½ å¯ä»¥å‡è®¾è¯¥ç½‘æ ¼çš„å››æ¡è¾¹å‡è¢«æ°´åŒ…å›´ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šgrid = [</span><br><span class="line">  [&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;0&quot;],</span><br><span class="line">  [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;1&quot;,&quot;0&quot;],</span><br><span class="line">  [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;],</span><br><span class="line">  [&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;]</span><br><span class="line">]</span><br><span class="line">è¾“å‡ºï¼š1</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šgrid = [</span><br><span class="line">  [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;],</span><br><span class="line">  [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;],</span><br><span class="line">  [&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;0&quot;,&quot;0&quot;],</span><br><span class="line">  [&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;1&quot;]</span><br><span class="line">]</span><br><span class="line">è¾“å‡ºï¼š3</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>m == grid.length</code></li>
<li><code>n == grid[i].length</code></li>
<li><code>1 &lt;= m, n &lt;= 300</code></li>
<li><code>grid[i][j]</code> çš„å€¼ä¸º <code>&#39;0&#39;</code> æˆ– <code>&#39;1&#39;</code></li>
</ul>
<h4 id="æ€è·¯-9"><a href="#æ€è·¯-9" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>é¢˜ç›®çš„æ€è·¯æ˜¯å¯¹äºæ¯ä¸ªä½ç½®ï¼Œ å¦‚æœæ˜¯å²›å±¿ 1 å°±ç»§ç»­æœç´¢ï¼Œä¸€ç›´å¾€å››ä¸ªæ–¹å‘é€’å½’æ‰¾ï¼Œæ‰¾åˆ°æ°´ 0 å°±åœæ­¢æœç´¢ï¼Œæ­¤æ—¶å°±æ˜¯ä¸€ä¸ªå²›å±¿</p>
<p>æ˜¯æ·±åº¦ä¼˜å…ˆéå†é¢˜</p>
<ul>
<li><p>å¯¹äºæ¯ä¸ªä½ç½®ï¼Œå¦‚æœæ˜¯é™†åœ°å¹¶ä¸”ä¹‹å‰æ²¡è®¿é—®è¿‡</p>
<p>å°±ä»è¯¥ä½ç½®æ·±åº¦ä¼˜å…ˆéå† åœ¨ä¸Šä¸‹å·¦å³ä½ç½®æ‰¾ ä¸€ç›´æ‰¾åˆ°æ°´0</p>
</li>
<li><p>æ·±åº¦ä¼˜å…ˆéå†</p>
<ol>
<li><p>é€’å½’ç»“æŸ</p>
<p>ï¼ˆ1ï¼‰è¾¾åˆ°è¾¹ç•Œ æˆ–è€…ä¹‹å‰è®¿é—®è¿‡</p>
<p>ï¼ˆ2ï¼‰æ‰¾åˆ°ç»“æœï¼š æ‰¾åˆ°äº†æ°´0</p>
</li>
<li><p>é€’å½’æ¡ä»¶</p>
<p>æ²¡è¾¾åˆ°è¾¹ç•Œä¸”æ²¡è®¿é—®è¿‡ä¸”ä¸æ˜¯æ°´0</p>
<p>ï¼ˆ1ï¼‰æ ‡è®°å½“å‰ä½ç½®è¢«è®¿é—®è¿‡</p>
<p>ï¼ˆ2ï¼‰ä¸Šä¸‹å·¦å³æ·±åº¦ä¼˜å…ˆéå†</p>
<p><del>ï¼ˆ3ï¼‰å›æº¯ï¼šæŠŠä½ç½®æ ‡è®°ä¸ºæœªè®¿é—®</del></p>
<p>è¿™è¾¹ä¸ç”¨å›æº¯ï¼Œå›æº¯ä¼šä½¿å¾—ä¸€ä¸ªå²›å±¿å†…çš„é™†åœ°é‡å¤è®¡ç®—å²›å±¿æ•°é‡</p>
</li>
</ol>
</li>
</ul>
<h4 id="ä»£ç -11"><a href="#ä»£ç -11" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-11"><a href="#c-11" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">numIslands</span><span class="params">(vector&lt;vector&lt;<span class="type">char</span>&gt;&gt; &amp;grid)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// å¯¹äºæ¯ä¸ªä½ç½®ï¼Œ å¦‚æœæ˜¯å²›å±¿ 1 å°±ç»§ç»­æœç´¢ï¼Œä¸€ç›´å¾€å››ä¸ªæ–¹å‘é€’å½’æ‰¾ï¼Œæ‰¾åˆ°æ°´å°±åœæ­¢æœç´¢</span></span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">isVisited</span>(grid.<span class="built_in">size</span>(), <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(grid[<span class="number">0</span>].<span class="built_in">size</span>()));</span><br><span class="line">        <span class="type">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; grid.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].<span class="built_in">size</span>(); j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] == <span class="string">&#x27;1&#x27;</span> &amp;&amp; !isVisited[i][j])</span><br><span class="line">                &#123;</span><br><span class="line">                    result += <span class="number">1</span>;</span><br><span class="line">                    <span class="built_in">dfs</span>(i, j, isVisited, grid);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp;isVisited, vector&lt;vector&lt;<span class="type">char</span>&gt;&gt; &amp;grid)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 1.ç»“æŸé€’å½’</span></span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= grid.<span class="built_in">size</span>() || j &lt; <span class="number">0</span> || j &gt;= grid[<span class="number">0</span>].<span class="built_in">size</span>() || isVisited[i][j] == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (grid[i][j] == <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.é€’å½’</span></span><br><span class="line">        isVisited[i][j] = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(i - <span class="number">1</span>, j, isVisited, grid);</span><br><span class="line">        <span class="built_in">dfs</span>(i + <span class="number">1</span>, j, isVisited, grid);</span><br><span class="line">        <span class="built_in">dfs</span>(i, j - <span class="number">1</span>, isVisited, grid);</span><br><span class="line">        <span class="built_in">dfs</span>(i, j + <span class="number">1</span>, isVisited, grid);</span><br><span class="line">        <span class="comment">// ä¸å†å°†å·²è®¿é—®æ ‡è®°æ¢å¤ä¸ºæœªè®¿é—®çŠ¶æ€ï¼Œè¿™æ ·å¯ä»¥é¿å…é‡å¤è®¡æ•°ç›¸é‚»çš„å²›å±¿</span></span><br><span class="line">        <span class="comment">//  isVisited[i][j] = 0;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h5 id="go-11"><a href="#go-11" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">numIslands</span><span class="params">(grid [][]<span class="type">byte</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> result <span class="type">int</span></span><br><span class="line"></span><br><span class="line">	isVisited := <span class="built_in">make</span>([][]<span class="type">bool</span>, <span class="built_in">len</span>(grid))</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">range</span> isVisited &#123;</span><br><span class="line">		isVisited[i] = <span class="built_in">make</span>([]<span class="type">bool</span>, <span class="built_in">len</span>(grid[<span class="number">0</span>]))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(grid); i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="built_in">len</span>(grid[<span class="number">0</span>]); j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> grid[i][j] == <span class="string">&#x27;1&#x27;</span> &amp;&amp; !isVisited[i][j] &#123;</span><br><span class="line">				result += <span class="number">1</span></span><br><span class="line">				dfs(i, j, isVisited, grid)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dfs</span><span class="params">(i, j <span class="type">int</span>, isVisited [][]<span class="type">bool</span>, grid [][]<span class="type">byte</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> i &lt; <span class="number">0</span> || i &gt;= <span class="built_in">len</span>(grid) || j &lt; <span class="number">0</span> || j &gt;= <span class="built_in">len</span>(grid[<span class="number">0</span>]) || isVisited[i][j] &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> grid[i][j] == <span class="string">&#x27;0&#x27;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	isVisited[i][j] = <span class="literal">true</span></span><br><span class="line">	dfs(i<span class="number">-1</span>, j, isVisited, grid)</span><br><span class="line">	dfs(i+<span class="number">1</span>, j, isVisited, grid)</span><br><span class="line">	dfs(i, j<span class="number">-1</span>, isVisited, grid)</span><br><span class="line">	dfs(i, j+<span class="number">1</span>, isVisited, grid)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="12-29"><a href="#12-29" class="headerlink" title="12.29"></a>12.29</h2><h3 id="ä¸‰æ•°ä¹‹å’Œ"><a href="#ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="ä¸‰æ•°ä¹‹å’Œ"></a>ä¸‰æ•°ä¹‹å’Œ</h3><p><a href="https://leetcode.cn/problems/3sum/description/">https://leetcode.cn/problems/3sum/description/</a></p>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ <code>[nums[i], nums[j], nums[k]]</code> æ»¡è¶³ <code>i != j</code>ã€<code>i != k</code> ä¸” <code>j != k</code> ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ <code>nums[i] + nums[j] + nums[k] == 0</code> ã€‚è¯·</p>
<p>ä½ è¿”å›æ‰€æœ‰å’Œä¸º <code>0</code> ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong>ç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]</span><br><span class="line">è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚</span><br><span class="line">nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚</span><br><span class="line">nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚</span><br><span class="line">ä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚</span><br><span class="line">æ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [0,1,1]</span><br><span class="line">è¾“å‡ºï¼š[]</span><br><span class="line">è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [0,0,0]</span><br><span class="line">è¾“å‡ºï¼š[[0,0,0]]</span><br><span class="line">è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>3 &lt;= nums.length &lt;= 3000</code></li>
<li><code>-105 &lt;= nums[i] &lt;= 105</code></li>
</ul>
<h4 id="æ€è·¯-10"><a href="#æ€è·¯-10" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>æœ¬é¢˜çš„ä¸‰æ•°ä¹‹å’Œå¾ˆå®¹æ˜“æƒ³åˆ°å…ˆå›ºå®šä¸€ä¸ªæ•°ï¼Œç„¶åæ‰¾åå…¶ä»–ä¸¤ä¸ªæ•°ï¼Œ ä½¿å¾—ä¸‰ä¸ªæ•°çš„å’Œä¸º0ï¼Œå› æ­¤è¿™é‡Œå¯ä»¥ç”¨<strong>åŒæŒ‡é’ˆ</strong>æ¥æ‰¾å…¶ä»–ä¸¤ä¸ªæ•°</p>
<p>ä½†æ˜¯æœ¬é¢˜è¿˜æœ‰ä¸ªå…³é”®ç‚¹æ˜¯è·å–ä¸é‡å¤çš„ç»“æœ</p>
<p>å¯¹äºç»“æœ1 -1 0ï¼Œ 0 -1 1è¿™ç§ä½ç½®ä¸ä¸€æ · ä½†æ˜¯å®é™…ç»“æœæ˜¯ç›¸åŒçš„å¦‚ä½•<strong>å»é‡</strong></p>
<ul>
<li><p>é¦–å…ˆ<strong>æ’åº</strong>ï¼Œè®©æ•°ç»„æ˜¯ä»å°åˆ°å¤§æ’åº</p>
<p>è¿™æ ·å°±å¯ä»¥æ ¹æ®å‰åçš„å€¼æ’é™¤é‡å¤çš„</p>
</li>
<li><p>å…¶æ¬¡ï¼Œåœ¨ä½¿ç”¨åŒæŒ‡é’ˆæ‰¾åé¢ä¸¤ä¸ªæ•°çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦æ³¨æ„ä¸æ‰¾é‡å¤çš„æ•°å­—</p>
</li>
</ul>
<p>å› æ­¤ æ€è·¯ä¸ºï¼š</p>
<ul>
<li><p>æ’åº</p>
</li>
<li><p>åŒæŒ‡é’ˆéå†</p>
<ol>
<li><p>é¦–å…ˆå»é‡ æ ¹æ®å‰åä½ç½®æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ•°å­—</p>
</li>
<li><p>å›ºå®šç¬¬ä¸€ä¸ªæ•°ï¼Œæ‰¾ä¸¤ä¸ªæŒ‡é’ˆ:</p>
<p>ä¸€ä¸ªä»å½“å‰ä½ç½®çš„åä¸€ä¸ªï¼ˆleft &#x3D; i+1ï¼‰</p>
<p>å¦ä¸€ä¸ªä»æœ«å°¾å¼€å§‹æ‰¾ï¼ˆright &#x3D; len(nums)-1)</p>
</li>
<li><p>å¦‚æœå’Œæ­£å¥½ä¸º0ï¼Œå°±æ‰¾åˆ°äº†</p>
<p><strong>ï¼ˆåœ¨ç§»åŠ¨æŒ‡é’ˆä¹‹å‰æ³¨æ„è¦å»é‡ï¼‰</strong></p>
<p>æ­¤æ—¶leftæŒ‡é’ˆåç§»ï¼ŒrightæŒ‡é’ˆå‰ç§»</p>
</li>
<li><p>å¦‚æœå’Œå°äº0ï¼Œ è¯´æ˜å‰é¢æŒ‡é’ˆçš„æ•°å°äº†ï¼Œæ­¤æ—¶ç§»åŠ¨leftæŒ‡é’ˆï¼Œåç§»</p>
</li>
<li><p>å¦‚æœå’Œå¤§äº0ï¼Œ è¯´æ˜åé¢æŒ‡é’ˆçš„æ•°å¤§äº†ï¼Œæ­¤æ—¶ç§»åŠ¨rightæŒ‡é’ˆï¼Œå‰ç§»</p>
</li>
</ol>
</li>
</ul>
<h4 id="ä»£ç -12"><a href="#ä»£ç -12" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><h5 id="c-12"><a href="#c-12" class="headerlink" title="c++"></a>c++</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">threeSum</span>(vector&lt;<span class="type">int</span>&gt; &amp;nums)</span><br><span class="line">    &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; result;</span><br><span class="line">        <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">        <span class="comment">// å¯¹äºæ¯ä¸ªæ•°n, è¦æ‰¾åˆ°å¦å¤–ä¸¤æ•°ä¹‹å’Œä¸º-n</span></span><br><span class="line">        <span class="comment">// åˆ©ç”¨åŒæŒ‡é’ˆ+æ’åºï¼ˆä»å°åˆ°å¤§çš„ç‰¹ç‚¹ï¼‰</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å»é‡</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt;= <span class="number">1</span> &amp;&amp; nums[i] == nums[i - <span class="number">1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> left = i + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> right = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (left &lt; right)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> sum = nums[i] + nums[left] + nums[right];</span><br><span class="line">                <span class="keyword">if</span> (sum == <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    result.<span class="built_in">push_back</span>(&#123;nums[i], nums[left], nums[right]&#125;);</span><br><span class="line">                    <span class="comment">// ç»§ç»­å‰åç§»åŠ¨æŒ‡é’ˆæ‰¾é‡å¤çš„æ•°å­—</span></span><br><span class="line">                    <span class="keyword">while</span> (left &lt;= nums.<span class="built_in">size</span>() - <span class="number">2</span> &amp;&amp; nums[left] == nums[left + <span class="number">1</span>])</span><br><span class="line">                    &#123;</span><br><span class="line">                        left++;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">while</span> (right &gt;= <span class="number">1</span> &amp;&amp; nums[right] == nums[right - <span class="number">1</span>])</span><br><span class="line">                    &#123;</span><br><span class="line">                        right--;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    left++;</span><br><span class="line">                    right--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å’Œå°äº† è®©å·¦è¾¹çš„æ•°å¤§ä¸€ç‚¹</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    left++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å’Œå¤§äº† è®©å³è¾¹çš„æ•°å°ä¸€ç‚¹</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    right--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="go-12"><a href="#go-12" class="headerlink" title="go"></a>go</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">threeSum</span><span class="params">(nums []<span class="type">int</span>)</span></span> [][]<span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> result [][]<span class="type">int</span></span><br><span class="line">	<span class="comment">//æ’åº ä¸ºäº†å»é‡</span></span><br><span class="line">	sort.Slice(nums, <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> nums[i] &lt; nums[j]</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åŒæŒ‡é’ˆ</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">		<span class="comment">//å»é‡</span></span><br><span class="line">		<span class="keyword">if</span> i &gt;= <span class="number">1</span> &amp;&amp; nums[i] == nums[i<span class="number">-1</span>] &#123;</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//åŒæŒ‡é’ˆ</span></span><br><span class="line">		left := i + <span class="number">1</span></span><br><span class="line">		right := <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">		<span class="keyword">for</span> left &lt; right &#123;</span><br><span class="line">			sum := nums[i] + nums[left] + nums[right]</span><br><span class="line">			<span class="keyword">if</span> sum == <span class="number">0</span> &#123;</span><br><span class="line">				result = <span class="built_in">append</span>(result, []<span class="type">int</span>&#123;nums[i], nums[left], nums[right]&#125;)</span><br><span class="line">				<span class="comment">//å»é‡</span></span><br><span class="line">				<span class="keyword">for</span> left &lt;= <span class="built_in">len</span>(nums)<span class="number">-2</span> &amp;&amp; nums[left] == nums[left+<span class="number">1</span>] &#123;</span><br><span class="line">					left++</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">for</span> right &gt;= <span class="number">1</span> &amp;&amp; nums[right] == nums[right<span class="number">-1</span>] &#123;</span><br><span class="line">					right--</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">//ç»§ç»­å¾€åèµ°</span></span><br><span class="line">				left++</span><br><span class="line">				right--</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> sum &lt; <span class="number">0</span> &#123;</span><br><span class="line">				left++</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				right--</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>daily</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨goæ­å»ºä¸€ä¸ªpipeline</title>
    <url>/pipeline/</url>
    <content><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><ol>
<li>serviceéœ€è¦ä»qé‡Œæ‹¿åˆ°attachment</li>
<li>å¹¶ä¸”éœ€è¦å¯¹attachmentè¿›è¡Œè§£å‹ç¼©ï¼Œå¯¹äºåˆæ³•çš„æ–‡ä»¶æå–æ–‡ä»¶çš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶é‡æ–°ç»„ç»‡ã€‚</li>
<li>å¹¶å°†attachmentå­˜å‚¨åˆ°s3ä¸Šï¼ŒåŒæ—¶å°†åˆæ³•çš„æ–‡ä»¶å†…å®¹ä¼ è¾“ç»™ä¸‹ä¸€ä¸ªserviceå¤„ç†</li>
</ol>
<h3 id="å­˜åœ¨é—®é¢˜"><a href="#å­˜åœ¨é—®é¢˜" class="headerlink" title="å­˜åœ¨é—®é¢˜"></a>å­˜åœ¨é—®é¢˜</h3><p>æŒ‰ç…§ä¸Šè¿°çš„ä»»åŠ¡ï¼Œå¦‚æœä¸²è¡Œæ‰§è¡Œï¼Œæ¯ä¸€æ­¥ä»»åŠ¡å¿…é¡»è¦ç­‰ä¸Šä¸€æ­¥ä»»åŠ¡å®Œæˆæ‰èƒ½å¼€å§‹æ‰§è¡Œã€‚</p>
<p>å¦‚æœæœ‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œé‚£å°±ä¼šå½±å“æ•ˆç‡ã€‚</p>
<h3 id="ç»¼ä¸Š"><a href="#ç»¼ä¸Š" class="headerlink" title="ç»¼ä¸Š"></a>ç»¼ä¸Š</h3><p>ä¸ºäº†æå‡æ•ˆç‡ï¼Œé‡‡ç”¨pipelineæ‰§è¡Œå¤šä»»åŠ¡ï¼Œå½“æ¯ä¸ªä»»åŠ¡çš„å¤„ç†æ—¶é—´ç›¸è¿‘æ—¶ï¼Œæ•ˆç‡å¯æé«˜n-1&#x2F;nï¼ˆnä¸ºä»»åŠ¡æ•°ï¼‰</p>
<ul>
<li><p><strong>pipeline</strong>: é‡‡ç”¨<strong>goroutine + channel</strong>æ–¹å¼ï¼Œ å®ç°äº†<strong>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</strong></p>
<p>æ¯ä¸ªä»»åŠ¡æ˜¯ä¸€ä¸ªgoroutineï¼Œå°†ç»è¿‡å½“å‰ä»»åŠ¡å¤„ç†å¥½çš„æ•°æ®æ”¾å…¥channelä¸­ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä»»åŠ¡</p>
<p>å› æ­¤ï¼Œæœ‰éœ€è¦å¤„ç†æ—¶æ‰æœ‰æ•°æ®ï¼Œå¯ä»¥å‡å°‘å†…å­˜ä½¿ç”¨ï¼ŒåŒæ—¶å¤šä¸ªgoroutineå¹¶è¡Œå¤„ç†ï¼Œå……åˆ†åˆ©ç”¨èµ„æº</p>
</li>
<li><p>æ¯ä¸ªä»»åŠ¡å°è£…åˆ°å•ç‹¬å‡½æ•°ä¸­ï¼Œå®ç°æ¨¡å—åŒ–è®¾è®¡ï¼Œä»£ç ä¹Ÿä¼šæ›´æ¸…æ™°</p>
</li>
</ul>
<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><ol>
<li><p>åˆå§‹åŒ–</p>
<ul>
<li>æ•°æ®åº“</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—</li>
</ul>
</li>
<li><p>å®ç°pipeline</p>
<ul>
<li><p>f1å‡½æ•°ï¼ˆfunc receive)</p>
<ul>
<li>åˆ›å»ºout channel</li>
<li>èµ·ä¸€ä¸ªgoroutineå¾ªç¯å»å¤„ç†<ul>
<li>å»qé‡Œæ‹¿attachment, æŠŠæ‹¿åˆ°çš„attachmentæ”¾å…¥out channelä¸­</li>
<li>sleep ä¸€å®šæ—¶é—´ï¼Œç»§ç»­å»qé‡Œæ‹¿ä¸‹ä¸€ä¸ª</li>
</ul>
</li>
<li>è¿”å›out channel</li>
</ul>
</li>
<li><p>f2å‡½æ•°ï¼ˆfunc process), æ¥æ”¶f1å‡½æ•°çš„channelä¸ºè‡ªå·±çš„in channel</p>
<ul>
<li><p>åˆ›å»ºout channel</p>
</li>
<li><p>èµ·ä¸€ä¸ªgoroutineå¾ªç¯å»å¤„ç†</p>
<p>å»in channelé‡Œæ‹¿task, æŠŠå¤„ç†åçš„taskæ”¾å…¥out channelä¸­</p>
</li>
<li><p>è¿”å›out channel</p>
</li>
</ul>
</li>
<li><p>f3å‡½æ•°ï¼ˆfunc upload), æ¥æ”¶f2å‡½æ•°çš„channelä¸ºè‡ªå·±çš„in channel</p>
<p>åˆ©ç”¨mainå‡½æ•°çš„ä¸»çº¿ç¨‹æ¥è°ƒç”¨f3å‡½æ•°ï¼Œä½¿å¾—å‡½æ•°é˜»å¡åœ¨f3è¿™é‡Œ</p>
<ul>
<li><p>å¾ªç¯å»å¤„ç†</p>
<p>å»in channelé‡Œæ‹¿task, å¤„ç†</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>ä¼ªä»£ç </p>
<p>main.goä»£ç å¦‚ä¸‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">out1 := f1()</span><br><span class="line">out2 := f2(out1)</span><br><span class="line">f3(out2)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><p><input disabled="" type="checkbox"> 
f1å»qé‡Œæ‹¿attchmentæ”¾å…¥channelä¸­</p>
</li>
<li><p><input disabled="" type="checkbox"> 
å½“channelä¸­æœ‰å†…å®¹æ—¶ï¼Œf2è¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œåæ”¾å…¥channel</p>
</li>
<li><p><input disabled="" type="checkbox"> 
å½“channelä¸­æœ‰å†…å®¹æ—¶ï¼Œf3è¿›è¡Œå¤„ç†</p>
</li>
</ul>
<p>f1, f2ä¸­éƒ½ä¼šå•ç‹¬èµ·ä¸€ä¸ªgoroutineå¤„ç†ï¼Œf3åˆ™æ˜¯åˆ©ç”¨mainå‡½æ•°çš„ä¸»çº¿ç¨‹æ¥è°ƒç”¨f3å‡½æ•°ï¼Œä½¿å¾—å‡½æ•°é˜»å¡åœ¨f3è¿™é‡Œ</p>
<p>å¦‚æœf3ä¹Ÿèµ·ä¸€ä¸ªgoroutine, é‚£ä¹ˆå‡½æ•°å°±ä¼šç«‹å³ç»“æŸ</p>
<h3 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h3><p><img src="/images/pipeline1.png"></p>
<h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><h4 id="graceful-shutdown"><a href="#graceful-shutdown" class="headerlink" title="graceful shutdown"></a>graceful shutdown</h4><h5 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h5><p>å¦‚æœf1, f2, f3æœ‰ä¸€ä¸ªä»»åŠ¡åœ¨å¤„ç†æ—¶ï¼Œ serviceçªç„¶é€€å‡ºäº†ï¼Œé‚£éœ€è¦æŠŠå½“å‰ä»»åŠ¡åšå®Œï¼Œå³éœ€è¦æŠŠf1-&gt;f2-&gt;f3è¿™ä¸€å¥—æµç¨‹èµ°å®Œ</p>
<h5 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h5><ol>
<li>åˆ›å»ºä¸€ä¸ªdone channelç”¨äºå¹¿æ’­ç»“æŸä¿¡å·</li>
<li>åˆ›å»ºä¸€ä¸ªch channel, ç›‘å¬å‡ ä¸ªé€€å‡ºä¿¡å·(syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT)</li>
<li>èµ·ä¸€ä¸ªgoroutineç­‰å¾…ch channelå†…å®¹ï¼Œå½“ch channelé‡Œæœ‰å†…å®¹æ—¶<ul>
<li>å…³é—­done channel: ç›¸å½“äºå‘channelé‡Œå‘é€é›¶å€¼ï¼Œç­‰åŒäºå¹¿æ’­</li>
</ul>
</li>
</ol>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//start for graceful down</span></span><br><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)</span><br><span class="line"><span class="keyword">defer</span> <span class="built_in">close</span>(done)</span><br><span class="line"></span><br><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> os.Signal, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">defer</span> <span class="built_in">close</span>(ch)</span><br><span class="line">signal.Notify(ch, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">	&lt;-ch</span><br><span class="line">	<span class="comment">//å¹¿æ’­doneä¿¡å·</span></span><br><span class="line">	<span class="built_in">close</span>(done)</span><br><span class="line">	log.Infof(MainTraceId, <span class="string">&quot;Shutdown Server...&quot;</span>)</span><br><span class="line">&#125;()</span><br><span class="line"><span class="comment">//end for graceful down</span></span><br></pre></td></tr></table></figure>

<h6 id="f1å‡½æ•°"><a href="#f1å‡½æ•°" class="headerlink" title="f1å‡½æ•°"></a>f1å‡½æ•°</h6><p>å¦‚æœdone channelé‡Œæœ‰æ•°æ®ï¼Œå°±ç›´æ¥è¿”å›ï¼Œä¸å†å»qé‡Œå–attachmentäº†</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">out := <span class="built_in">make</span>(<span class="keyword">chan</span> Task)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="built_in">close</span>(out)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">select</span> &#123;</span><br><span class="line">		<span class="keyword">case</span> &lt;-done:<span class="comment">//graceful shutdown</span></span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			out &lt;- Task&#123;</span><br><span class="line">				Num:   i,</span><br><span class="line">				QName: qName,</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;()</span><br><span class="line"><span class="keyword">return</span> out</span><br></pre></td></tr></table></figure>

<h6 id="f2å‡½æ•°"><a href="#f2å‡½æ•°" class="headerlink" title="f2å‡½æ•°"></a>f2å‡½æ•°</h6><p>f2å‡½æ•°ä¸ç”¨å¤„ç†ï¼Œå› ä¸ºå½“f1ä¼ æ¥çš„channelæ²¡æœ‰å†…å®¹ï¼Œf2å°±ä¸ä¼šå†å¤„ç†äº†</p>
<h6 id="f3å‡½æ•°"><a href="#f3å‡½æ•°" class="headerlink" title="f3å‡½æ•°"></a>f3å‡½æ•°</h6><p>f3å‡½æ•°å¦‚æœf2ä¼ æ¥çš„channelé‡Œæ²¡æœ‰å†…å®¹ï¼Œå¹¶ä¸”done channelé‡Œæœ‰å†…å®¹çš„æ—¶å€™ï¼Œæ‰ä¼šç»“æŸf3ï¼Œæ­¤æ—¶ç›¸å½“äºæµæ°´çº¿çš„ä»»åŠ¡éƒ½å®Œæˆäº†</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> task := <span class="keyword">range</span> in &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s:%d\n&quot;</span>, task.QName, task.Num)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//graceful shutdown</span></span><br><span class="line">&lt;-done</span><br></pre></td></tr></table></figure>



<h4 id="å¤šä¸ªqå¦‚ä½•å¤„ç†"><a href="#å¤šä¸ªqå¦‚ä½•å¤„ç†" class="headerlink" title="å¤šä¸ªqå¦‚ä½•å¤„ç†"></a>å¤šä¸ªqå¦‚ä½•å¤„ç†</h4><h5 id="é—®é¢˜-1"><a href="#é—®é¢˜-1" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h5><p>å¦‚æœf1éœ€è¦å»å¤šä¸ªqé‡Œå–attachment, åˆ™éœ€è¦å°†å¤šä¸ªchannelé‡Œçš„å†…å®¹åˆå¹¶åˆ°ä¸€ä¸ªchannelé‡Œ</p>
<h5 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h5><ol>
<li>åˆ›å»ºout channel</li>
<li>éå†å¤šä¸ªchannels<ul>
<li>å°†å¤šä¸ªchannelçš„å†…å®¹éƒ½åŠ å…¥åˆ°out channelä¸­</li>
<li>è¿™é‡ŒchannelåŠ å…¥çš„æ•°æ®æ˜¯ä¸éœ€è¦é¡ºåºçš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ–°çš„goroutineæ¥ä¸“é—¨æŠŠå†…å®¹åŠ å…¥outchannel</li>
</ul>
</li>
<li>ç­‰å¾…mergeå®Œæˆå¹¶å…³é—­out channel<ul>
<li>ç”±äºéœ€è¦ç­‰æ‰€æœ‰channelé‡Œçš„å†…å®¹åŠ å…¥åˆ°out channelï¼Œæ‰€ä»¥éœ€è¦åŒæ­¥ç­‰å®Œæˆ</li>
<li>ä½†æ˜¯åŒæ­¥æ—¶ä¸èƒ½é˜»å¡ä¸»ç¨‹åºï¼Œå› æ­¤éœ€è¦æ–°å¼€ä¸€ä¸ªgoroutineå»ç­‰å¾…</li>
</ul>
</li>
</ol>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">merge</span><span class="params">(chs ...&lt;-<span class="keyword">chan</span> Task)</span></span> &lt;-<span class="keyword">chan</span> Task &#123;</span><br><span class="line">	out := <span class="built_in">make</span>(<span class="keyword">chan</span> Task)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">	wg.Add(<span class="built_in">len</span>(chs))</span><br><span class="line"></span><br><span class="line">	output := <span class="function"><span class="keyword">func</span><span class="params">(ch &lt;-<span class="keyword">chan</span> Task)</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> task := <span class="keyword">range</span> ch &#123;</span><br><span class="line">			out &lt;- task</span><br><span class="line">		&#125;</span><br><span class="line">		wg.Done()</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, ch := <span class="keyword">range</span> chs &#123;</span><br><span class="line">		<span class="keyword">go</span> output(ch)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åŒæ­¥æ—¶ä¸èƒ½é˜»å¡ä¸»ç¨‹åºï¼Œå› æ­¤éœ€è¦æ–°å¼€ä¸€ä¸ªgoroutine</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		wg.Wait()</span><br><span class="line">		<span class="built_in">close</span>(out)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> out</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;monitor-service/internal/log&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;os/signal&quot;</span></span><br><span class="line">	<span class="string">&quot;sync&quot;</span></span><br><span class="line">	<span class="string">&quot;syscall&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	MainTraceId = <span class="string">&quot;main&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Task <span class="keyword">struct</span> &#123;</span><br><span class="line">	Num   <span class="type">int</span></span><br><span class="line">	QName <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//start init</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//end init</span></span><br><span class="line">	run()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//start for graceful down</span></span><br><span class="line">	done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line">	ch := <span class="built_in">make</span>(<span class="keyword">chan</span> os.Signal, <span class="number">1</span>)</span><br><span class="line">	<span class="keyword">defer</span> <span class="built_in">close</span>(ch)</span><br><span class="line">	signal.Notify(ch, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		&lt;-ch</span><br><span class="line">		<span class="comment">//å¹¿æ’­doneä¿¡å·</span></span><br><span class="line">		<span class="built_in">close</span>(done)</span><br><span class="line">		log.Infof(MainTraceId, <span class="string">&quot;Shutdown Server...&quot;</span>)</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="comment">//end for graceful down</span></span><br><span class="line"></span><br><span class="line">	upload(done, process(merge(receive(done, <span class="string">&quot;main queue&quot;</span>), receive(done, <span class="string">&quot;dlq queue&quot;</span>))))</span><br><span class="line"></span><br><span class="line">	log.Infof(MainTraceId, <span class="string">&quot;Server Exit!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">merge</span><span class="params">(chs ...&lt;-<span class="keyword">chan</span> Task)</span></span> &lt;-<span class="keyword">chan</span> Task &#123;</span><br><span class="line">	out := <span class="built_in">make</span>(<span class="keyword">chan</span> Task)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">	wg.Add(<span class="built_in">len</span>(chs))</span><br><span class="line"></span><br><span class="line">	output := <span class="function"><span class="keyword">func</span><span class="params">(ch &lt;-<span class="keyword">chan</span> Task)</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> task := <span class="keyword">range</span> ch &#123;</span><br><span class="line">			out &lt;- task</span><br><span class="line">		&#125;</span><br><span class="line">		wg.Done()</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, ch := <span class="keyword">range</span> chs &#123;</span><br><span class="line">		<span class="keyword">go</span> output(ch)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åŒæ­¥æ—¶ä¸èƒ½é˜»å¡ä¸»ç¨‹åºï¼Œå› æ­¤éœ€è¦æ–°å¼€ä¸€ä¸ªgo routine</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		wg.Wait()</span><br><span class="line">		<span class="built_in">close</span>(out)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> out</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">receive</span><span class="params">(done &lt;-<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;, qName <span class="type">string</span>)</span></span> &lt;-<span class="keyword">chan</span> Task &#123;</span><br><span class="line">	out := <span class="built_in">make</span>(<span class="keyword">chan</span> Task)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> <span class="built_in">close</span>(out)</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">			<span class="keyword">select</span> &#123;</span><br><span class="line">			<span class="keyword">case</span> &lt;-done:</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			<span class="keyword">default</span>:</span><br><span class="line">				out &lt;- Task&#123;</span><br><span class="line">					Num:   i,</span><br><span class="line">					QName: qName,</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> out</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">process</span><span class="params">(in &lt;-<span class="keyword">chan</span> Task)</span></span> &lt;-<span class="keyword">chan</span> Task &#123;</span><br><span class="line">	out := <span class="built_in">make</span>(<span class="keyword">chan</span> Task)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> task := <span class="keyword">range</span> in &#123;</span><br><span class="line">			out &lt;- task</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">close</span>(out)</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> out</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">upload</span><span class="params">(done &lt;-<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;, in &lt;-<span class="keyword">chan</span> Task)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> task := <span class="keyword">range</span> in &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%s:%d\n&quot;</span>, task.QName, task.Num)</span><br><span class="line">	&#125;</span><br><span class="line">	&lt;-done</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><blockquote>
<p>è¿è¡Œåå‘ç°åˆ†åˆ«ä»main queueå’Œdlq queueé‡Œæ‹‰æ•°æ®ï¼Œå½“è¾“å…¥åœæ­¢serviceä¿¡å·ï¼ˆctrl+c)æ—¶ï¼Œç¨‹åºgraceful shutdownæ­£å¸¸ç»“æŸ</p>
</blockquote>
<p>docker run -p 8081:80 â€“rm monitor-parser<br>main queue:1<br>dlq queue:1<br>main queue:2<br>main queue:3<br>dlq queue:2<br>main queue:4<br>main queue:5<br>dlq queue:3<br>dlq queue:4<br>main queue:6<br>main queue:7<br>dlq queue:5<br>dlq queue:6<br>main queue:8<br>main queue:9<br>dlq queue:7<br>dlq queue:8<br>main queue:10<br>dlq queue:9<br>dlq queue:10<br>^C[2023&#x2F;12&#x2F;05 08.56.17.245260,,Infof,main]parser.go:39, Shutdown Serverâ€¦<br>[2023&#x2F;12&#x2F;05 08.56.17.245325,,Infof,main]parser.go:45, Server Exit!</p>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>service</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨goæ­å»ºä¸€ä¸ªhttp server</title>
    <url>/httpServer/</url>
    <content><![CDATA[<h1 id="å¦‚ä½•ä½¿ç”¨goæ­å»ºä¸€ä¸ªhttp-server"><a href="#å¦‚ä½•ä½¿ç”¨goæ­å»ºä¸€ä¸ªhttp-server" class="headerlink" title="å¦‚ä½•ä½¿ç”¨goæ­å»ºä¸€ä¸ªhttp server"></a>å¦‚ä½•ä½¿ç”¨goæ­å»ºä¸€ä¸ªhttp server</h1><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>éœ€è¦æœ‰ä¸€ä¸ªserviceå»æ¥æ”¶clientç«¯ä¼ æ¥çš„attachmentï¼Œå¹¶è¿›è¡Œå¤„ç†</p>
<h3 id="å­˜åœ¨é—®é¢˜"><a href="#å­˜åœ¨é—®é¢˜" class="headerlink" title="å­˜åœ¨é—®é¢˜"></a>å­˜åœ¨é—®é¢˜</h3><ol>
<li><p>clientç«¯éœ€è¦ç­‰å¾…serviceæ¥æ”¶attachmentå¹¶å¤„ç†åçš„response</p>
<p>å¤„ç†è¿‡ç¨‹å¯èƒ½è€—æ—¶</p>
</li>
<li><p>å‰ç«¯ä¹Ÿä¼šæœ‰uploadæ¥å£æ¥ä¸Šä¼ æ–‡ä»¶ï¼Œclientç«¯ä¸æ­¢ä¸€ä¸ª</p>
</li>
</ol>
<h3 id="ç»¼ä¸Š"><a href="#ç»¼ä¸Š" class="headerlink" title="ç»¼ä¸Š"></a>ç»¼ä¸Š</h3><p>åŸºäºè¦æ±‚2ï¼Œéœ€è¦æœ‰httpè¯·æ±‚ï¼Œå¦‚æœè®©clientç«¯ç›´æ¥å°†attchmentå¡å…¥q, clientç«¯éœ€è¦æœ‰èƒ½åŠ›ä¸é˜Ÿåˆ—äº¤äº’ï¼Œå¹¶å¤„ç†ä¸é˜Ÿåˆ—ç›¸å…³çš„é”™è¯¯ä¸å¼‚å¸¸ï¼Œè¿˜è¦è€ƒè™‘åªæœ‰åˆæ³•å®¢æˆ·ç«¯æ‰èƒ½å‘å¸ƒæ¶ˆæ¯åˆ°é˜Ÿåˆ—ã€‚</p>
<p>ç”±äºæ­¤å¤„çš„clientç«¯ä¸æ­¢ä¸€ä¸ªï¼Œå› æ­¤ç»´æŠ¤å¤šä¸ªclientç«¯ä¸é˜Ÿåˆ—é€šä¿¡è¾ƒä¸ºå¤æ‚ä¸”ä¸å®¹æ˜“ç»´æŠ¤ã€‚</p>
<p>å› æ­¤è¿™é‡Œé‡‡ç”¨çš„æ–¹æ³•æ˜¯ï¼š</p>
<p>clinetç«¯ç›´æ¥ä¸serviceç«¯äº¤äº’ï¼Œserviceç«¯æ¥æ”¶clientç«¯çš„httpè¯·æ±‚åï¼Œå°†attachmentå¡å…¥qä¸­ï¼Œç„¶åç«‹å³ç»™clientç«¯è¿”å›200ï¼ŒèŠ‚çœç­‰å¾…å¤„ç†çš„è¿‡ç¨‹ã€‚</p>
<p>clientåªéœ€è¦å…³æ³¨å¦‚ä½•æŠŠattachmentå‘é€ç»™serviceç«¯ï¼Œæ— éœ€çŸ¥é“é˜Ÿåˆ—çš„å­˜åœ¨ï¼Œä¸é˜Ÿåˆ—çš„æ“ä½œéƒ½ç”±serviceç«¯è´Ÿè´£ï¼Œèƒ½æ›´å¥½çš„æ§åˆ¶å’Œä¼˜åŒ–ä¸é˜Ÿåˆ—çš„æ“ä½œ</p>
<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><ol>
<li><p>åˆå§‹åŒ–</p>
<ul>
<li>æ•°æ®åº“</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—</li>
<li>ä¸»contenxtï¼ˆç”¨äºç›‘å¬ç»“æŸä¿¡å·ï¼‰</li>
</ul>
</li>
<li><p>å¯åŠ¨http server</p>
<ul>
<li><p>åˆ›å»ºginå®ä¾‹</p>
</li>
<li><p>å‘ginå®ä¾‹æ·»åŠ ä¸­é—´ä»¶ï¼šæ—¥å¿—è®°å½•å™¨ï¼Œæ¢å¤ä¸­é—´ä»¶ï¼ŒPrometheusè¯·æ±‚æŒ‡æ ‡å¤„ç†å™¨</p>
</li>
<li><p>æ³¨å†Œpprofè°ƒè¯•è·¯ç”±ï¼šå¯æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯</p>
</li>
<li><p>è®¾ç½®get, postç­‰æ–¹æ³•çš„å¤„ç†å‡½æ•° </p>
<p>æˆ–è€…åˆ›å»ºæ–°çš„è·¯ç”±ç»„ä¸‹çš„å¤„ç†å‡½æ•°</p>
</li>
<li><p>åˆ›å»ºhttpå®ä¾‹ï¼Œ è®¾ç½®è¯»å†™ï¼Œè¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå¹¶å°†ä¸Šé¢åˆ›å»ºçš„ginå®ä¾‹ä¼ å…¥handlerä¸­ï¼Œhandleræ˜¯æœåŠ¡å™¨å¯¹äºhttpè¯·æ±‚çš„å¤„ç†æ–¹å¼</p>
</li>
<li><p>ç”¨æ–°gouroutineå¯åŠ¨httpæœåŠ¡å™¨ï¼Œå› ä¸ºç›‘å¬httpè¯·æ±‚çš„ListenAndServeæ–¹æ³•æ˜¯é˜»å¡æ“ä½œï¼Œä¸å¸Œæœ›é˜»å¡ä¸»ç¨‹åº</p>
</li>
</ul>
</li>
<li><p>å½“æœ‰ç»ˆæ­¢ä¿¡å·æ—¶ï¼Œgraceful shutdown</p>
<p>æ–°åˆ›å»ºä¸€ä¸ªcontextï¼Œä¸€å®šæ—¶é—´åç»“æŸï¼ˆ10sï¼‰ï¼Œåœ¨è¿™æ—¶é—´å†…è¿˜èƒ½ç»§ç»­æ¥æ”¶è¯·æ±‚</p>
</li>
</ol>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>main.go</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;context&quot;</span></span><br><span class="line">	<span class="string">&quot;monitor-service/internal/config&quot;</span></span><br><span class="line">	<span class="string">&quot;monitor-service/internal/log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;os/signal&quot;</span></span><br><span class="line">	<span class="string">&quot;syscall&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-contrib/pprof&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	MainTraceId = <span class="string">&quot;main&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">serve</span><span class="params">()</span></span> *http.Server &#123;</span><br><span class="line">	gin.SetMode(gin.DebugMode)</span><br><span class="line"></span><br><span class="line">	router := gin.New()</span><br><span class="line">	router.Use(gin.Logger(), gin.Recovery())</span><br><span class="line"></span><br><span class="line">	pprof.Register(router)</span><br><span class="line"></span><br><span class="line">	router.GET(<span class="string">&quot;/&quot;</span>, welcome)</span><br><span class="line"></span><br><span class="line">	v1Root := router.Group(<span class="string">&quot;demo&quot;</span>)</span><br><span class="line">	monitorRoot := v1Root.Group(<span class="string">&quot;monitor&quot;</span>)</span><br><span class="line">	monitorRoot.POST(<span class="string">&quot;/upload&quot;</span>, upload)</span><br><span class="line"></span><br><span class="line">	srv := http.Server&#123;</span><br><span class="line">		Addr:         <span class="string">&quot;:80&quot;</span>,</span><br><span class="line">		Handler:      http.TimeoutHandler(router, <span class="number">10</span>*time.Second, <span class="string">`&#123;&quot;error&quot;: &quot;Handler timeout&quot;&#125;`</span>),</span><br><span class="line">		ReadTimeout:  <span class="number">10</span> * time.Second,</span><br><span class="line">		WriteTimeout: <span class="number">10</span> * time.Second,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">//ä¸»åŠ¨å…³é—­è¿æ¥ä¸ç®—err</span></span><br><span class="line">		<span class="keyword">if</span> err := srv.ListenAndServe(); err != <span class="literal">nil</span> &amp;&amp; err != http.ErrServerClosed &#123;</span><br><span class="line">			log.Errf(MainTraceId, <span class="string">&quot;Server Listen:%s&quot;</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &amp;srv</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	log.Infof(MainTraceId, <span class="string">&quot;%s: start main&quot;</span>, config.GetAppName())</span><br><span class="line"></span><br><span class="line">	<span class="comment">//start init</span></span><br><span class="line">	ctx, stop := signal.NotifyContext(context.Background(), syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT)</span><br><span class="line">	<span class="keyword">defer</span> stop()</span><br><span class="line"></span><br><span class="line">	<span class="comment">//end init</span></span><br><span class="line"></span><br><span class="line">	srv := serve()</span><br><span class="line"></span><br><span class="line">	&lt;-ctx.Done()</span><br><span class="line">	stop()</span><br><span class="line">	log.Info(MainTraceId, <span class="string">&quot;Shutdown Server....&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//graceful shutdown</span></span><br><span class="line">	ctx, cancle := context.WithTimeout(context.Background(), <span class="number">10</span>*time.Second)</span><br><span class="line">	<span class="keyword">defer</span> cancle()</span><br><span class="line">	<span class="keyword">if</span> err := srv.Shutdown(ctx); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Errf(MainTraceId, <span class="string">&quot;Server Shutdown:%s&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	log.Info(MainTraceId, <span class="string">&quot;Server Exit!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>handler.go</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">welcome</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.JSON(<span class="number">200</span>, gin.H&#123;<span class="string">&quot;result&quot;</span>: <span class="string">&quot;pong&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">upload</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">//<span class="doctag">TODO:</span> get file</span></span><br><span class="line">	c.JSON(<span class="number">200</span>, gin.H&#123;<span class="string">&quot;code&quot;</span>: <span class="string">&quot;200&quot;</span>, <span class="string">&quot;message&quot;</span>: <span class="string">&quot;OK&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h3><h4 id="makefile"><a href="#makefile" class="headerlink" title="makefile"></a>makefile</h4><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">BUILDNO=10000</span><br><span class="line">BUILD_TIME:=<span class="variable">$(<span class="built_in">shell</span> date)</span></span><br><span class="line">APPNAMESERVER=server</span><br><span class="line"></span><br><span class="line">DIR_CUR := <span class="variable">$(<span class="built_in">dir</span> $(<span class="built_in">realpath</span> $(<span class="built_in">firstword</span> <span class="variable">$(MAKEFILE_LIST)</span>)</span>))</span><br><span class="line">DOCKERDIR=<span class="variable">$(DIR_CUR)</span>/docker</span><br><span class="line">OUTPUTBINSERVER=<span class="variable">$(DOCKERDIR)</span>/server/<span class="variable">$(APPNAMESERVER)</span></span><br><span class="line"></span><br><span class="line">GOOS=linux</span><br><span class="line">GOARCH=amd64</span><br><span class="line">GO=go</span><br><span class="line">GOARGS_LD_FLAGS=-X <span class="string">&quot;main.BuildNumber=<span class="variable">$(BUILDNO)</span>&quot;</span> -X <span class="string">&quot;main.BuildTime=<span class="variable">$(BUILD_TIME)</span>&quot;</span></span><br><span class="line">GOARGS_BUILD_SERVER=build -v -o <span class="variable">$(OUTPUTBINSERVER)</span> -ldflags &#x27;<span class="variable">$(GOARGS_LD_FLAGS)</span>&#x27;</span><br><span class="line">GOVER=<span class="variable">$(<span class="built_in">shell</span> <span class="variable">$(GO)</span> version)</span></span><br><span class="line"></span><br><span class="line">BUILDER_IMAGE=golang</span><br><span class="line">BUILDER_TAG=1.12</span><br><span class="line"></span><br><span class="line"><span class="section">all: build</span></span><br><span class="line"></span><br><span class="line"><span class="section">build:</span></span><br><span class="line">	@echo <span class="string">&quot;===&gt; Build <span class="variable">$(APPNAMESERVER)</span> with <span class="variable">$(GOVER)</span>&quot;</span></span><br><span class="line">	(cd src; CGO_ENABLED=0 GOOS=<span class="variable">$(GOOS)</span> GOARCH=<span class="variable">$(GOARCH)</span> <span class="variable">$(GO)</span> <span class="variable">$(GOARGS_BUILD_SERVER)</span> monitor-service/cmd/server)</span><br><span class="line"></span><br><span class="line"><span class="section">docker: build</span></span><br><span class="line">	docker build -f docker/server/Dockerfile ./docker/server -t monitor-service:latest</span><br><span class="line"></span><br><span class="line"><span class="section">run:</span></span><br><span class="line">	docker run -p 8080:80 --rm monitor-service</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm -rf <span class="variable">$(OUTPUTBINSERVER)</span></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: clean build test run docker</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h4><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> amazonlinux:<span class="number">2023</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum update -y &amp;&amp; yum clean all</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> server /</span></span><br><span class="line"><span class="keyword">ENV</span> LOGLEVEL=DEBUG</span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;/server&quot;</span>]</span></span><br></pre></td></tr></table></figure>



<h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><ul>
<li>make docker<ol>
<li>æ‰§è¡Œgo build</li>
<li>docker build -f docker&#x2F;server&#x2F;Dockerfile .&#x2F;docker&#x2F;server -t monitor-service:latest</li>
</ol>
</li>
<li>make run<ul>
<li>æ‰§è¡Œdocker run -p 8080:80 â€“rm monitor-service</li>
</ul>
</li>
</ul>
<h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><h4 id="è‡ªå®šä¹‰æ—¥å¿—ç”Ÿæˆå™¨"><a href="#è‡ªå®šä¹‰æ—¥å¿—ç”Ÿæˆå™¨" class="headerlink" title="è‡ªå®šä¹‰æ—¥å¿—ç”Ÿæˆå™¨"></a>è‡ªå®šä¹‰æ—¥å¿—ç”Ÿæˆå™¨</h4><h5 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h5><p>æ ¼å¼åŒ–logè¾“å‡ºä¸ºï¼š<u>[æ—¶é—´ appåå­— logçº§åˆ«åç§° id]æ–‡ä»¶å:è¡Œæ•°, logå†…å®¹</u></p>
<p>[2023&#x2F;12&#x2F;05 06.01.32.576361,,Infof,main]server.go:53, monitor: start main</p>
<h5 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h5><ul>
<li><p>æŒ‰ç…§logçº§åˆ«è®¾ç½®è‡ªå®šä¹‰çš„log</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	LogLevelErr LogLevel = <span class="literal">iota</span></span><br><span class="line">	LogLevelWarn</span><br><span class="line">	LogLevelInfo</span><br><span class="line">	LogLevelDebug</span><br><span class="line"></span><br><span class="line">	defaultLogLevel = LogLevelDebug</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> logLevelName = <span class="keyword">map</span>[LogLevel]<span class="type">string</span>&#123;</span><br><span class="line">	LogLevelErr:   <span class="string">&quot;Errf&quot;</span>,</span><br><span class="line">	LogLevelWarn:  <span class="string">&quot;Warnf&quot;</span>,</span><br><span class="line">	LogLevelInfo:  <span class="string">&quot;Infof&quot;</span>,</span><br><span class="line">	LogLevelDebug: <span class="string">&quot;Debugf&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>å½“æ˜¯å¯¹åº”çš„logçº§åˆ«å°±è°ƒç”¨ç»Ÿä¸€çš„output logå‡½æ•°</p>
<p>æ ¹æ®formatçš„logä¸ºï¼š <u>[æ—¶é—´ appåå­— logçº§åˆ«åç§° id]æ–‡ä»¶å:è¡Œæ•°, logå†…å®¹</u></p>
<p>å…¶ä¸­</p>
<ol>
<li><p>æ—¶é—´ï¼štime.Now().UTC().Format(timeFormat)</p>
</li>
<li><p>appåå­— logçº§åˆ«åç§° id ä»¥åŠlogå†…å®¹éƒ½å¯ä»¥é€šè¿‡è°ƒç”¨æ—¶å€™å‚æ•°ä¼ å…¥</p>
</li>
<li><p>file, lineéœ€è¦é€šè¿‡runtime.Caller(skip)æ‰¾åˆ°è°ƒç”¨æ ˆ,skipè¡¨ç¤ºè·³è¿‡å¤šå°‘å±‚ï¼Œè¿”å›é‚£å±‚ä¿¡æ¯</p>
<p>skip&#x3D;0è¡¨ç¤ºcallerè‡ªå·±, skip&#x3D;1å¯ä»¥ç›´åˆ°è°ƒç”¨è€…ï¼Œç”±äºè¿™é‡Œä¼šå¤šè°ƒç”¨äº†ä¸€å±‚outputï¼ˆskip&#x3D;1æ˜¯å¾—åˆ°outputä¿¡æ¯ï¼‰ï¼Œè¦æ‰¾åˆ°è°ƒç”¨outputå‡½æ•°çš„ä¿¡æ¯ï¼Œskipéœ€è¦ç­‰äº2</p>
<ul>
<li>å¦‚æœ <code>skip</code> ä¸º 0ï¼Œåˆ™è·å–å½“å‰å‡½æ•°ï¼ˆå³ Caller æ‰€åœ¨å‡½æ•°ï¼‰çš„ä¿¡æ¯ï¼›</li>
<li>å¦‚æœ <code>skip</code> ä¸º 1ï¼Œåˆ™è·å–è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°çš„ä¿¡æ¯ï¼›</li>
<li>å¦‚æœ <code>skip</code> ä¸º 2ï¼Œåˆ™è·å–è°ƒç”¨ä¸Šè¿°å‡½æ•°çš„å‡½æ•°çš„ä¿¡æ¯ï¼Œä¾æ­¤ç±»æ¨ã€‚</li>
</ul>
</li>
<li><p>æœ€ç»ˆé€šè¿‡fmt.Sprintfå°†formatå†…å®¹ç»„ç»‡èµ·æ¥ï¼Œé€šè¿‡os.Stdout.Writeè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºä¸Š</p>
</li>
</ol>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l *Logger)</span></span> output(level LogLevel, traceId, log <span class="type">string</span>) &#123;</span><br><span class="line">	<span class="comment">//æ‰¾å‡ºæ˜¯è°è°ƒç”¨äº†output(åœ¨è°ƒç”¨æ ˆä¸Šç§»åŠ¨çš„æ­¥æ•°), skip=0è¡¨ç¤ºcallerè‡ªå·±</span></span><br><span class="line">	skip := <span class="number">2</span></span><br><span class="line">	<span class="keyword">if</span> l == instance &#123;</span><br><span class="line">		skip++</span><br><span class="line">	&#125;</span><br><span class="line">	_, file, line, ok := runtime.Caller(skip)</span><br><span class="line">	<span class="keyword">if</span> ok &#123;</span><br><span class="line">		file = filepath.Base(file)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	s := fmt.Sprintf(logFormat, time.Now().UTC().Format(timeFormat), l.serviceName, logLevelName[level], traceId, file, line, log)</span><br><span class="line">	<span class="keyword">if</span> s[<span class="built_in">len</span>(s)<span class="number">-1</span>] != <span class="string">&#x27;\n&#x27;</span> &#123;</span><br><span class="line">		s = s + <span class="string">&quot;\n&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å°†logå†™åˆ°æ ‡å‡†è¾“å‡º</span></span><br><span class="line">	_, err := os.Stdout.Write([]<span class="type">byte</span>(s))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Fprintf(os.Stderr, <span class="string">&quot;Write log error: %s&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h5><p>docker run -p 8080:80 â€“rm monitor-service<br>[2023&#x2F;12&#x2F;05 06.01.32.576361,,Infof,main]server.go:53, monitor: start main</p>
<h4 id="è‡ªå®šä¹‰gin-logæ—¥å¿—ç”Ÿæˆå™¨"><a href="#è‡ªå®šä¹‰gin-logæ—¥å¿—ç”Ÿæˆå™¨" class="headerlink" title="è‡ªå®šä¹‰gin logæ—¥å¿—ç”Ÿæˆå™¨"></a>è‡ªå®šä¹‰gin logæ—¥å¿—ç”Ÿæˆå™¨</h4><h5 id="æè¿°-1"><a href="#æè¿°-1" class="headerlink" title="æè¿°"></a>æè¿°</h5><p>giné»˜è®¤çš„logç”Ÿæˆçš„æ—¥å¿—å¦‚ä¸‹</p>
<p>[GIN] 2023&#x2F;12&#x2F;05 - 06:19:06 | 200 |        47.2Âµs |      172.17.0.1 | POST     â€œ&#x2F;demo&#x2F;monitor&#x2F;uploadâ€</p>
<h5 id="gin-Logger-æºç "><a href="#gin-Logger-æºç " class="headerlink" title="gin.Logger()æºç "></a>gin.Logger()æºç </h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(c *Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// Start timer</span></span><br><span class="line">		start := time.Now()</span><br><span class="line">		path := c.Request.URL.Path</span><br><span class="line">		raw := c.Request.URL.RawQuery</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Process request</span></span><br><span class="line">		c.Next()</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Log only when path is not being skipped</span></span><br><span class="line">		<span class="keyword">if</span> _, ok := skip[path]; !ok &#123;</span><br><span class="line">			param := LogFormatterParams&#123;</span><br><span class="line">				Request: c.Request,</span><br><span class="line">				isTerm:  isTerm,</span><br><span class="line">				Keys:    c.Keys,</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Stop timer</span></span><br><span class="line">			param.TimeStamp = time.Now()</span><br><span class="line">			param.Latency = param.TimeStamp.Sub(start)</span><br><span class="line"></span><br><span class="line">			param.ClientIP = c.ClientIP()</span><br><span class="line">			param.Method = c.Request.Method</span><br><span class="line">			param.StatusCode = c.Writer.Status()</span><br><span class="line">			param.ErrorMessage = c.Errors.ByType(ErrorTypePrivate).String()</span><br><span class="line"></span><br><span class="line">			param.BodySize = c.Writer.Size()</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> raw != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">				path = path + <span class="string">&quot;?&quot;</span> + raw</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			param.Path = path</span><br><span class="line"></span><br><span class="line">			fmt.Fprint(out, formatter(param))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h5 id="æ”¹é€ "><a href="#æ”¹é€ " class="headerlink" title="æ”¹é€ "></a>æ”¹é€ </h5><p>æŒ‰ç…§gin.Logger()æºç ï¼Œä½¿ç”¨gin.LogFormatterParamså’Œè‡ªå®šä¹‰çš„logç”Ÿæˆå™¨ï¼Œå°†httpè¯·æ±‚çš„logå†…å®¹æŒ‰ç…§<u>å®¢æˆ·ç«¯ip  è¯·æ±‚æ–¹æ³• è¯·æ±‚è·¯å¾„ è¯·æ±‚åè®®ç‰ˆæœ¬ æœåŠ¡ç«¯è¿”å›ç»™å®¢æˆ·ç«¯çŠ¶æ€ç  å¤„ç†è¯·æ±‚æ—¶é—´ user-agentè¯·æ±‚å¤´å­—æ®µå†…å®¹ é”™è¯¯ä¿¡æ¯</u>æ ¼å¼ç»„ç»‡</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GinLogger</span><span class="params">()</span></span> gin.HandlerFunc &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		start := time.Now()</span><br><span class="line">		path := c.Request.URL.Path</span><br><span class="line">		raw := c.Request.URL.RawQuery</span><br><span class="line"></span><br><span class="line">		<span class="comment">//å¤„ç†ä¸‹ä¸€ä¸ªä¸­é—´ä»¶è¯·æ±‚</span></span><br><span class="line">		c.Next()</span><br><span class="line"></span><br><span class="line">		param := gin.LogFormatterParams&#123;</span><br><span class="line">			Request: c.Request,</span><br><span class="line">			Keys:    c.Keys,</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> raw != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">			path = path + <span class="string">&quot;?&quot;</span> + raw</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		param.ClientIP = c.ClientIP()</span><br><span class="line">		param.Method = c.Request.Method</span><br><span class="line">		param.Path = path</span><br><span class="line">		<span class="comment">// param.Request.Proto = c.Request.Proto</span></span><br><span class="line">		param.StatusCode = c.Writer.Status()</span><br><span class="line">		param.TimeStamp = time.Now()</span><br><span class="line">		param.Latency = param.TimeStamp.Sub(start)</span><br><span class="line">		param.ErrorMessage = c.Errors.ByType(gin.ErrorTypePrivate).String()</span><br><span class="line">		<span class="comment">// param.BodySize = c.Writer.Size()</span></span><br><span class="line"></span><br><span class="line">		log.Infof(<span class="string">&quot;gin-logger&quot;</span>, <span class="string">&quot;%s %s %s %s %d %s \&quot;%s\&quot; %s&quot;</span>, param.ClientIP, param.Method, param.Path, param.Request.Proto, param.StatusCode, param.Latency, param.Request.UserAgent(), param.ErrorMessage)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="ç»“æœ-1"><a href="#ç»“æœ-1" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h5><p>formatåçš„gin logå¦‚ä¸‹: </p>
<ul>
<li>æŒ‰ç…§<u>[æ—¶é—´ appåå­— logçº§åˆ«åç§° id]æ–‡ä»¶å:è¡Œæ•°, logå†…å®¹</u><ul>
<li>logå†…å®¹æŒ‰ç…§ <u>å®¢æˆ·ç«¯ip  è¯·æ±‚æ–¹æ³• è¯·æ±‚è·¯å¾„ è¯·æ±‚åè®®ç‰ˆæœ¬ æœåŠ¡ç«¯è¿”å›ç»™å®¢æˆ·ç«¯çŠ¶æ€ç  å¤„ç†è¯·æ±‚æ—¶é—´ user-agentè¯·æ±‚å¤´å­—æ®µå†…å®¹ é”™è¯¯ä¿¡æ¯</u></li>
</ul>
</li>
</ul>
<p>[2023&#x2F;12&#x2F;05 06.00.43.075511,,Infof,gin-logger]middleware.go:38, 172.17.0.1 GET &#x2F; HTTP&#x2F;1.1 200 51.3Âµs â€œcurl&#x2F;7.68.0â€<br>[2023&#x2F;12&#x2F;05 06.00.47.551118,,Infof,gin-logger]middleware.go:38, 172.17.0.1 POST &#x2F;demo&#x2F;monitor&#x2F;upload HTTP&#x2F;1.1 200 35.9Âµs â€œcurl&#x2F;7.68.0â€</p>
<h3 id="ç»“æœ-2"><a href="#ç»“æœ-2" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><ul>
<li>æµ‹è¯•å‘½ä»¤ï¼šcurl -X GET localhost:8080&#x2F;</li>
</ul>
<p>æ˜¾ç¤ºï¼š{â€œresultâ€:â€pongâ€}</p>
<ul>
<li>curl -X POST localhost:8080&#x2F;demo&#x2F;monitor&#x2F;upload -H â€˜X-Trace-Id: 123â€™ -F â€˜file&#x3D;@â€test.txtâ€â€˜</li>
</ul>
<p>æ˜¾ç¤ºï¼š{â€œcodeâ€:â€200â€,â€messageâ€:â€OKâ€}</p>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>service</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨goæ­å»ºä¸€ä¸ªå®šæ—¶ä»»åŠ¡</title>
    <url>/cronjob/</url>
    <content><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><ul>
<li><p>é—®é¢˜æè¿°ï¼š</p>
<ol>
<li>éœ€è¦æœ‰ä¸€ä¸ªå®šæ—¶ä»»åŠ¡å»dnsä¸ŠæŸ¥è¯¢ç”¨æˆ·çš„é…ç½®ä¿¡æ¯</li>
<li>æŸ¥è¯¢å®Œæˆåéœ€è¦ä¿å­˜åˆ°dbä¸­è®©uiæ¥æ˜¾ç¤º</li>
</ol>
</li>
<li><p>ä½¿ç”¨å®šæ—¶ä»»åŠ¡å¤„ç†å®æ—¶æ€§æ²¡æœ‰å¾ˆé«˜çš„ä»»åŠ¡</p>
<p>åŸå› ï¼š dnsçš„ä¼ æ’­æ—¶é—´ä¸ºå‡ åˆ†é’Ÿåˆ°72å°æ—¶ï¼Œæ‰€ä»¥æŸ¥è¯¢dnsçš„é…ç½®å¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥ä½¿ç”¨å®šæ—¶ä»»åŠ¡</p>
</li>
</ul>
<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>1.åˆå§‹åŒ–æ•°æ®åº“ä»¥åŠé…ç½®æ–‡ä»¶å‚æ•°ç­‰</p>
<p>2.å¯åŠ¨è‡ªåŠ¨æ›´æ–°</p>
<h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><p>è®¾ç½®deploy.ymlä¸­çš„scheduleä¸ºä¸€å°æ—¶æ›´æ–°ä¸€æ¬¡</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CronJob</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">xxx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">schedule:</span> <span class="string">&quot;0 */1 * * *&quot;</span></span><br><span class="line"> <span class="attr">jobTemplate:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">ttlSecondsAfterFinished:</span> <span class="number">259200</span></span><br><span class="line">      <span class="attr">backoffLimit:</span> <span class="number">0</span></span><br><span class="line">      <span class="attr">template:</span></span><br><span class="line">        <span class="attr">spec:</span></span><br><span class="line">          <span class="attr">containers:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">xxx</span></span><br><span class="line">              <span class="attr">image:</span> <span class="string">xxx:&lt;IMAGE_TAG&gt;</span></span><br><span class="line">              <span class="attr">resources:</span></span><br><span class="line">                <span class="attr">requests:</span></span><br><span class="line">                  <span class="attr">memory:</span> <span class="string">512Mi</span></span><br><span class="line">                  <span class="attr">cpu:</span> <span class="string">&quot;0.5&quot;</span></span><br><span class="line">                <span class="attr">limits:</span></span><br><span class="line">                  <span class="attr">memory:</span> <span class="string">2048Mi</span></span><br><span class="line">                  <span class="attr">cpu:</span> <span class="string">&quot;2&quot;</span></span><br><span class="line">              <span class="attr">envFrom:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="attr">configMapRef:</span></span><br><span class="line">                    <span class="attr">name:</span> <span class="string">xxx-configmap</span></span><br><span class="line">              <span class="attr">env:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">REGION</span></span><br><span class="line">                  <span class="attr">valueFrom:</span></span><br><span class="line">                    <span class="attr">configMapKeyRef:</span></span><br><span class="line">                      <span class="attr">name:</span> <span class="string">xxx-configmap</span></span><br><span class="line">                      <span class="attr">key:</span> <span class="string">region</span></span><br><span class="line">          <span class="attr">restartPolicy:</span> <span class="string">Never</span></span><br></pre></td></tr></table></figure>



<h3 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h3><p><img src="/images/cronjob1.png"></p>
<h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><p>Deploy cron-job.yamlï¼škubectl apply -f cron-job.yaml</p>
<p>cron jobå¯ä»¥è‡ªåŠ¨æŸ¥è¯¢dnså¹¶ä¿å­˜åˆ°dbè¡¨ä¸­ï¼Œ uiä¸Šèƒ½æ˜¾ç¤ºå¯¹åº”dnsçš„å€¼</p>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>service</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoä½¿ç”¨é—®é¢˜</title>
    <url>/hexoDeploy/</url>
    <content><![CDATA[<h2 id="å¤šç”¨æˆ·åˆä½œéƒ¨ç½²åšå®¢ç½‘ç«™"><a href="#å¤šç”¨æˆ·åˆä½œéƒ¨ç½²åšå®¢ç½‘ç«™" class="headerlink" title="å¤šç”¨æˆ·åˆä½œéƒ¨ç½²åšå®¢ç½‘ç«™"></a>å¤šç”¨æˆ·åˆä½œéƒ¨ç½²åšå®¢ç½‘ç«™</h2><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><ul>
<li>hexo dçš„æ—¶å€™å¤šç”¨æˆ·ä¼šå­˜åœ¨è¦†ç›–commitçš„æƒ…å†µ</li>
</ul>
<p>ä½†æ˜¯å¦‚æœåŒæ—¶ç»´æŠ¤åšå®¢ç½‘ç«™ä¹Ÿæ²¡æœ‰æ„ä¹‰ï¼Œ å› ä¸ºhexo gæ˜¯æŠŠæœ¬åœ°ç”Ÿæˆçš„markdownæ–‡ä»¶è½¬æˆhtml, hexo dæ˜¯æŠŠä¿å­˜å†publicç›®å½•ä¸‹çš„ç”Ÿæˆçš„htmlç›¸å…³çš„æ–‡ä»¶ä¸Šä¼ åˆ°githubä¸Šå†è¿›è¡Œéƒ¨ç½²ï¼Œè¿™ä¸ªgithub repoåªæ˜¯ä¿å­˜äº†ä¸€äº›ç½‘é¡µèµ„æºã€‚</p>
<p>åšå®¢çš„åŸå§‹çš„markdownæ–‡ä»¶ä»¥åŠç›¸å…³é…ç½®æ‰æ˜¯é‡è¦çš„ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><ul>
<li>å› æ­¤ï¼Œä¸ºäº†èƒ½ç»´æŠ¤åšå®¢çš„æºæ–‡ä»¶ï¼ŒåŒæ—¶åœ¨æ›´æ–°åšå®¢å†…å®¹çš„æ—¶å€™èƒ½è‡ªåŠ¨éƒ¨ç½²ç½‘ç«™ä¸”ä¸è¦†ç›–å…¶ä»–äººçš„commit, å¯ä»¥åˆ©ç”¨github action</li>
</ul>
<h4 id="ä½¿ç”¨ci"><a href="#ä½¿ç”¨ci" class="headerlink" title="ä½¿ç”¨ci"></a>ä½¿ç”¨ci</h4><p>åšå®¢ç½‘ç«™ä¸ºrepo1ï¼š</p>
<p><a href="https://github.com/iamyeswc/iamyeswc.github.io">https://github.com/iamyeswc/iamyeswc.github.io</a></p>
<p>åšå®¢æºæ–‡ä»¶ä¸ºrepo2:</p>
<p><a href="https://github.com/iamyeswc/hexo-blog">https://github.com/iamyeswc/hexo-blog</a></p>
<p>å½“repo1æœ‰æäº¤åˆ°mainåˆ†æ”¯çš„æ—¶å€™å°±è‡ªåŠ¨è°ƒç”¨hexo g &amp; hexo dï¼Œç”Ÿæˆéƒ¨ç½²æ–‡ä»¶æäº¤åˆ°repo2</p>
<h4 id="ciè¿‡ç¨‹é‡åˆ°çš„é—®é¢˜"><a href="#ciè¿‡ç¨‹é‡åˆ°çš„é—®é¢˜" class="headerlink" title="ciè¿‡ç¨‹é‡åˆ°çš„é—®é¢˜"></a>ciè¿‡ç¨‹é‡åˆ°çš„é—®é¢˜</h4><ul>
<li><p>æ¯æ¬¡éƒ½è°ƒç”¨hexo gå®Œæˆåç›´æ¥hexo dï¼Œå¯¼è‡´æ¯æ¬¡éƒ½æ˜¯ä¼šåˆ›å»ºæ–°çš„commitæäº¤è€Œä¸æ˜¯åœ¨åŸå§‹repo2çš„åŸºç¡€ä¸Šcommit è¿½åŠ æ–°commit</p>
</li>
<li><p>å› æ­¤ï¼Œ ciè¿‡ç¨‹ï¼š</p>
<p>(åœ¨repo1çš„.github&#x2F;workflows&#x2F;ä¸‹é¢åˆ›å»ºhexo-deploy.ymlæ–‡ä»¶)</p>
<ol>
<li><p>checkout repo1</p>
</li>
<li><p>å®‰è£…å¿…è¦çš„ä¾èµ–ï¼šnode.js, hexo-cli, npm</p>
</li>
<li><p>buildç›®æ ‡æ–‡ä»¶</p>
<ul>
<li><p><input disabled="" type="checkbox"> 
å¯¼å…¥éƒ¨ç½²å¯†é’¥ï¼Œ ä½¿ç”¨ssh-keygenç”Ÿæˆçš„ç§é’¥ä¿å­˜åˆ°repo1çš„secretä¸­ï¼Œç”¨äºéªŒè¯éƒ¨ç½²çš„èº«ä»½</p>
<p><img src="/images/hexoCi1.png"></p>
</li>
<li><p><input disabled="" type="checkbox"> 
è°ƒç”¨hexo clean &amp; hexo gç”Ÿæˆç›®æ ‡éƒ¨ç½²æ–‡ä»¶</p>
<p>hexoçš„è¡Œä¸ºæ˜¯ï¼š éƒ¨ç½²çš„æ–‡ä»¶éƒ½å­˜åœ¨publicç›®å½•ä¸‹</p>
</li>
</ul>
</li>
<li><p>checkout repo2</p>
</li>
<li><p>éƒ¨ç½²åˆ°repo2</p>
<ul>
<li><input disabled="" type="checkbox"> æŠŠpublicä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½æ‹·è´åˆ°repo2ä¸‹</li>
<li><input disabled="" type="checkbox"> å¦‚æœæœ‰æ”¹åŠ¨å°±æäº¤åˆ°repo2çš„mainåˆ†æ”¯</li>
</ul>
</li>
</ol>
</li>
</ul>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span> <span class="comment"># å½“mainåˆ†æ”¯æœ‰æ–°çš„æ¨é€æ—¶æ‰§è¡Œæ­¤å·¥ä½œæµ</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span> <span class="comment"># å…è®¸æ‰‹åŠ¨è§¦å‘æ­¤å·¥ä½œæµ</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-and-deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">hexo-blog</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">14</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">deploy</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DEPLOY_KEY</span> <span class="string">&#125;&#125;</span> <span class="comment"># ä½¿ç”¨ä½ çš„éƒ¨ç½²å¯†é’¥</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir ~/.ssh/</span></span><br><span class="line"><span class="string">          echo &quot;$DEPLOY_KEY&quot; &gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">          git config --global user.name &#x27;iamyeswc&#x27;</span></span><br><span class="line"><span class="string">          git config --global user.email &#x27;iamyeswc@163.com&#x27;</span></span><br><span class="line"><span class="string">          hexo clean</span></span><br><span class="line"><span class="string">          hexo g</span></span><br><span class="line"><span class="string">          ls -al public</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">iamyeswc.github.io</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">repository:</span> <span class="string">iamyeswc/iamyeswc.github.io</span></span><br><span class="line">          <span class="attr">ssh-key:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">./iamyeswc.github.io</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">iamyeswc.github.io</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          cp -R public/* ./iamyeswc.github.io/</span></span><br><span class="line"><span class="string">          cd iamyeswc.github.io</span></span><br><span class="line"><span class="string">          if [ -n &quot;$(git status --porcelain)&quot; ]; then</span></span><br><span class="line"><span class="string">            git add .</span></span><br><span class="line"><span class="string">            git commit -m &quot;Site updated: $(date +&quot;%Y-%m-%d %H:%M:%S&quot;)&quot;</span></span><br><span class="line"><span class="string">            git push origin HEAD:main</span></span><br><span class="line"><span class="string">          else </span></span><br><span class="line"><span class="string">            echo &quot;No changes to commit&quot;</span></span><br><span class="line"><span class="string">          fi</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<h4 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h4><p>repo1èƒ½å¤ŸæˆåŠŸci:</p>
<p><img src="/images/hexoCi2.png"></p>
<p>repo2èƒ½å¤ŸæˆåŠŸéƒ¨ç½²ï¼š</p>
<p><img src="/images/hexoCi3.png"></p>
<h2 id="å¦‚ä½•æŠŠæœ¬åœ°çš„markdownè½¬æˆhexo-newåçš„æ–‡ä»¶"><a href="#å¦‚ä½•æŠŠæœ¬åœ°çš„markdownè½¬æˆhexo-newåçš„æ–‡ä»¶" class="headerlink" title="å¦‚ä½•æŠŠæœ¬åœ°çš„markdownè½¬æˆhexo newåçš„æ–‡ä»¶"></a>å¦‚ä½•æŠŠæœ¬åœ°çš„markdownè½¬æˆhexo newåçš„æ–‡ä»¶</h2><h3 id="é—®é¢˜-1"><a href="#é—®é¢˜-1" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>hexo newåçš„æ–‡ä»¶æœ‰title, tags, categories,date ç­‰ä¿¡æ¯ï¼Œ</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: hexoä½¿ç”¨é—®é¢˜</span><br><span class="line">tags: hexo</span><br><span class="line">categories: github action</span><br><span class="line">abbrlink: 14698</span><br><span class="line"><span class="section">date: 2023-12-01 10:04:11</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯æœ¬åœ°ç¼–å†™çš„markdownç¬”è®°å¹¶æ²¡æœ‰è¿™äº›å†…å®¹ï¼Œå› æ­¤å†™äº†è„šæœ¬å°†æœ¬åœ°çš„mdç¬”è®°æ‰¹é‡å¯¼å…¥åˆ°hexo postç›®å½•ä¸‹ï¼š</p>
<h3 id="è§£å†³æ–¹æ³•-1"><a href="#è§£å†³æ–¹æ³•-1" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><ol>
<li><p>è¾“å…¥old path: markdownç¬”è®°è·¯å¾„</p>
</li>
<li><p>è¾“å…¥new path: hexo postç›®å½•ï¼ˆhexo-blog&#x2F;source&#x2F;_postsï¼‰</p>
</li>
<li><p>éå†old pathä¸‹çš„æ‰€æœ‰markdownæ–‡ä»¶</p>
<ul>
<li><p>æ¯ä¸ªæ–‡ä»¶éœ€è¦æç¤ºè¾“å…¥categorieså’Œtags</p>
</li>
<li><p>è·å–æ—§æ–‡ä»¶çš„ä½œä¸ºæ–°æ–‡ä»¶çš„title</p>
</li>
<li><p>è·å–æ—§æ–‡ä»¶çš„ä¿®æ”¹æ—¥æœŸä½œä¸ºæ–°æ–‡ä»¶çš„date</p>
<p>(æ ¼å¼%Y-%m-%d %H:%M:%S)</p>
</li>
<li><p>æŠŠä¸Šé¢çš„å†…å®¹è¾“å…¥åˆ°æ–°æ–‡ä»¶ä¸­ï¼Œ å¹¶æŠŠæ—§æ–‡ä»¶çš„markdownå†…å®¹è¿½åŠ è¿›å»</p>
</li>
</ul>
</li>
</ol>
<h4 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯·æ±‚ç”¨æˆ·è¾“å…¥æ—§çš„è·¯å¾„</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Please enter the old path:&quot;</span></span><br><span class="line"><span class="built_in">read</span> folder_path</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯·æ±‚ç”¨æˆ·è¾“å…¥æ–°çš„è·¯å¾„</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Please enter the new path:&quot;</span></span><br><span class="line"><span class="built_in">read</span> output_folder</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰Markdownæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$folder_path</span>&quot;</span>/*.md</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="comment"># è·å–æ–‡ä»¶å (ä¸åŒ…å«æ‰©å±•å)</span></span><br><span class="line">    filename=$(<span class="built_in">basename</span> <span class="string">&quot;<span class="variable">$file</span>&quot;</span> .md)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Please enter categories for <span class="variable">$filename</span>:&quot;</span></span><br><span class="line">    <span class="built_in">read</span> categories</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Please enter tags for <span class="variable">$filename</span>:&quot;</span></span><br><span class="line">    <span class="built_in">read</span> tags</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¥æœŸå’Œæ—¶é—´ï¼ˆä¸åŒ…å«å°æ•°ç§’ï¼‰</span></span><br><span class="line">    last_modified=$(<span class="built_in">date</span> -d @$(<span class="built_in">stat</span> -c %Y <span class="string">&quot;<span class="variable">$file</span>&quot;</span>) +<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment"># è¯»å–æ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜ (# å¼€å¤´çš„æ–‡å­—)</span></span><br><span class="line">    title=$(grep -m 1 <span class="string">&#x27;^# &#x27;</span> <span class="string">&quot;<span class="variable">$file</span>&quot;</span> | sed <span class="string">&#x27;s/^# //&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºæ–°çš„æ–‡ä»¶ï¼Œå†…å®¹æŒ‰ç…§æŒ‡å®šæ ¼å¼ç¼–å†™</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;---&quot;</span> &gt; <span class="string">&quot;<span class="variable">$output_folder</span>/<span class="variable">$filename</span>.md&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;title: <span class="variable">$filename</span>&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$output_folder</span>/<span class="variable">$filename</span>.md&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;tags: <span class="variable">$tags</span>&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$output_folder</span>/<span class="variable">$filename</span>.md&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;categories: <span class="variable">$categories</span>&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$output_folder</span>/<span class="variable">$filename</span>.md&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;date: <span class="variable">$last_modified</span>&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$output_folder</span>/<span class="variable">$filename</span>.md&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;---&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$output_folder</span>/<span class="variable">$filename</span>.md&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿½åŠ åŸå§‹æ–‡ä»¶çš„å†…å®¹åˆ°æ–°æ–‡ä»¶ä¸­</span></span><br><span class="line">    <span class="built_in">cat</span> <span class="string">&quot;<span class="variable">$file</span>&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$output_folder</span>/<span class="variable">$filename</span>.md&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="ç»“æœ-1"><a href="#ç»“æœ-1" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h4><p>hexo-blog&#x2F;source&#x2F;_postsç›®å½•ä¸‹æœ‰å¯¹åº”çš„æ–‡ä»¶</p>
]]></content>
      <categories>
        <category>github action</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨pprofå¯¹go http serviceè¿›è¡Œæ€§èƒ½åˆ†æ</title>
    <url>/pprof/</url>
    <content><![CDATA[<h2 id="ä»£ç åº”ç”¨"><a href="#ä»£ç åº”ç”¨" class="headerlink" title="ä»£ç åº”ç”¨"></a>ä»£ç åº”ç”¨</h2><p><strong>å‚è€ƒ</strong>ï¼š<a href="https://github.com/gin-contrib/pprof">https://github.com/gin-contrib/pprof</a></p>
<p>æŠŠpprofæŒ‚è½½åˆ°ginçš„è·¯ç”±å™¨ä¸‹æœ‰ä¸¤ç§æ–¹æ³•</p>
<ul>
<li>åœ¨ginçš„<code>è·Ÿè·¯ç”±</code>ä¸Šæ³¨å†Œpprofçš„è·¯ç”±<br>ä½¿ç”¨<code>pprof.Register(router)</code><br>ä¸‹é¢åˆ›å»ºçš„æœåŠ¡å™¨çš„è·¯ç”±æ˜¯<a href="http://localhost/ui/test/">http://localhost:80/ui/test/</a>â€¦<br>åˆ™å¯ä»¥é€šè¿‡<a href="http://localhost/debug/pprof/%E6%9D%A5%E8%AE%BF%E9%97%AEpprof%E9%A6%96%E9%A1%B5">http://localhost:80/debug/pprof/æ¥è®¿é—®pprofé¦–é¡µ</a></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">router := gin.New()</span><br><span class="line">router.Use(mw.GinLogger(), gin.Recovery(), mw.PromRequestMetricHandler())</span><br><span class="line">pprof.Register(router)</span><br><span class="line">uiRoot := router.Group(&quot;ui&quot;)</span><br><span class="line">testRoot := uiRoot.Group(&quot;test&quot;)</span><br><span class="line">testRoot .POST(&quot;ruareport&quot;, upload)</span><br><span class="line">testRoot .GET(&quot;healthy&quot;, checkHealthy)</span><br><span class="line"></span><br><span class="line">srv := http.Server&#123;</span><br><span class="line">Addr:         &quot;:80&quot;,</span><br><span class="line">Handler:      http.TimeoutHandler(router, conf.GetConnTimeout(), `&#123;&quot;error&quot;: &quot;Handler Timeout.&quot;&#125;`),</span><br><span class="line">ReadTimeout:  10 * time.Second,</span><br><span class="line">WriteTimeout: conf.GetConnTimeout(),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ginçš„<code>æŒ‡å®šè·¯ç”±</code>ä¸Šæ³¨å†Œpprofçš„è·¯ç”±<br>ä½¿ç”¨<code>pprof.Register(router)</code><br>ä¸‹é¢åˆ›å»ºçš„æœåŠ¡å™¨çš„è·¯ç”±æ˜¯<a href="http://localhost/ui/test/">http://localhost:80/ui/test/</a>â€¦, pprofçš„è·¯ç”±æŒ‚è½½åœ¨äº†testè·¯ç”±ä¸‹<br>åˆ™éœ€è¦é€šè¿‡<a href="http://localhost/test/debug/pprof/%E6%9D%A5%E8%AE%BF%E9%97%AEpprof%E9%A6%96%E9%A1%B5">http://localhost:80/test/debug/pprof/æ¥è®¿é—®pprofé¦–é¡µ</a></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">router := gin.New()</span><br><span class="line">router.Use(mw.GinLogger(), gin.Recovery(), mw.PromRequestMetricHandler())</span><br><span class="line">uiRoot := router.Group(&quot;ui&quot;)</span><br><span class="line">pprof.RouteRegister(v1Root)</span><br><span class="line">testRoot := uiRoot.Group(&quot;test&quot;)</span><br><span class="line">testRoot .POST(&quot;ruareport&quot;, upload)</span><br><span class="line">testRoot .GET(&quot;healthy&quot;, checkHealthy)</span><br><span class="line"></span><br><span class="line">srv := http.Server&#123;</span><br><span class="line">Addr:         &quot;:80&quot;,</span><br><span class="line">Handler:      http.TimeoutHandler(router, conf.GetConnTimeout(), `&#123;&quot;error&quot;: &quot;Handler Timeout.&quot;&#125;`),</span><br><span class="line">ReadTimeout:  10 * time.Second,</span><br><span class="line">WriteTimeout: conf.GetConnTimeout(),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>pprofçš„è·¯ç”±ï¼š</p>
<p>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;             â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapF.func1 (4 handlers)<br>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;cmdline      â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapF.func1 (4 handlers)<br>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;profile      â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapF.func1 (4 handlers)<br>[GIN-debug] POST   &#x2F;debug&#x2F;pprof&#x2F;symbol       â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapF.func1 (4 handlers)<br>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;symbol       â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapF.func1 (4 handlers)<br>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;trace        â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapF.func1 (4 handlers)<br>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;allocs       â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapH.func1 (4 handlers)<br>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;block        â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapH.func1 (4 handlers)<br>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;goroutine    â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapH.func1 (4 handlers)<br>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;heap         â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapH.func1 (4 handlers)<br>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;mutex        â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapH.func1 (4 handlers)<br>[GIN-debug] GET    &#x2F;debug&#x2F;pprof&#x2F;threadcreate â€“&gt; github.com&#x2F;gin-gonic&#x2F;gin.WrapH.func1 (4 handlers)</p>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>service</tag>
      </tags>
  </entry>
  <entry>
    <title>CVEç‰ˆæœ¬</title>
    <url>/cveVersion/</url>
    <content><![CDATA[<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>CVE æ˜¯ é€šç”¨æ¼æ´æŠ«éœ² (Common Vulnerabilities and Exposures)çš„è‹±æ–‡ç¼©å†™ï¼Œåˆ—å‡ºäº†å·²å…¬å¼€çš„å„ç§è®¡ç®—æœºç¼ºé™·ï¼Œæ¯ä¸€ä¸ªCVEåŒ…æ‹¬CVE ID(ä¾‹å¦‚:CVE-2019-1234567â€)ã€å®‰å…¨æ¼æ´çš„æè¿°å’Œç›¸å…³å‚è€ƒèµ„æ–™ã€‚</p>
<p>Linux kernelåŒ…å«äº†å¾ˆå¤šä¸ªå‘è¡Œç‰ˆæœ¬ï¼Œæ¯”å¦‚6.x.y,5.x.y,4.x.y,3.x.yç­‰ä¸åŒåˆ†æ”¯çš„å‘è¡Œç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬å‘è¡Œåéƒ½å¯èƒ½ä¼šæœ‰å®‰å…¨ç¼ºé™·ã€‚ç°åœ¨éœ€è¦å†™ä¸€ä¸ªç¨‹åºæ¥ç»Ÿè®¡æŸä¸€ä¸ªç‰¹å®šLinux kernelç‰ˆæœ¬å­˜åœ¨å“ªäº›å®‰å…¨ç¼ºé™·(CVE)ï¼Œå¹¶æŒ‰ç…§ä¸¥é‡ç¨‹åº¦çš„åˆ†æ•°ä»é«˜åˆ°ä½è¾“å‡ºã€‚</p>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>è¾“å…¥1:Linux kernelçš„CVEä¿¡æ¯ï¼Œå‡å®šæ¯æ¡CVE ä¿¡æ¯å†…å®¹æ ¼å¼å¦‚ä¸‹: CVE ID#CVE Score#å½±å“çš„ç‰ˆæœ¬èŒƒå›´#ä¿®å¤çš„ç‰ˆæœ¬</p>
<p>å…¶ä¸­CVE IDæ ¼å¼â€œCVE-2019-1234567â€</p>
<p>å‡å¦‚CVE Scoreæ˜¯0åˆ°1000çš„æ•´æ•°<br>å½±å“çš„ç‰ˆæœ¬èŒƒå›´â€œèµ·å§‹ç‰ˆæœ¬-æœ€åç‰ˆæœ¬â€<br>ä¿®å¤çš„ç‰ˆæœ¬å…·ä½“ä¿®å¤çš„æŸäº›ç‰ˆæœ¬å·ï¼Œå¦‚æœ‰å¤šä¸ªç‰ˆæœ¬ç”¨;éš”å¼€</p>
<p>æ¯”å¦‚:</p>
<p>CVE-2021-3744#55#4.12.0-5.15.0#4.14.249;5.14.10;5.4.141</p>
<p>CVE-2022-4382#64#5.3.0-6.2.0#5.10.165;5.4.230;6.1.8</p>
<p>CVE-2023-0469#56#5.19.0-6.1.5#6.0.11</p>
<p>â€¦â€¦</p>
<p>è¾“å…¥2: éœ€è¦æŸ¥è¯¢çš„Linux kernelçš„ç‰ˆæœ¬å·ã€‚</p>
<p>æ¯”å¦‚: 6.1.4</p>
<p>è¾“å‡º:è¦çš„ç‰ˆæœ¬å—åˆ°å½±çš„CVE IDï¼Œå¹¶æŒ‰ç…§é‡ç¨‹åº¦çš„åˆ†æ•°ä»é«˜åˆ°ä½æ’åˆ—ã€‚</p>
<p>å¦‚:CVE-2022-4382,CVE-2023-0469</p>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>(1)CVE-2021-3744#55#4.12.0-5.15.0#4.14.249;5.14.10;5.4.141</p>
<p>è¡¨ç¤ºCVE IDæ˜¯CVE-2021-3744ï¼Œä¸¥é‡ç¨‹åº¦åˆ†æ•°55ï¼Œå—å½±çš„kernelç‰ˆæœ¬åŒ…å«ä»4.12.0åˆ°5.15.0ä¹‹çš„æ‰€æœ‰ç‰ˆæœ¬ï¼Œä¿®å¤çš„ç‰ˆæœ¬:4.14.249å’Œ5.14.10å’Œ5.4.141ä¸‰ä¸ªç‰ˆæœ¬ã€‚</p>
<p>(2)å½±å“çš„ç‰ˆæœ¬èŒƒå›´: æ¯”å¦‚4.12.0-5.15.0è¡¨ç¤º4.12.0å’Œ5.15.0ç‰ˆæœ¬æœ¬èº«ä»¥åŠä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„æ‰€æœ‰ç‰ˆæœ¬éƒ½å—å½±å“ï¼Œå…¶å®ƒçš„ç‰ˆæœ¬åˆ™éƒ½ä¸å—å½±å“ã€‚</p>
<p>ä¿®å¤çš„ç‰ˆæœ¬è¯´æ˜: æ¯”å¦‚CVE-2021-3744ä¿®å¤çš„ç‰ˆæœ¬4.14.249å’Œ5.14.10å’Œ5.4.141ä¸‰ä¸ªç‰ˆæœ¬ï¼Œ4.14.249è¡¨ç¤ºåœ¨4.14åˆ†æ”¯ä¸Šï¼Œ249å’Œ249ä»¥åçš„ç‰ˆæœ¬éƒ½ä¿®å¤äº†ï¼Œä½†æ˜¯åœ¨ 4.15&#x2F;5.*&#x2F;6.*ç­‰åˆ†æ”¯ä¸Šéœ€è¦çœ‹å…¶ä»–çš„å…·ä½“ä¿®å¤ç‰ˆæœ¬ä¿¡æ¯ã€‚</p>
<p>(3)å½±å“çš„ç‰ˆæœ¬å·ï¼Œä¿®å¤çš„ç‰ˆæœ¬å·ï¼Œç‰ˆæœ¬å·çš„æ ¼å¼:z.x.y(å…¶ä¸­zå¯èƒ½æ˜¯3&#x2F;4&#x2F;5&#x2F;6,xå’Œyå¤§äºç­‰äº0çš„ä»»æ„æ•´æ•°)ã€‚</p>
<p>(4)å‡å®šä¸¥é‡ç¨‹åº¦çš„åˆ†æ•°CVE Scoreçš„ä¸ä¼šé‡å¤ã€‚</p>
<p>(5)ç›®å‰è¾“å…¥1ä¸­æ²¡æœ‰è¾“å…¥å®Œæ•´çš„Linux kernelçš„CVEä¿¡æ¯ï¼Œå‡å®šæ¯ä¸ªcaseè¾“å…¥CVEä¿¡æ¯æ¡ç›®æ•°ä¸ä¼šè¶…1000ï¼Œæ¯æ¡ä¿¡æ¯å­—ç¬¦ä¸²çš„é•¿åº¦ä¸ä¼šè¶…1000ã€‚</p>
<h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>1.æŠŠè¾“å…¥å¾—cveå­—ç¬¦ä¸²è§£æåˆ°æ¯éƒ¨åˆ†ï¼š</p>
<p>Cveid</p>
<p>Cvescore</p>
<p>Kernelversion</p>
<p>Kernelpatchedversion</p>
<p>2.æ ¹æ®è¾“å…¥å¾—ç‰ˆæœ¬ï¼Œéå†ä¸Šé¢å¾—cveå­—ç¬¦ä¸²</p>
<p>éœ€è¦åœ¨å½±å“ç‰ˆæœ¬å†…ä½†æ˜¯ä¸èƒ½åœ¨fix ç‰ˆæœ¬ä¹‹å</p>
<ul>
<li>c++ç‰ˆæœ¬</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;tuple&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;sstream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">using CVE = tuple&lt;string, string, string&gt;;</span><br><span class="line">template &lt;typename Sequence, typename Seperator&gt;</span><br><span class="line">Sequence &amp;split(Sequence &amp;res, const string splitStr, const Seperator sep) &#123;</span><br><span class="line">	istringstream iss(splitStr);</span><br><span class="line">	// ä»issé‡Œè¯»æ•°æ®ï¼Œè¯»åˆ°sepçš„æ—¶å€™æ”¾åˆ°sä¸­</span><br><span class="line">	for (string s; getline(iss, s, sep);) &#123;</span><br><span class="line">		typename Sequence::value_type val;</span><br><span class="line">		istringstream isss(s);</span><br><span class="line">		isss &gt;&gt; val;</span><br><span class="line">		// res.insert(res.end(), val);</span><br><span class="line">		res.push_back(val);</span><br><span class="line">	&#125;</span><br><span class="line">	return res;</span><br><span class="line">&#125;</span><br><span class="line">bool inFixed(string fixedVersion, string version) &#123;</span><br><span class="line">	vector&lt;string&gt; fixed;</span><br><span class="line">	split(fixed, fixedVersion, &#x27;;&#x27;);</span><br><span class="line">	vector&lt;int&gt; needCompare;</span><br><span class="line">	split(needCompare, version, &#x27;.&#x27;);</span><br><span class="line">	for (auto fix : fixed) &#123;</span><br><span class="line">		vector&lt;int&gt; tmpFix;</span><br><span class="line">		split(tmpFix, fix, &#x27;.&#x27;);</span><br><span class="line">		if (tmpFix[0] == needCompare[0] &amp;&amp; tmpFix[1] == needCompare[1] &amp;&amp; tmpFix[2] &lt;= needCompare[2]) &#123;</span><br><span class="line">			return true;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return false;</span><br><span class="line">&#125;</span><br><span class="line">bool inAffected(string affectedVersion, string version) &#123;</span><br><span class="line">	vector&lt;int&gt; start, end, needCompare;</span><br><span class="line">	vector&lt;string&gt; affected;</span><br><span class="line">	split(affected, affectedVersion, &#x27;-&#x27;);</span><br><span class="line">	split(start, affected[0], &#x27;.&#x27;);</span><br><span class="line">	split(end, affected[1], &#x27;.&#x27;);</span><br><span class="line">	split(needCompare, version, &#x27;.&#x27;);</span><br><span class="line">	return start &lt;= needCompare &amp;&amp; needCompare &lt;= end;</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;string&gt; solution(vector&lt;string&gt; str, string version) &#123;</span><br><span class="line">	map&lt;int, CVE&gt; testCVE;</span><br><span class="line">	for (auto s : str) &#123;</span><br><span class="line">		vector&lt;string&gt; item;</span><br><span class="line">		split(item, s, &#x27;#&#x27;);</span><br><span class="line">		string id = item[0];</span><br><span class="line">		int score = stoi(item[1]);</span><br><span class="line">		string ver = item[2];</span><br><span class="line">		string fix = item[3];</span><br><span class="line">		testCVE[score] = make_tuple(id, ver, fix);</span><br><span class="line">	&#125;</span><br><span class="line">	// åå‘ï¼š rbegin, rend</span><br><span class="line">	// map æœ‰åº</span><br><span class="line">	vector&lt;string&gt; res;</span><br><span class="line">	for (auto iter = testCVE.rbegin(); iter != testCVE.rend(); iter++) &#123;</span><br><span class="line">		if (inAffected(get&lt;1&gt;(iter-&gt;second), version) &amp;&amp; !inFixed(get&lt;2&gt;(iter-&gt;second), version)) &#123;</span><br><span class="line">			res.push_back(get&lt;0&gt;(iter-&gt;second));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return res;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">	vector&lt;string&gt; str = &#123;</span><br><span class="line">		&quot;CVE-2021-3744#55#4.12.0-5.15.0#4.14.249;5.14.10;5.4.141&quot;,</span><br><span class="line">		                          &quot;CVE-2022-4382#64#5.3.0-6.2.0#5.10.165;5.4.230;6.1.8&quot;,</span><br><span class="line">		                          &quot;CVE-2023-0469#56#5.19.0-6.1.5#6.0.11&quot;</span><br><span class="line">	&#125;</span><br><span class="line">	;</span><br><span class="line">	string testVersion = &quot;6.1.4&quot;;</span><br><span class="line">	vector&lt;string&gt; res = solution(str, testVersion);</span><br><span class="line">	for (auto v : res) &#123;</span><br><span class="line">		cout &lt;&lt; v &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>goç‰ˆæœ¬</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;sort&quot;</span><br><span class="line">	&quot;strconv&quot;</span><br><span class="line">	&quot;strings&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type CVE struct &#123;</span><br><span class="line">	ID      string</span><br><span class="line">	Score   int</span><br><span class="line">	Version string</span><br><span class="line">	Fix     string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func split(splitStr string, sep string) []string &#123;</span><br><span class="line">	return strings.Split(splitStr, string(sep))</span><br><span class="line">&#125;</span><br><span class="line">func solution(testStr []string, testVersion string) []string &#123;</span><br><span class="line">	testCVE := []CVE&#123;&#125;</span><br><span class="line">	for _, val := range testStr &#123;</span><br><span class="line">		datapart := split(val, &quot;#&quot;)</span><br><span class="line">		id := datapart[0]</span><br><span class="line">		score, _ := strconv.Atoi(datapart[1])</span><br><span class="line">		version := datapart[2]</span><br><span class="line">		fix := datapart[3]</span><br><span class="line">		testCVE = append(testCVE, CVE&#123;id, score, version, fix&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">	sort.Slice(testCVE, func(i, j int) bool &#123;</span><br><span class="line">		return testCVE[i].Score &gt; testCVE[j].Score</span><br><span class="line">	&#125;)</span><br><span class="line">	res := []string&#123;&#125;</span><br><span class="line">	for _, val := range testCVE &#123;</span><br><span class="line">		iter := val</span><br><span class="line">		if inAffected(iter.Version, testVersion) &amp;&amp; !inFixed(iter.Fix, testVersion) &#123;</span><br><span class="line">			res = append(res, iter.ID)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return res</span><br><span class="line">&#125;</span><br><span class="line">func inFixed(version, testVersion string) bool &#123;</span><br><span class="line">	datapart := split(version, &quot;;&quot;)</span><br><span class="line">	test := split(testVersion, &quot;.&quot;)</span><br><span class="line">	for _, val := range datapart &#123;</span><br><span class="line">		num := val</span><br><span class="line">		numpart := split(num, &quot;.&quot;)</span><br><span class="line">		if numpart[0] == test[0] &amp;&amp; numpart[1] == test[1] &#123;</span><br><span class="line">			tmp1, _ := strconv.Atoi(numpart[2])</span><br><span class="line">			tmp2, _ := strconv.Atoi(test[2])</span><br><span class="line">			if tmp1 &lt;= tmp2 &#123;</span><br><span class="line">				return true</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return false</span><br><span class="line">&#125;</span><br><span class="line">func inAffected(version, testVersion string) bool &#123;</span><br><span class="line">	datapart := split(version, &quot;-&quot;)</span><br><span class="line">	start := split(datapart[0], &quot;.&quot;)</span><br><span class="line">	end := split(datapart[1], &quot;.&quot;)</span><br><span class="line">	test := split(testVersion, &quot;.&quot;)</span><br><span class="line">	for i := 0; i &lt; len(test); i++ &#123;</span><br><span class="line">		startNum, _ := strconv.Atoi(start[i])</span><br><span class="line">		endNum, _ := strconv.Atoi(end[i])</span><br><span class="line">		testNum, _ := strconv.Atoi(test[i])</span><br><span class="line">		if startNum &lt;= testNum &amp;&amp; testNum &lt;= endNum &#123;</span><br><span class="line">			return true</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return false</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">	testStr := []string&#123;</span><br><span class="line">		&quot;CVE-2021-3744#55#4.12.0-5.15.0#4.14.249;5.14.10;5.4.141&quot;,</span><br><span class="line">		&quot;CVE-2022-4382#64#5.3.0-6.2.0#5.10.165;5.4.230;6.1.8&quot;,</span><br><span class="line">		&quot;CVE-2023-0469#56#5.19.0-6.1.5#6.0.11&quot;,</span><br><span class="line">	&#125;</span><br><span class="line">	res := solution(testStr, &quot;6.1.4&quot;)</span><br><span class="line">	for _, val := range res &#123;</span><br><span class="line">		fmt.Println(val)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>string</tag>
      </tags>
  </entry>
  <entry>
    <title>ç›¸åŒé•¿åº¦çš„è½¨é“</title>
    <url>/sameLengthTrack/</url>
    <content><![CDATA[<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>æ‚¨æ­£åœ¨åˆ¶ä½œä¸¤æ¡è½¨é“å¹¶å¸Œæœ›å®ƒä»¬å…·æœ‰æœ€å¤§é•¿åº¦ï¼Œå¹¶ä¸”ä¸¤æ¡è½¨é“çš„é•¿åº¦å¿…é¡»ç›¸ç­‰ã€‚ ç°åœ¨ï¼Œæ‚¨æœ‰ä¸€å †å¯ä»¥ç„Šæ¥åœ¨ä¸€èµ·çš„é’¢ç­‹ï¼Œé’¢ç­‹æ— æ³•åˆ‡å‰²ï¼Œä½†å¹¶éæ‰€æœ‰é’¢ç­‹éƒ½éœ€è¦åœ¨æ­¤è¿‡ç¨‹ä¸­è€—å°½ã€‚<br>Â <br>ä¾‹å¦‚ï¼Œå¦‚æœé’¢ç­‹çš„é•¿åº¦ä¸º 1ã€2 å’Œ 3ï¼Œåˆ™å¯ä»¥å°†å®ƒä»¬ç„Šæ¥åœ¨ä¸€èµ·ä»¥å½¢æˆé•¿åº¦ä¸º 6 çš„æ”¯æ’‘ã€‚ï¼ˆå•ä½ä¸ºç±³ã€‚ï¼‰<br>Â <br>è¿”å›è½¨é“çš„æœ€å¤§å¯èƒ½é•¿åº¦ï¼Œå¦‚æœæ— æ³•åˆ›å»ºè½¨é“ï¼Œåˆ™è¿”å› 0ã€‚</p>
<h2 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h2><ul>
<li>è¾“å…¥ï¼š[1,2,3,6]</li>
<li>è¾“å‡ºï¼š6</li>
<li>è§£é‡Šï¼šæˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸ç›¸äº¤çš„å­é›† {1,2,3} å’Œ {6}ï¼Œå®ƒä»¬çš„å’Œä¸ 6 ç›¸åŒã€‚</li>
</ul>
<h2 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h2><ul>
<li>è¾“å…¥ï¼š[1,2,3,4,5,6]</li>
<li>è¾“å‡ºï¼š10</li>
<li>è§£é‡Šï¼šæˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸ç›¸äº¤çš„å­é›† {2,3,5} å’Œ {4,6}ï¼Œå®ƒä»¬çš„å’Œä¸ 10 ç›¸åŒï¼Œå¹¶ä¸”ç•™ä¸‹äº†é•¿åº¦ä¸º 1 çš„æ¡ã€‚</li>
</ul>
<h2 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h2><ul>
<li><p>è¾“å…¥ï¼š[1,2]</p>
</li>
<li><p>è¾“å‡ºï¼š0</p>
</li>
<li><p>è¯´æ˜ï¼šæ— æ³•åˆ›å»ºè½¨è¿¹ï¼Œå› æ­¤è¿”å›0ã€‚</p>
<p>ä½†ç¬¬ä¸‰å¤©åï¼Œä»“åº“ 1 å’Œ 2 éƒ½ä¼šå†æ¬¡é‡åˆ°è´§ç‰©å…¥åº“ï¼Œæ‰€ä»¥ä¸ç®¡æˆ‘ä»¬ç¬¬ä¸‰å¤©æ¸…ç©ºå“ªä¸ªä»“åº“ï¼Œå¦ä¸€ä¸ªä»“åº“éƒ½ä¼šå‘ç”Ÿçˆ†ä»“ã€‚</p>
</li>
</ul>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><ul>
<li>0 &lt;&#x3D; é’¢ç­‹é•¿åº¦ &lt;&#x3D; 140</li>
<li>1 &lt;&#x3D; é’¢ç­‹[i] &lt;&#x3D; 1000</li>
<li>æ€»å’Œ(é’¢ç­‹[i]) &lt;&#x3D; 5000</li>
</ul>
<h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><ul>
<li>c++ç‰ˆæœ¬</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;numeric&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">// 1,2,3,6 -&gt; 6</span><br><span class="line">// 1,2,3,4,5,6 -&gt; 10</span><br><span class="line">// 1,2 -&gt; 0</span><br><span class="line">// dp åˆ¤æ–­æ˜¯å¦èƒ½åˆ’åˆ†æˆä¸¤ä¸ªç›¸ç­‰çš„å­é›†</span><br><span class="line">bool canPartition(vector&lt;int&gt; nums) &#123;</span><br><span class="line">	// é•¿åº¦å°äº2è‚¯å®šä¸èƒ½åˆ’åˆ†</span><br><span class="line">	if (nums.size() &lt; 2)</span><br><span class="line">	        return false;</span><br><span class="line">	// å¦‚æœå’Œæ˜¯å¥‡æ•°ä¹Ÿä¸èƒ½è¢«åˆ’åˆ†</span><br><span class="line">	int sum = accumulate(nums.begin(), nums.end(), 0);</span><br><span class="line">	if (sum &amp; 1)</span><br><span class="line">	        return false;</span><br><span class="line">	// è®¡ç®—æœ€å¤§å€¼ï¼Œå¦‚æœæœ€å¤§å€¼å¤§äºå‡å€¼ï¼Œä¹Ÿä¸èƒ½è¢«åˆ’åˆ†</span><br><span class="line">	int max = *max_element(nums.begin(), nums.end());</span><br><span class="line">	int target = sum / 2;</span><br><span class="line">	if (max &gt; target)</span><br><span class="line">	        return false;</span><br><span class="line">	// dp[i][j]ä»0~ié‡Œé¢å–è‹¥å¹²æ•°çš„å’Œæ˜¯å¦ç­‰äºj</span><br><span class="line">	vector&lt;vector&lt;int&gt;&gt; dp(nums.size(), vector&lt;int&gt;(target + 1, 0));</span><br><span class="line">	for (int i = 0; i &lt; nums.size(); i++) &#123;</span><br><span class="line">		dp[i][0] = true;</span><br><span class="line">	&#125;</span><br><span class="line">	dp[0][nums[0]] = true;</span><br><span class="line">	// forå¾ªç¯iä»ç¬¬ä¸€ä¸ªå¼€å§‹</span><br><span class="line">	for (int i = 1; i &lt; nums.size(); i++) &#123;</span><br><span class="line">		int num = nums[i];</span><br><span class="line">		for (int j = 1; j &lt;= target; j++) &#123;</span><br><span class="line">			if (j &gt;= num) &#123;</span><br><span class="line">				dp[i][j] = dp[i - 1][j - 1] || dp[i - 1][j - num];</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				dp[i][j] = dp[i - 1][j - 1];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return dp[nums.size() - 1][target];</span><br><span class="line">&#125;</span><br><span class="line">int sameLengthStack(vector&lt;int&gt; nums) &#123;</span><br><span class="line">	int res = 0;</span><br><span class="line">	sort(nums.begin(), nums.end());</span><br><span class="line">	for (int i = 0; i &lt; nums.size(); i++) &#123;</span><br><span class="line">		vector&lt;int&gt; newNums;</span><br><span class="line">		// æ’åºåæ¯æ¬¡éƒ½å»æ‰æœ€å°çš„ï¼Œçœ‹æ˜¯å¦èƒ½åˆ’åˆ†æˆä¸¤ä¸ªç›¸ç­‰çš„å­é›†</span><br><span class="line">		newNums.assign(nums.begin() + i, nums.end());</span><br><span class="line">		bool isCanPartition = canPartition(newNums);</span><br><span class="line">		if (isCanPartition) &#123;</span><br><span class="line">			int sum = accumulate(newNums.begin(), newNums.end(), 0);</span><br><span class="line">			res = sum / 2;</span><br><span class="line">			return res;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return res;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">	vector&lt;int&gt; nums &#123;</span><br><span class="line">		1, 2</span><br><span class="line">	&#125;</span><br><span class="line">	;</span><br><span class="line">	int res = sameLengthStack(nums);</span><br><span class="line">	cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>goç‰ˆæœ¬</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;sort&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func IsCanPartition(nums []int) bool &#123;</span><br><span class="line">	if len(nums) &lt; 2 &#123;</span><br><span class="line">		return false</span><br><span class="line">	&#125;</span><br><span class="line">	sumNum := CalculateSum(nums)</span><br><span class="line">	if sumNum%2 != 0 &#123;</span><br><span class="line">		return false</span><br><span class="line">	&#125;</span><br><span class="line">	maxNum := nums[0]</span><br><span class="line">	for i := 1; i &lt; len(nums); i++ &#123;</span><br><span class="line">		num := nums[i]</span><br><span class="line">		if maxNum &lt; num &#123;</span><br><span class="line">			maxNum = num</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	if maxNum &gt; sumNum/2 &#123;</span><br><span class="line">		return false</span><br><span class="line">	&#125;</span><br><span class="line">	target := sumNum / 2</span><br><span class="line">	//è¡Œæ•°</span><br><span class="line">	dp := make([][]bool, len(nums))</span><br><span class="line">	//åˆ—æ•°</span><br><span class="line">	for i := range dp &#123;</span><br><span class="line">		dp[i] = make([]bool, target+1)</span><br><span class="line">	&#125;</span><br><span class="line">	for i := 0; i &lt; len(nums); i++ &#123;</span><br><span class="line">		dp[i][0] = true</span><br><span class="line">	&#125;</span><br><span class="line">	dp[0][nums[0]] = true</span><br><span class="line">	for i := 1; i &lt; len(nums); i++ &#123;</span><br><span class="line">		num := nums[i]</span><br><span class="line">		for j := 1; j &lt;= target; j++ &#123;</span><br><span class="line">			if j &gt; num &#123;</span><br><span class="line">				dp[i][j] = dp[i-1][j] || dp[i-1][j-num]</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				dp[i][j] = dp[i-1][j]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return dp[len(nums)-1][target]</span><br><span class="line">&#125;</span><br><span class="line">func CalculateSum(nums []int) int &#123;</span><br><span class="line">	sum := 0</span><br><span class="line">	for _, num := range nums &#123;</span><br><span class="line">		sum += num</span><br><span class="line">	&#125;</span><br><span class="line">	return sum</span><br><span class="line">&#125;</span><br><span class="line">func SameLengthStack(nums []int) int &#123;</span><br><span class="line">	sort.Slice(nums, func(i, j int) bool &#123;</span><br><span class="line">		return i &lt; j</span><br><span class="line">	&#125;)</span><br><span class="line">	for i := 0; i &lt; len(nums); i++ &#123;</span><br><span class="line">		numsEx := nums[i:]</span><br><span class="line">		if IsCanPartition(numsEx) &#123;</span><br><span class="line">			sum := CalculateSum(numsEx)</span><br><span class="line">			return sum / 2</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 1,2,3,6 -&gt; 6</span><br><span class="line">// 1,2,3,4,5,6 -&gt; 10</span><br><span class="line">// 1,2 -&gt; 0</span><br><span class="line">func main() &#123;</span><br><span class="line">	var nums = []int&#123;1, 2&#125;</span><br><span class="line">	res := SameLengthStack(nums)</span><br><span class="line">	fmt.Println(res)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>backpack</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜²æ­¢çˆ†ä»“</title>
    <url>/preventLiquidation/</url>
    <content><![CDATA[<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>ä½ çš„å·¥å‚æœ‰æ— æ•°ä¸ªä»“åº“ï¼Œæ‰€æœ‰ä»“åº“ä¸€å¼€å§‹éƒ½æ˜¯ç©ºçš„ã€‚å¦‚æœç¬¬ n ä¸ªä»“åº“è´§ç‰©å…¥åº“å‰æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šè£…å…¥è´§ç‰©ã€‚å¦‚æœç¬¬ n ä¸ªä»“åº“è´§ç‰©å…¥åº“å‰æ˜¯ æ»¡çš„ ï¼Œè¿™ä¸ªä»“åº“ä¼šçˆ†ä»“ ã€‚ä½ çš„ç›®æ ‡æ˜¯ä»»æ„ä¸€ä¸ªä»“åº“éƒ½ä¸èƒ½çˆ†ä»“ã€‚</p>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ repos ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li>repos[i] &gt; 0 è¡¨ç¤ºç¬¬ i å¤©æ—¶ï¼Œç¬¬ repos[i] ä¸ªä»“åº“ä¼šæœ‰è´§ç‰©å…¥åº“ã€‚</li>
<li>repos[i] &#x3D;&#x3D; 0 è¡¨ç¤ºç¬¬ i å¤©æ²¡æœ‰ä»“åº“æœ‰è´§ç‰©å…¥åº“ï¼Œä½ å¯ä»¥é€‰æ‹© ä¸€ä¸ª è´§è¿è½¦é˜Ÿæ¸…ç©ºè¿™ä¸ªä»“åº“çš„å…¨éƒ¨è´§ç‰©ã€‚</li>
</ul>
<p>è¯·è¿”å›ä¸€ä¸ªæ•°ç»„ ans ï¼Œæ»¡è¶³ï¼š</p>
<p>ans.length &#x3D;&#x3D; repos.length</p>
<ul>
<li><p>å¦‚æœ repos[i] &gt; 0 ï¼Œé‚£ä¹ˆ<code>ans[i] == -1</code> ã€‚</p>
</li>
<li><p>å¦‚æœ repos<code>[i] == 0</code> ï¼Œ<code>ans[i]</code> æ˜¯ä½ ç¬¬ i å¤©é€‰æ‹©æ¸…ç©ºçš„ä»“åº“ã€‚</p>
<p>å¦‚æœæœ‰å¤šç§å¯è¡Œè§£ï¼Œè¯·è¿”å›å®ƒä»¬ä¸­çš„ ä»»æ„ä¸€ä¸ª<br>å¦‚æœæ²¡åŠæ³•é˜»æ­¢çˆ†ä»“ï¼Œè¯·è¿”å›ä¸€ä¸ª ç©ºçš„æ•°ç»„ ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œå¦‚æœä½ é€‰æ‹©æ¸…ç©ºä¸€ä¸ªè£…æ»¡è´§ç‰©çš„ä»“åº“ï¼Œå®ƒä¼šå˜æˆä¸€ä¸ªç©ºçš„ä»“åº“ã€‚ä½†å¦‚æœä½ é€‰æ‹©æ¸…ç©ºä¸€ä¸ªç©ºçš„ä»“åº“ï¼Œé‚£ä¹ˆå°†æ— äº‹å‘ç”Ÿã€‚</p>
</li>
</ul>
<h2 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h2><ul>
<li><p>è¾“å…¥ï¼šrepos &#x3D; <code>[1,2,3,4]</code></p>
</li>
<li><p>è¾“å‡ºï¼š<code>[-1,-1,-1,-1]</code></p>
</li>
<li><p>è§£é‡Šï¼šç¬¬ä¸€å¤©åï¼Œæ»¡ä»“çš„ä»“åº“åŒ…æ‹¬ <code>[1]</code></p>
<p>ç¬¬äºŒå¤©åï¼Œæ»¡ä»“çš„ä»“åº“åŒ…æ‹¬ <code>[1,2]</code></p>
<p>ç¬¬ä¸‰å¤©åï¼Œæ»¡ä»“çš„ä»“åº“åŒ…æ‹¬ <code>[1,2,3]</code></p>
<p>ç¬¬å››å¤©åï¼Œæ»¡ä»“çš„ä»“åº“åŒ…æ‹¬ <code>[1,2,3,4]</code></p>
<p>æ²¡æœ‰å“ªä¸€å¤©ä½ å¯ä»¥æ¸…ç©ºä»»ä½•ä»“åº“ï¼Œä¹Ÿæ²¡æœ‰ä»“åº“ä¼šå‘ç”Ÿçˆ†ä»“ã€‚</p>
</li>
</ul>
<h2 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h2><ul>
<li><p>è¾“å…¥ï¼šrepos &#x3D; <code>[1,2,0,0,2,1]</code></p>
</li>
<li><p>è¾“å‡ºï¼š<code>[-1,-1,2,1,-1,-1]</code></p>
</li>
<li><p>è§£é‡Šï¼šç¬¬ä¸€å¤©åï¼Œæ»¡ä»“çš„ä»“åº“åŒ…æ‹¬ <code>[1]</code></p>
<p>ç¬¬äºŒå¤©åï¼Œæ»¡ä»“çš„ä»“åº“åŒ…æ‹¬ <code>[1,2]</code></p>
<p>ç¬¬ä¸‰å¤©åï¼Œæˆ‘ä»¬æ¸…ç©ºä»“åº“ 2 ã€‚æ‰€ä»¥å‰©ä¸‹æ»¡ä»“çš„ä»“åº“åŒ…æ‹¬<br><code>[1]</code></p>
<p>ç¬¬å››å¤©åï¼Œæˆ‘ä»¬æ¸…ç©ºä»“åº“ 1 ã€‚æ‰€ä»¥æš‚æ—¶æ²¡æœ‰æ»¡ä»“çš„ä»“åº“äº†ã€‚</p>
<p>ç¬¬äº”å¤©åï¼Œæ»¡ä»“çš„ä»“åº“åŒ…æ‹¬ <code>[2]</code>ã€‚</p>
<p>ç¬¬å…­å¤©åï¼Œæ»¡ä»“çš„ä»“åº“åŒ…æ‹¬ <code>[1,2]</code>ã€‚</p>
<p>å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªæ–¹æ¡ˆä¸‹ä¸ä¼šæœ‰çˆ†ä»“å‘ç”Ÿã€‚åŒæ—¶ï¼Œ<code>[-1,-1,1,2,-1,-1]</code> ä¹Ÿæ˜¯å¦ä¸€ä¸ªå¯è¡Œçš„æ²¡æœ‰çˆ†ä»“çš„æ–¹æ¡ˆã€‚</p>
</li>
</ul>
<h2 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h2><ul>
<li><p>è¾“å…¥ï¼šrepos &#x3D; <code>[1,2,0,1,2]</code></p>
</li>
<li><p>è¾“å‡ºï¼š<code>[]</code></p>
</li>
<li><p>è§£é‡Šï¼šç¬¬äºŒå¤©åï¼Œæ»¡ä»“çš„ä»“åº“åŒ…æ‹¬ <code>[1,2]</code>ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç¬¬ä¸‰å¤©æ¸…ç©ºä¸€ä¸ªä»“åº“ã€‚</p>
<p>ä½†ç¬¬ä¸‰å¤©åï¼Œä»“åº“ 1 å’Œ 2 éƒ½ä¼šå†æ¬¡é‡åˆ°è´§ç‰©å…¥åº“ï¼Œæ‰€ä»¥ä¸ç®¡æˆ‘ä»¬ç¬¬ä¸‰å¤©æ¸…ç©ºå“ªä¸ªä»“åº“ï¼Œå¦ä¸€ä¸ªä»“åº“éƒ½ä¼šå‘ç”Ÿçˆ†ä»“ã€‚</p>
</li>
</ul>
<h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><ul>
<li><code>1 &lt;= repos.length &lt;= 105</code></li>
<li><code>0 &lt;= repos[i] &lt;= 109</code></li>
</ul>
<h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><ul>
<li>c++ç‰ˆæœ¬</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;unordered_map&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">// demo</span><br><span class="line">// 1,2,3,4-&gt;[-1,-1,-1,-1]</span><br><span class="line">// 1,2,0,0,2,1-&gt;[-1,-1,2,1,-1,-1]</span><br><span class="line">// 1,2,0,1,2-?&gt;[]</span><br><span class="line">vector&lt;int&gt; preventOverFlow(vector&lt;int&gt; repos) &#123;</span><br><span class="line">	int days = repos.size();</span><br><span class="line">	// å­˜å‚¨ä»“åº“å†…çš„è´§ç‰©ï¼Œ1ï¼šæœ‰ï¼Œ 0ï¼šæ— </span><br><span class="line">	unordered_map&lt;int, int&gt; warehouses;</span><br><span class="line">	vector&lt;int&gt; result(days, -1);</span><br><span class="line">	for (int i = 0; i &lt; days; i++) &#123;</span><br><span class="line">		// å½“å‰å¤©éœ€è¦æ”¾è´§ç‰©åˆ°ä»“åº“ï¼Œåˆ¤æ–­ä»“åº“æ˜¯å¦å¯æ”¾</span><br><span class="line">		if (repos[i] &gt; 0) &#123;</span><br><span class="line">			// ä»“åº“å†…æœ‰è´§ç‰©ï¼Œä¸èƒ½æ”¾ï¼Œæº¢å‡ºäº†</span><br><span class="line">			if (warehouses.count(repos[i]) &gt; 0 &amp;&amp; warehouses[repos[i]] &gt; 0) &#123;</span><br><span class="line">				return &#123;</span><br><span class="line">				&#125;</span><br><span class="line">				;</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				// ä»“åº“å†…æ— è´§ç‰©ï¼Œèƒ½æ”¾ï¼Œå…¥åº“</span><br><span class="line">				warehouses[repos[i]]++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			// å½“å¤©å¯ä»¥é€‰æ‹©ä¸€ä¸ªä»“åº“å…¥åº“ï¼Œé€‰æ‹©åé¢éœ€è¦æ”¾ä¸œè¥¿çš„ä»“åº“, å¹¶ä¸”è¯¥ä»“åº“é‡Œæœ‰ä¸œè¥¿</span><br><span class="line">			for (int j = i + 1; j &lt; days; j++) &#123;</span><br><span class="line">				if (repos[j] &gt; 0 &amp;&amp; warehouses.count(repos[j]) &gt; 0 &amp;&amp; warehouses[repos[j]] &gt; 0) &#123;</span><br><span class="line">					result[i] = repos[j];</span><br><span class="line">					warehouses[repos[j]]--;</span><br><span class="line">					break;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">	vector&lt;int&gt; repos = &#123;</span><br><span class="line">		1, 2, 0, 0, 2, 1</span><br><span class="line">	&#125;</span><br><span class="line">	;</span><br><span class="line">	vector&lt;int&gt; result = preventOverFlow(repos);</span><br><span class="line">	if (result.empty()) &#123;</span><br><span class="line">		cout &lt;&lt; &quot;[]&quot; &lt;&lt; endl;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		cout &lt;&lt; &quot;[&quot;;</span><br><span class="line">		for (int i = 0; i &lt; result.size(); i++) &#123;</span><br><span class="line">			cout &lt;&lt; result[i];</span><br><span class="line">			if (i &lt; result.size() - 1) &#123;</span><br><span class="line">				cout &lt;&lt; &quot;,&quot;;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; &quot;]&quot; &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>goç‰ˆæœ¬</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// demo</span><br><span class="line">// 1,2,3,4-&gt;[-1,-1,-1,-1]</span><br><span class="line">// 1,2,0,0,2,1-&gt;[-1,-1,2,1,-1,-1]</span><br><span class="line">// 1,2,0,1,2-?&gt;[]</span><br><span class="line">func preventOverflow(repos []int) []int &#123;</span><br><span class="line">	days := len(repos)</span><br><span class="line">	result := make([]int, days)</span><br><span class="line">	for i := range result &#123;</span><br><span class="line">		result[i] = -1</span><br><span class="line">	&#125;</span><br><span class="line">	//å­˜å‚¨ä»“åº“çš„è´§ç‰©ï¼Œ1ï¼šæœ‰ï¼Œ 0ï¼šæ²¡æœ‰</span><br><span class="line">	warehouses := make(map[int]int)</span><br><span class="line">	//éå†æ¯å¤©</span><br><span class="line">	for i := 0; i &lt; days; i++ &#123;</span><br><span class="line">		//éœ€è¦å­˜è´§ç‰©åˆ°ä»“åº“</span><br><span class="line">		if repos[i] &gt; 0 &#123;</span><br><span class="line">			//è¯¥ä»“åº“æœ‰è´§ç‰©, æº¢å‡º</span><br><span class="line">			if warehouses[repos[i]] &gt; 0 &#123;</span><br><span class="line">				return []int&#123;&#125;</span><br><span class="line">			&#125; else &#123; //æ²¡æœ‰è´§ç‰©ï¼Œç›´æ¥å­˜è´§ç‰©</span><br><span class="line">				warehouses[repos[i]]++</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; else &#123; //ä¸éœ€è¦å­˜è´§ç‰©åˆ°ä»“åº“ï¼Œ å¯ä»¥å‡ºåº“ï¼šæ‰¾åˆ°ä¸‹ä¸€ä¸ªéœ€è¦å­˜è´§ç‰©çš„ä»“åº“å‡ºåº“ï¼Œå¹¶ä¸”è¯¥ä»“åº“é‡Œæœ‰è´§ç‰©</span><br><span class="line">			for j := i + 1; j &lt; days; j++ &#123;</span><br><span class="line">				if repos[j] &gt; 0 &amp;&amp; warehouses[repos[j]] &gt; 0 &#123;</span><br><span class="line">					result[i] = repos[j]</span><br><span class="line">					warehouses[repos[j]]--</span><br><span class="line">					break //æ‰¾åˆ°å°±ä¸æ‰¾äº†</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return result</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">	var repos = []int&#123;1, 2, 0, 0, 2, 1&#125;</span><br><span class="line">	result := preventOverflow(repos)</span><br><span class="line">	fmt.Print(&quot;[&quot;)</span><br><span class="line">	for i := 0; i &lt; len(result); i++ &#123;</span><br><span class="line">		fmt.Print(result[i])</span><br><span class="line">		if i &lt; len(result)-1 &#123;</span><br><span class="line">			fmt.Print(&quot;,&quot;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Print(&quot;]&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>dp</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¨‹åºç»“æ„</title>
    <url>/%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84/</url>
    <content><![CDATA[<h1 id="ç¨‹åºç»“æ„"><a href="#ç¨‹åºç»“æ„" class="headerlink" title="ç¨‹åºç»“æ„"></a>ç¨‹åºç»“æ„</h1><p>[toc]</p>
<h2 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h2><ul>
<li>goè¯­è¨€ä¸»è¦æœ‰å››ç§ç±»å‹çš„å£°æ˜è¯­å¥ï¼š<br>  var const type func åˆ†åˆ«å¯¹åº”å˜é‡ å¸¸é‡ ç±»å‹ å‡½æ•°çš„å£°æ˜</li>
</ul>
<h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><ul>
<li>var å˜é‡å ç±»å‹ &#x3D; è¡¨è¾¾å¼<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str <span class="type">string</span> = <span class="string">&quot;EC&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>çœç•¥ç±»å‹å°†æ ¹æ®è¡¨è¾¾å¼æ¨å¯¼å˜é‡çš„ç±»å‹ä¿¡æ¯</p>
</li>
<li><p>çœç•¥åˆå§‹åŒ–è¡¨è¾¾å¼å°†ç”¨é›¶åˆå€¼åˆå§‹åŒ–è¯¥å˜é‡</p>
<ol>
<li>æ•°å€¼ 0</li>
<li>å¸ƒå°”å˜é‡ false</li>
<li>å­—ç¬¦ä¸² â€œâ€</li>
<li>æ¥å£æˆ–å¼•ç”¨ nil</li>
<li>æ•°ç»„ã€ç»“æ„ä½“ç­‰ æ¯ä¸ªå­—æ®µã€å…ƒç´ éƒ½æ˜¯å¯¹åº”ç±»å‹çš„é›¶å€¼</li>
</ol>
</li>
<li><p>åœ¨åŒ…çº§åˆ«å£°æ˜çš„å˜é‡ä¼šåœ¨mainå…¥å£å‡½æ•°æ‰§è¡Œå‰å®Œæˆåˆå§‹åŒ–</p>
</li>
<li><p>ä¸€ç»„å˜é‡ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œç”±å‡½æ•°è¿”å›çš„å¤šä¸ªè¿”å›å€¼åˆå§‹åŒ–</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f,err = os.Open(filename)</span><br></pre></td></tr></table></figure></li>
<li><p>å‡½æ•°å†…éƒ¨å¯ä»¥é€šè¿‡ <code>å˜é‡å := è¡¨è¾¾å¼</code> å£°æ˜å˜é‡ - ç®€çŸ­å˜é‡å£°æ˜</p>
<ol>
<li><p>å˜é‡ç±»å‹æ ¹æ®è¡¨è¾¾å¼è‡ªåŠ¨æ¨å¯¼</p>
</li>
<li><p>é€šè¿‡ <code>:=</code> çš„æ–¹å¼å£°æ˜å¤šä¸ªå˜é‡ï¼Œå·²ç»å£°æ˜è¿‡çš„å˜é‡å°†åªæœ‰èµ‹å€¼è¡Œä¸º</p>
</li>
</ol>
  <figure class="highlight go"><table><tr><td class="code"><pre><span class="line">in, err := os.Open(infile)</span><br><span class="line">out, err := os.Create(outfile) <span class="comment">// error -&gt; é‡æ–°èµ‹å€¼</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>è‡³å°‘è¦æœ‰ä¸€ä¸ªå£°æ˜çš„æ–°å˜é‡ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡</li>
</ol>
  <figure class="highlight go"><table><tr><td class="code"><pre><span class="line">f, err := os.Open(infile)</span><br><span class="line">f, err := os.Create(outfile) <span class="comment">// compile error: no new variables</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><u>ç®€çŸ­å˜é‡</u>å£°æ˜è¢«å¹¿æ³›ç”¨äºå¤§éƒ¨åˆ†çš„<strong>å±€éƒ¨å˜é‡</strong>çš„å£°æ˜å’Œåˆå§‹åŒ–; <u>varå½¢å¼</u>çš„å£°æ˜è¯­å¥å¾€å¾€æ˜¯ç”¨äºéœ€è¦<strong>æ˜¾å¼æŒ‡å®šå˜é‡ç±»å‹çš„åœ°æ–¹</strong>ï¼Œæˆ–è€…å› ä¸ºå˜é‡<strong>ç¨åä¼šè¢«é‡æ–°èµ‹å€¼</strong>è€Œåˆå§‹å€¼æ— å…³ç´§è¦çš„åœ°æ–¹</li>
</ul>
<h3 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h3><ul>
<li>â€œvar x intâ€å£°æ˜è¯­å¥å£°æ˜ä¸€ä¸ªxå˜é‡ï¼Œ&amp;xå°†äº§ç”Ÿä¸€ä¸ªæŒ‡å‘è¯¥æ•´æ•°å˜é‡çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆå¯¹åº”çš„æ•°æ®ç±»å‹ä¸º<code>*int</code>ï¼Œ<code>*p</code>è¡¨è¾¾å¼è¯»å–æŒ‡é’ˆæŒ‡å‘çš„å˜é‡çš„å€¼</li>
<li>æŒ‡é’ˆçš„é›¶å€¼ä¸ºnil</li>
<li>åœ¨Goè¯­è¨€ä¸­ï¼Œè¿”å›å‡½æ•°ä¸­å±€éƒ¨å˜é‡çš„åœ°å€ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºæŒ‡é’ˆä¾ç„¶å¼•ç”¨è¿™ä¸ªå˜é‡</li>
</ul>
<h3 id="new"><a href="#new" class="headerlink" title="new()"></a>new()</h3><ul>
<li>new(T)å°†åˆ›å»ºä¸€ä¸ªTç±»å‹çš„åŒ¿åå˜é‡ï¼Œåˆå§‹åŒ–ä¸ºTç±»å‹çš„é›¶å€¼ï¼Œç„¶åè¿”å›å˜é‡åœ°å€ï¼Œè¿”å›çš„æŒ‡é’ˆç±»å‹ä¸º<code>*T</code></li>
<li>newåªæ˜¯ä¸€ä¸ªé¢„å®šä¹‰çš„å‡½æ•°ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå…³é”®å­—</li>
<li>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨é€‰æ‹©åœ¨æ ˆä¸Šè¿˜æ˜¯åœ¨å †ä¸Šåˆ†é…å±€éƒ¨å˜é‡çš„å­˜å‚¨ç©ºé—´ï¼Œè¿™ä¸ªé€‰æ‹©å¹¶ä¸æ˜¯ç”±ç”¨varè¿˜æ˜¯newå£°æ˜å˜é‡çš„æ–¹å¼å†³å®šçš„</li>
<li>å±€éƒ¨å˜é‡ä»å‡½æ•°fä¸­é€ƒé€¸ï¼Œè¯¥å±€éƒ¨å˜é‡ä¼šè¢«åˆ†é…åˆ°å †ä¸Š</li>
</ul>
<h2 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h2><ul>
<li>ä¸€ä¸ªç±»å‹å£°æ˜è¯­å¥åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç±»å‹åç§°</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ç±»å‹åå­— åº•å±‚ç±»å‹</span><br></pre></td></tr></table></figure>

<ul>
<li>ç±»å‹å£°æ˜è¯­å¥ä¸€èˆ¬å‡ºç°åœ¨åŒ…ä¸€çº§ï¼Œå› æ­¤å¦‚æœæ–°åˆ›å»ºçš„ç±»å‹åå­—çš„é¦–å­—ç¬¦å¤§å†™ï¼Œåˆ™åœ¨åŒ…å¤–éƒ¨ä¹Ÿå¯ä»¥ä½¿ç”¨</li>
<li>å¯¹äºæ¯ä¸€ä¸ªç±»å‹Tï¼Œéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç±»å‹è½¬æ¢æ“ä½œT(x)ï¼Œç”¨äºå°†xè½¬ä¸ºTç±»å‹ï¼Œåªæœ‰å½“ä¸¤ä¸ªç±»å‹çš„åº•å±‚åŸºç¡€ç±»å‹ç›¸åŒæ—¶ï¼Œæ‰å…è®¸è¿™ç§è½¬å‹æ“ä½œ</li>
</ul>
<h2 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h2><ul>
<li><p>ä¸€ä¸ªåŒ…çš„æºä»£ç ä¿å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªä»¥.goä¸ºæ–‡ä»¶åç¼€åçš„æºæ–‡ä»¶ä¸­</p>
</li>
<li><p>æ¯ä¸ªåŒ…éƒ½å¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„åå­—ç©ºé—´</p>
</li>
<li><p>åŒ…è¿˜å¯ä»¥è®©æˆ‘ä»¬é€šè¿‡æ§åˆ¶å“ªäº›åå­—æ˜¯å¤–éƒ¨å¯è§çš„æ¥éšè—å†…éƒ¨å®ç°ä¿¡æ¯ï¼Œåœ¨Goè¯­è¨€ä¸­ï¼Œä¸€ä¸ªç®€å•çš„è§„åˆ™æ˜¯ï¼šå¦‚æœä¸€ä¸ªåå­—æ˜¯å¤§å†™å­—æ¯å¼€å¤´çš„ï¼Œé‚£ä¹ˆè¯¥åå­—æ˜¯å¯¼å‡ºçš„</p>
</li>
<li><p>åˆå§‹åŒ–å‡½æ•°</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123; <span class="comment">/* ... */</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¯ä¸ªæ–‡ä»¶éƒ½å¯ä»¥åŒ…å«å¤šä¸ªinitåˆå§‹åŒ–å‡½æ•°ï¼Œè¿™æ ·çš„initåˆå§‹åŒ–å‡½æ•°é™¤äº†ä¸èƒ½è¢«è°ƒç”¨æˆ–å¼•ç”¨å¤–ï¼Œå…¶ä»–è¡Œä¸ºå’Œæ™®é€šå‡½æ•°ç±»ä¼¼ï¼Œåœ¨æ¯ä¸ªæ–‡ä»¶ä¸­çš„initåˆå§‹åŒ–å‡½æ•°ï¼Œåœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶æŒ‰ç…§å®ƒä»¬å£°æ˜çš„é¡ºåºè¢«è‡ªåŠ¨è°ƒç”¨</li>
</ul>
<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><ul>
<li>å‡½æ•°å£°æ˜åŒ…æ‹¬å‡½æ•°åï¼Œå½¢å‚åˆ—è¡¨ï¼Œè¿”å›å€¼åˆ—è¡¨(å¯çœ)ï¼Œå‡½æ•°ä½“</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">name</span><span class="params">(parameter-list)</span></span> (result-list) &#123;</span><br><span class="line">    body</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚æœå‡½æ•°è¿”å›ä¸€ä¸ªæ— åå˜é‡æˆ–è€…æ²¡æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼åˆ—è¡¨çš„æ‹¬å·æ˜¯å¯ä»¥çœç•¥çš„</li>
<li>å‡½æ•°å¯ä»¥è¿”å›å¤šè¿”å›å€¼</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Size</span><span class="params">(rect image.Rectangle)</span></span> (width, height <span class="type">int</span>)</span><br></pre></td></tr></table></figure>

<h3 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h3><ul>
<li><p>å¯¹äºé‚£äº›å°†è¿è¡Œå¤±è´¥çœ‹ä½œæ˜¯é¢„æœŸç»“æœçš„å‡½æ•°ï¼Œå®ƒä»¬ä¼šè¿”å›ä¸€ä¸ªé¢å¤–çš„è¿”å›å€¼ï¼Œé€šå¸¸æ˜¯æœ€åä¸€ä¸ªï¼Œæ¥ä¼ é€’é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœå¯¼è‡´å¤±è´¥çš„åŸå› åªæœ‰ä¸€ä¸ªï¼Œé¢å¤–çš„è¿”å›å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œé€šå¸¸è¢«å‘½åä¸ºokï¼›å¯¼è‡´å¤±è´¥çš„åŸå› ä¸æ­¢ä¸€ç§ï¼Œéœ€è¦äº†è§£æ›´å¤šçš„é”™è¯¯ä¿¡æ¯ï¼Œé¢å¤–çš„è¿”å›å€¼ä¸å†æ˜¯ç®€å•çš„å¸ƒå°”ç±»å‹ï¼Œè€Œæ˜¯errorç±»å‹</p>
</li>
<li><p>å¯ä»¥é€šè¿‡è°ƒç”¨errorçš„Errorå‡½æ•°æˆ–è€…è¾“å‡ºå‡½æ•°è·å¾—å­—ç¬¦ä¸²ç±»å‹çš„é”™è¯¯ä¿¡</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">fmt.Println(err)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%v&quot;</span>, err)</span><br></pre></td></tr></table></figure>

<ul>
<li>EOF</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">in := bufio.NewReader(os.Stdin)</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">    r, _, err := in.ReadRune()</span><br><span class="line">    <span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">        <span class="keyword">break</span> <span class="comment">// finished reading</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fmt.Errorf(<span class="string">&quot;read failed:%v&quot;</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...use râ€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°å€¼"><a href="#å‡½æ•°å€¼" class="headerlink" title="å‡½æ•°å€¼"></a>å‡½æ•°å€¼</h3><ul>
<li>å‡½æ•°åƒå…¶ä»–å€¼ä¸€æ ·ï¼Œå¯ä»¥è¢«èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œå‡½æ•°ç±»å‹çš„é›¶å€¼æ˜¯nilï¼Œè°ƒç”¨å‡½æ•°å€¼ä¸ºnilçš„å‡½æ•°ä¼šå¼•èµ·panicé”™è¯¯</li>
<li>å‡½æ•°å€¼å¯ä»¥ä¸nilæ¯”è¾ƒï¼Œå‡½æ•°å€¼ä¹‹é—´ä¸å¯æ¯”è¾ƒï¼Œä¸èƒ½ç”¨å‡½æ•°å€¼ä½œä¸ºmapçš„key</li>
<li>åŒ¿åå‡½æ•°ï¼šfuncåæ²¡æœ‰å‡½æ•°å</li>
<li>å‡½æ•°åšå‚æ•°</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foreach</span><span class="params">(l []<span class="type">int</span>, f <span class="keyword">func</span>(n <span class="type">int</span>)</span></span>) &#123;</span><br><span class="line">	<span class="keyword">for</span> _, item := <span class="keyword">range</span> l &#123;</span><br><span class="line">		f(item)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">l := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">foreach(l, <span class="function"><span class="keyword">func</span><span class="params">(n <span class="type">int</span>)</span></span>&#123; fmt.Println(n) &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="å¯å˜å‚æ•°"><a href="#å¯å˜å‚æ•°" class="headerlink" title="å¯å˜å‚æ•°"></a>å¯å˜å‚æ•°</h3><ul>
<li>éœ€è¦åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åä¸€ä¸ªå‚æ•°ç±»å‹ä¹‹å‰åŠ ä¸Šâ€â€¦â€</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(vals ...<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    total := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> _, val := <span class="keyword">range</span> vals &#123;</span><br><span class="line">        total += val</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>)</span><br><span class="line">sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="comment">// valsè¢«çœ‹ä½œç±»å‹ä¸º[]intçš„åˆ‡ç‰‡</span></span><br></pre></td></tr></table></figure>

<ul>
<li>åŸå§‹å‚æ•°å·²ç»æ˜¯åˆ‡ç‰‡ç±»å‹ï¼Œåªéœ€è¦åœ¨æœ€åä¸€ä¸ªå‚æ•°ä¸ŠåŠ â€â€¦â€</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">values := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">sum()</span><br></pre></td></tr></table></figure>

<h3 id="defferå‡½æ•°"><a href="#defferå‡½æ•°" class="headerlink" title="defferå‡½æ•°"></a>defferå‡½æ•°</h3><ul>
<li><p>ç›´åˆ°åŒ…å«è¯¥deferè¯­å¥çš„å‡½æ•°æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œdeferåçš„å‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œ</p>
</li>
<li><p>å¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°ä¸­æ‰§è¡Œå¤šæ¡deferè¯­å¥ï¼Œå®ƒä»¬çš„æ‰§è¡Œé¡ºåºä¸å£°æ˜é¡ºåºç›¸å</p>
</li>
<li><p>deferè¯­å¥ç»å¸¸è¢«ç”¨äºå¤„ç†æˆå¯¹çš„æ“ä½œï¼Œå¦‚æ‰“å¼€ã€å…³é—­ã€è¿æ¥ã€æ–­å¼€è¿æ¥ã€åŠ é”ã€é‡Šæ”¾é”</p>
</li>
<li><p>é‡‡ç”¨deferæœºåˆ¶ï¼Œå¯ä»¥ä½¿å…¶è§‚å¯Ÿå‡½æ•°çš„è¿”å›å€¼</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">double</span><span class="params">(x <span class="type">int</span>)</span></span> (result <span class="type">int</span>) &#123;</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; fmt.Printf(<span class="string">&quot;double(%d) = %d\n&quot;</span>, x,result) &#125;()</span><br><span class="line">    <span class="keyword">return</span> x + x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">_ = double(<span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Panicå¼‚å¸¸"><a href="#Panicå¼‚å¸¸" class="headerlink" title="Panicå¼‚å¸¸"></a>Panicå¼‚å¸¸</h3><ul>
<li><p>æœ‰äº›é”™è¯¯åªèƒ½åœ¨è¿è¡Œæ—¶æ£€æŸ¥ï¼Œå¦‚æ•°ç»„è®¿é—®è¶Šç•Œã€ç©ºæŒ‡é’ˆå¼•ç”¨ç­‰ï¼Œè¿™äº›è¿è¡Œæ—¶é”™è¯¯ä¼šå¼•èµ·panicå¼‚å¸¸</p>
</li>
<li><p>ä¸€èˆ¬è€Œè¨€ï¼Œå½“panicå¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œç¨‹åºä¼šä¸­æ–­è¿è¡Œï¼Œå¹¶ç«‹å³æ‰§è¡Œåœ¨è¯¥goroutineä¸­è¢«å»¶è¿Ÿçš„å‡½æ•°ï¼ˆdefer æœºåˆ¶ï¼‰ï¼Œéšåï¼Œç¨‹åºå´©æºƒå¹¶è¾“å‡ºæ—¥å¿—ä¿¡æ¯ã€‚æ—¥å¿—ä¿¡æ¯åŒ…æ‹¬panic valueå’Œå‡½æ•°è°ƒç”¨çš„å †æ ˆè·Ÿè¸ªä¿¡æ¯ã€‚panic valueé€šå¸¸æ˜¯æŸç§é”™è¯¯ä¿¡æ¯</p>
</li>
<li><p>ç›´æ¥è°ƒç”¨å†…ç½®çš„panicå‡½æ•°ä¹Ÿä¼šå¼•å‘panicå¼‚å¸¸ï¼›panicå‡½æ•°æ¥å—ä»»ä½•å€¼ä½œä¸ºå‚æ•°</p>
</li>
</ul>
<h3 id="Recoveræ•è·å¼‚å¸¸"><a href="#Recoveræ•è·å¼‚å¸¸" class="headerlink" title="Recoveræ•è·å¼‚å¸¸"></a>Recoveræ•è·å¼‚å¸¸</h3><ul>
<li><p>å¦‚æœåœ¨deferredå‡½æ•°ä¸­è°ƒç”¨äº†å†…ç½®å‡½æ•°recoverï¼Œå¹¶ä¸”å®šä¹‰è¯¥deferè¯­å¥çš„å‡½æ•°å‘ç”Ÿäº†panicå¼‚å¸¸ï¼Œrecoverä¼šä½¿ç¨‹åºä»panicä¸­æ¢å¤ï¼Œå¹¶è¿”å›panic value</p>
</li>
<li><p>åœ¨æœªå‘ç”Ÿpanicæ—¶è°ƒç”¨recoverï¼Œrecoverä¼šè¿”å›nil</p>
</li>
</ul>
<h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><ul>
<li>åœ¨å£°æ˜å‡½æ•°æ—¶ï¼Œåœ¨å‡½æ•°åå‰é™„åŠ ä¸€ä¸ªå‚æ•°ï¼Œå³ä¸ºè¿™ç§ç±»å‹å®šä¹‰æ–¹æ³•</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span>&#123; X, Y <span class="type">float64</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Point)</span></span> Distance(q Point) <span class="type">float64</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> math.Hypot(q.X-p.X, q.Y-p.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p := Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">q := Point&#123;<span class="number">4</span>, <span class="number">6</span>&#125;</span><br><span class="line">p.Distance(q)  <span class="comment">// &quot;5&quot;, method call</span></span><br></pre></td></tr></table></figure>

<ul>
<li>é™„åŠ çš„å‚æ•°på«åšæ–¹æ³•çš„æ¥æ”¶å™¨</li>
<li>Goä¸å›åƒå…¶ä»–è¯­è¨€é‚£æ ·ç”¨thisæˆ–selfä½œä¸ºæ¥æ”¶å™¨ï¼Œå¯ä»¥ä»»æ„é€‰æ‹©æ¥å—å™¨çš„åå­—ï¼Œå»ºè®®ä½¿ç”¨ç¬¬ä¸€ä¸ªå­—æ¯</li>
<li>æˆ‘ä»¬å¯ä»¥ç»™åŒä¸€ä¸ªåŒ…å†…çš„ä»»æ„å‘½åç±»å‹å®šä¹‰æ–¹æ³•ï¼Œåªè¦è¿™ä¸ªå‘½åç±»å‹çš„åº•å±‚ç±»å‹<strong>ä¸æ˜¯æŒ‡é’ˆæˆ–è€…interface</strong></li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Path []Point</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(path Path)</span></span> Distance() <span class="type">float64</span> &#123; <span class="keyword">return</span> <span class="number">1</span> &#125; <span class="comment">// ä¸ºsliceç±»å‹å®šä¹‰æ–¹æ³•</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¼šå¯¹å…¶æ¯ä¸€ä¸ªå‚æ•°å€¼è¿›è¡Œæ‹·è´ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°éœ€è¦æ›´æ–°ä¸€ä¸ªå˜é‡ï¼Œæˆ–è€…å‡½æ•°çš„å…¶ä¸­ä¸€ä¸ªå‚æ•°å®åœ¨å¤ªå¤§æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿé¿å…è¿›è¡Œè¿™ç§é»˜è®¤çš„æ‹·è´ï¼Œå¯ä»¥ç”¨åˆ°æŒ‡é’ˆ</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Point)</span></span> MoveTo(position Point) &#123;</span><br><span class="line">    p.X *= position.X</span><br><span class="line">    p.Y *= position.Y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p := &amp;Point&#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line">p.MoveTo(Point&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)</span><br><span class="line"></span><br><span class="line">q := Point&#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line">q.MoveTo(Point&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–è¯‘å™¨ä¼šéšå¼åœ°å¸®æˆ‘ä»¬ç”¨&amp;på»è°ƒç”¨MoveToè¿™ä¸ªæ–¹æ³•ã€‚è¿™ç§ç®€å†™æ–¹æ³•åªé€‚ç”¨äºâ€œå˜é‡â€</li>
<li>nilä¹Ÿæ˜¯ä¸€ä¸ªåˆæ³•çš„æ¥æ”¶å™¨ç±»å‹</li>
<li>å†…åµŒç»“æ„ä½“æ¥æ‰©å±•ç±»å‹</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> cache <span class="keyword">struct</span> &#123;</span><br><span class="line">    sync.Mutex</span><br><span class="line">    mapping <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Mutexè¢«åŒ¿åå†…åµŒåˆ°cacheä¸­ï¼Œcacheä¹Ÿå¯ä»¥è°ƒç”¨Lockä¸Unlockæ–¹æ³•</span></span><br></pre></td></tr></table></figure>

<h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><ul>
<li>æ¥å£ç±»å‹å…·ä½“æè¿°äº†ä¸€ç³»åˆ—æ–¹æ³•çš„é›†åˆï¼Œä¸€ä¸ªå®ç°äº†è¿™äº›æ–¹æ³•çš„å…·ä½“ç±»å‹æ˜¯è¿™ä¸ªæ¥å£ç±»å‹çš„å®ä¾‹</li>
<li>ioåŒ…ä¸­å®šä¹‰äº†å¾ˆå¤šæœ‰ç”¨çš„æ¥å£ç±»å‹ï¼ŒWritteræä¾›äº†æ‰€æœ‰ç±»å‹çš„å†™å…¥bytesçš„æŠ½è±¡ï¼ŒReaderå¯ä»¥ä»£è¡¨ä»»æ„å¯ä»¥è¯»å–bytesçš„ç±»å‹ï¼ŒCloserå¯ä»¥æ˜¯ä»»æ„å¯ä»¥å…³é—­çš„å€¼</li>
<li>å¯ä»¥é€šè¿‡ç»„åˆå·²æœ‰æ¥å£å®šä¹‰æ–°çš„æ¥å£ç±»å‹</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ReadWriter <span class="keyword">interface</span> &#123;</span><br><span class="line">    Reader</span><br><span class="line">    Writer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>è¡¨è¾¾ä¸€ä¸ªç±»å‹å±äºæŸä¸ªæ¥å£åªè¦è¿™ä¸ªç±»å‹å®ç°è¿™ä¸ªæ¥å£</li>
<li>interface{} è¡¨ç¤ºç©ºæ¥å£ç±»å‹</li>
<li>ä¸€ä¸ªæ¥å£çš„å€¼ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªå…·ä½“çš„ç±»å‹å’Œé‚£ä¸ªç±»å‹çš„å€¼ï¼Œç©ºæŒ‡é’ˆä¸ç­‰äºç©ºæ¥å£</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a *<span class="type">int</span></span><br><span class="line"><span class="keyword">var</span> emptyI <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">println</span>(<span class="string">&quot;a == nil&quot;</span>, a == <span class="literal">nil</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">println</span>(<span class="string">&quot;emptyI == nil&quot;</span>, emptyI == <span class="literal">nil</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">println</span>(<span class="string">&quot;a == emptyI&quot;</span>, a == emptyI) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h2 id="Goroutines-amp-Channels"><a href="#Goroutines-amp-Channels" class="headerlink" title="Goroutines &amp; Channels"></a>Goroutines &amp; Channels</h2><ul>
<li>Goè¯­è¨€ä¸­ï¼Œæ¯ä¸ªå¹¶å‘çš„æ‰§è¡Œå•å…ƒå«ä½œä¸€ä¸ªgoroutine</li>
<li>ç¨‹åºå¯åŠ¨æ—¶ï¼Œå…¶ä¸»å‡½æ•°å³åœ¨ä¸€ä¸ªå•ç‹¬çš„goroutineä¸­è¿è¡Œï¼Œæˆ‘ä»¬å«å®ƒmain goroutine</li>
<li>æ–°çš„goroutineä¼šç”¨goè¯­å¥æ¥åˆ›å»ºï¼Œgoè¯­å¥ä¼šä½¿å…¶è¯­å¥ä¸­çš„å‡½æ•°åœ¨ä¸€ä¸ªæ–°åˆ›å»ºçš„goroutineä¸­è¿è¡Œ</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">go</span> f()</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ä¸€ä¸ªchannelæ˜¯ä¸€ä¸ªé€šä¿¡æœºåˆ¶ï¼Œå®ƒå¯ä»¥è®©ä¸€ä¸ªgoroutineé€šè¿‡å®ƒç»™å¦ä¸€ä¸ªgoroutineå‘é€å€¼ä¿¡æ¯</p>
</li>
<li><p>åˆ›å»ºchannels</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>channelæ˜¯å¼•ç”¨ç±»å‹ï¼Œå½“æˆ‘ä»¬å¤åˆ¶ä¸€ä¸ªchannelæˆ–ç”¨äºå‡½æ•°å‚æ•°ä¼ é€’æ—¶ï¼Œæˆ‘ä»¬åªæ˜¯æ‹·è´äº†ä¸€ä¸ªchannelå¼•ç”¨</li>
<li>ä¸¤ä¸ªchannelå¯ä»¥ç”¨&#x3D;&#x3D;æ¯”è¾ƒï¼Œå½“ä¸¤ä¸ªchannelå¼•ç”¨çš„æ˜¯ç›¸åŒçš„å¯¹è±¡ï¼Œä¸ºtrue</li>
<li>channelæœ‰å‘é€å’Œæ¥å—ä¸¤ä¸ªä¸»è¦æ“ä½œï¼Œä¸€ä¸ªå‘é€è¯­å¥å°†ä¸€ä¸ªå€¼ä»ä¸€ä¸ªgoroutineé€šè¿‡channelå‘é€åˆ°å¦ä¸€ä¸ªæ‰§è¡Œæ¥æ”¶æ“ä½œçš„goroutineï¼Œå‘é€å’Œæ¥æ”¶éƒ½ä½¿ç”¨<code>&lt;-</code>è¿ç®—ç¬¦</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ch &lt;- x   <span class="comment">// send statement</span></span><br><span class="line">x = &lt;-ch  <span class="comment">// receive expression in an assignment statement</span></span><br><span class="line">&lt;-ch 			<span class="comment">// receive statement;result is discarded</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å†…ç½®çš„closeå‡½æ•°å¯ä»¥å…³é—­ä¸€ä¸ªchannelï¼Œå…³é—­çš„channeléšååŸºäºchannelçš„ä»»ä½•å‘é€æ“ä½œéƒ½å°†å¯¼è‡´panicå¼‚å¸¸ï¼Œå¯¹äºä¸€ä¸ªå·²ç»è¢«closeè¿‡çš„channelè¿›è¡Œæ¥æ”¶æ“ä½œä¾ç„¶å¯ä»¥æ¥æ”¶ä¹‹å‰å·²ç»å‘é€æˆåŠŸçš„æ•°æ®</li>
<li>å¦‚æœchannelä¸­å·²ç»æ²¡æœ‰æ•°æ®å°†äº§ç”Ÿä¸€ä¸ªé›¶å€¼æ•°æ®</li>
<li><code>make(chan int)</code>åˆ›å»ºçš„æ˜¯ä¸€ä¸ªæ— ç¼“å­˜çš„channelï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç¬¬äºŒä¸ªæ•´å‹å‚æ•°ï¼Œå¯¹åº”channelçš„å®¹é‡</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)    <span class="comment">// unbuffered channel</span></span><br><span class="line">ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">0</span>) <span class="comment">// unbuffered channel</span></span><br><span class="line">ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">3</span>) <span class="comment">// bufferd channel with capacity 3</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸€ä¸ªåŸºäºæ— ç¼“å­˜channelçš„å‘é€æ“ä½œå°†å¯¼è‡´å‘é€è€…goroutineé˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ªgoroutineåœ¨ç›¸åŒçš„channelä¸Šæ‰§è¡Œæ¥æ”¶æ“ä½œï¼›åä¹‹ï¼Œå¦‚æœæ¥æ”¶æ“ä½œå…ˆå‘ç”Ÿï¼Œé‚£ä¹ˆæ¥æ”¶è€…goroutineä¹Ÿå°†é˜»å¡ï¼Œç›´åˆ°æœ‰å¦ä¸€ä¸ªgoroutineåœ¨ç›¸åŒchannelä¸Šæ‰§è¡Œå‘é€æ“ä½œ</li>
<li>åŸºäºæ— ç¼“å­˜channelçš„å‘é€å’Œæ¥æ”¶æ“ä½œå°†å¯¼è‡´ä¸¤ä¸ªgoroutineåšä¸€æ¬¡åŒæ­¥æ“ä½œï¼Œæ— ç¼“å­˜channelä¹Ÿè¢«ç§°ä¸ºåŒæ­¥channel</li>
<li>å½“ä¸€ä¸ªæ— ç¼“å­˜channelå‘é€æ•°æ®æ—¶ï¼Œæ¥æ”¶è€…å…ˆæ”¶åˆ°æ•°æ®ï¼Œç„¶åå‘é€è€…goroutineè¢«å†æ¬¡å”¤é†’</li>
<li>å½“ä»…ä»…æ˜¯ç”¨ä½œåŒæ­¥ä¸¤ä¸ªgoroutineï¼Œå¯ä»¥ç”¨<code>struct&#123;&#125;</code>ç©ºç»“æ„ä½“ä½œä¸ºchannelå…ƒç´ çš„ç±»å‹</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">  done &lt;- <span class="keyword">struct</span>&#123;&#125;&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;-done</span><br></pre></td></tr></table></figure>

<ul>
<li>channelå¯ä»¥ç”¨äºå°†å¤šä¸ªgoroutineè¿æ¥åœ¨ä¸€èµ·ï¼Œä¸€ä¸ªchannelçš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªchannelçš„è¾“å…¥ï¼Œè¿™ç§ä¸²è”çš„channelå°±æ˜¯ç®¡é“(pipeline)</li>
<li>rangeå¾ªç¯å¯ä»¥ç›´æ¥åœ¨channelä¸Šé¢è¿­ä»£ï¼Œå½“channelè¢«å…³é—­ä¸”æ²¡æœ‰å€¼å¯ä»¥æ¥æ”¶æ—¶è·³å‡ºå¾ªç¯</li>
<li>ç±»å‹<code>chan&lt;- int</code>è¡¨ç¤ºä¸€ä¸ªåªå‘é€intçš„channelï¼Œåªèƒ½å‘é€ä¸èƒ½æ¥æ”¶</li>
<li>ç±»å‹<code>&lt;-chan int</code>è¡¨ç¤ºä¸€ä¸ªåªæ¥æ”¶intçš„channelï¼Œåªèƒ½æ¥æ”¶ä¸èƒ½å‘é€</li>
<li>å¯¹åªæ¥æ”¶channelè°ƒç”¨closeæ—¶ç¼–è¯‘é”™è¯¯</li>
<li>ä»»ä½•åŒå‘channelå‘å•å‘channelçš„å˜é‡èµ‹å€¼æ“ä½œéƒ½å°†å¯¼è‡´éšå¼è½¬æ¢ï¼Œä¸èƒ½å°†ä¸€ä¸ªå•å‘channelè½¬æ¢ä¸ºåŒå‘channel</li>
<li>å¸¦ç¼“å­˜çš„channelå†…éƒ¨æŒæœ‰ä¸€ä¸ªå…ƒç´ é˜Ÿåˆ—ï¼Œå‘channelå‘é€æ“ä½œæ˜¯å‘é˜Ÿåˆ—å°¾éƒ¨æ’å…¥å…ƒç´ ï¼Œæ¥æ”¶æ“ä½œåˆ™æ˜¯ä»å¤´éƒ¨åˆ é™¤å…ƒç´ </li>
<li>å¦‚æœå¸¦ç¼“å­˜channelç¼“å­˜é˜Ÿåˆ—æ˜¯æ»¡çš„ï¼Œå‘é€æ“ä½œå°†é˜»å¡ç›´åˆ°å¦ä¸€ä¸ªgoroutineæ‰§è¡Œæ¥æ”¶æ“ä½œé‡Šæ”¾äº†æ–°çš„é˜Ÿåˆ—ç©ºé—´ï¼Œç›¸åå¦‚æœchannelæ˜¯ç©ºçš„ï¼Œæ¥æ”¶æ“ä½œå°†é˜»å¡ç›´åˆ°æœ‰å¦ä¸€ä¸ªgoroutineæ‰§è¡Œå‘é€æ“ä½œè€Œå‘é˜Ÿåˆ—æ’å…¥å…ƒç´ </li>
<li>å†…ç½®çš„capå‡½æ•°å¯ä»¥è·å–channelå†…éƒ¨çš„ç¼“å­˜å®¹é‡</li>
<li>goroutineå› ä¸ºæ²¡æœ‰äººæ¥æ”¶è€Œè¢«æ°¸è¿œé˜»å¡ï¼Œæˆä¸ºgoroutineæ³„æ¼ï¼Œè¦ç¡®ä¿æ¯ä¸ªä¸å†éœ€è¦çš„goroutineèƒ½æ­£å¸¸é€€å‡º</li>
<li>selectè¯­å¥ä¼šç­‰å¾…caseä¸­æœ‰èƒ½å¤Ÿæ‰§è¡Œçš„caseæ—¶å»æ‰§è¡Œï¼Œå½“æ¡ä»¶æ»¡è¶³æ‰ä¼šå»é€šä¿¡å¹¶æ‰§è¡Œcaseä¹‹åçš„è¯­å¥ï¼Œè¿™æ—¶å€™å…¶ä»–é€šä¿¡ä¸ä¼šæ‰§è¡Œã€‚æ¯ä¸ªcaseä»£è¡¨ä¸€ä¸ªé€šä¿¡æ“ä½œï¼ˆåœ¨channelä¸Šè¿›è¡Œå‘é€æˆ–æ¥æ”¶ï¼‰</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span>&#123;</span><br><span class="line"><span class="keyword">case</span> &lt;-ch1:</span><br><span class="line"><span class="keyword">case</span> x := &lt;-ch2:</span><br><span class="line"><span class="keyword">case</span> ch3 &lt;- y:</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚æœå¤šä¸ªcaseåŒæ—¶å°±ç»ªï¼Œselectä¼šéšæœºé€‰æ‹©ä¸€ä¸ªæ‰§è¡Œï¼Œselectçš„defaultæ¥è®¾ç½®å½“å…¶ä»–çš„æ“ä½œéƒ½ä¸èƒ½å¤Ÿé©¬ä¸Šè¢«å¤„ç†æ—¶ç¨‹åºéœ€è¦æ‰§è¡Œå“ªäº›é€»è¾‘ï¼Œæ‰€ä»¥ç”¨æ¥é¿å…å› ä¸ºå‘é€æˆ–æ¥æ”¶å¯¼è‡´çš„é˜»å¡</li>
<li>ç”¨selectå®ç°éé˜»å¡çš„æ¥æ”¶æ“ä½œï¼Œåå¤è¿™æ ·çš„æ“ä½œå«åšloop channel</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"><span class="keyword">var</span> x</span><br><span class="line"><span class="keyword">select</span>&#123;</span><br><span class="line"><span class="keyword">case</span> x &lt;-ch:</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">  fmt.Println(<span class="string">&quot;select default&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go basic</tag>
      </tags>
  </entry>
  <entry>
    <title>goinactionChapter5-9</title>
    <url>/goinactionChapter5-9/</url>
    <content><![CDATA[<h1 id="Goè¯­è¨€çš„ç±»å‹ç³»ç»Ÿ"><a href="#Goè¯­è¨€çš„ç±»å‹ç³»ç»Ÿ" class="headerlink" title="Goè¯­è¨€çš„ç±»å‹ç³»ç»Ÿ"></a>Goè¯­è¨€çš„ç±»å‹ç³»ç»Ÿ</h1><h2 id="ç”¨æˆ·å®šä¹‰çš„ç±»å‹"><a href="#ç”¨æˆ·å®šä¹‰çš„ç±»å‹" class="headerlink" title="ç”¨æˆ·å®šä¹‰çš„ç±»å‹"></a>ç”¨æˆ·å®šä¹‰çš„ç±»å‹</h2><h3 id="structåˆ›å»ºç»“æ„ç±»å‹"><a href="#structåˆ›å»ºç»“æ„ç±»å‹" class="headerlink" title="structåˆ›å»ºç»“æ„ç±»å‹"></a>structåˆ›å»ºç»“æ„ç±»å‹</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">    name       <span class="type">string</span></span><br><span class="line">    email      <span class="type">string</span></span><br><span class="line">    ext        <span class="type">int</span></span><br><span class="line">    privileged <span class="type">bool</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ1ï¼‰ä½¿ç”¨<br>var bill user -&gt;  å£°æ˜æ—¶æ€»æ˜¯ä¼šè¢«åˆå§‹åŒ–ï¼Œç»“æ„é‡Œçš„æ¯ä¸ªå­—æ®µéƒ½ä¼šç”¨é›¶å€¼åˆå§‹åŒ–ï¼ˆæ•°å€¼ç±»å‹é›¶å€¼:0, å­—ç¬¦ä¸²é›¶å€¼ï¼šç©ºå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ç±»å‹ï¼šfalse)<br>ï¼ˆ2ï¼‰note<br>varå’Œ :&#x3D; çš„åŒºåˆ«<br>varæ˜¯åˆ›å»ºä¸€ä¸ªå˜é‡å¹¶åˆå§‹åŒ–ä¸ºå…¶é›¶å€¼<br>:&#x3D; ç»“åˆå­—é¢é‡ å¯ä»¥å°†å˜é‡åˆå§‹åŒ–ä¸ºæŸä¸ªéé›¶å€¼(æ ¹æ®å³ä¾§çš„ç±»å‹ä¿¡æ¯ä½œä¸ºå£°æ˜å˜é‡çš„ç±»å‹ï¼‰<br>eg: lisa :&#x3D; user{<br>name:â€lisaâ€,<br>email:â€<a href="mailto:&#108;&#105;&#x73;&#x61;&#64;&#101;&#x6d;&#97;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;">&#108;&#105;&#x73;&#x61;&#64;&#101;&#x6d;&#97;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;</a>â€œ,<br>ext:123,<br>privileged:true,<br>} -&gt; åˆå§‹åŒ–ç»“æ„ç±»å‹ ä½¿ç”¨ ç»“æ„å­—é¢é‡, å¯¹å­—æ®µå£°æ˜é¡ºåºæ²¡æœ‰è¦æ±‚<br>lisa :&#x3D; user{â€œlisaâ€, â€œ<a href="mailto:&#108;&#105;&#x73;&#97;&#64;&#x65;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#111;&#x6d;">&#108;&#105;&#x73;&#97;&#64;&#x65;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#111;&#x6d;</a>â€œ, 123, true} -&gt; åªæœ‰å€¼ï¼Œæ²¡æœ‰å­—æ®µåï¼Œç»“å°¾ä¸éœ€è¦é€—å·ï¼Œå€¼å¾—é¡ºåºè¦å’Œç»“æ„ç±»å‹ä¸€è‡´<br>ï¼ˆ3ï¼‰ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰ç»“æ„ç±»å‹å£°æ˜å­—æ®µ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> admin <span class="keyword">struct</span> &#123;</span><br><span class="line">    person user</span><br><span class="line">    level  <span class="type">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">fred := admin&#123;</span><br><span class="line">        person: user&#123;</span><br><span class="line">            name:       <span class="string">&quot;fred&quot;</span>,</span><br><span class="line">            email:      <span class="string">&quot;fred@email.com&quot;</span>,</span><br><span class="line">            ext:        <span class="number">456</span>,</span><br><span class="line">            privileged: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        level: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–personå­—æ®µæ˜¯ä½¿ç”¨ç»“æ„å­—é¢é‡åˆ›å»ºäº†userç±»å‹çš„å€¼</p>
<h3 id="åŸºäºå·²æœ‰çš„ç±»å‹ï¼Œä½œä¸ºæ–°ç±»å‹çš„ç±»å‹è¯´æ˜"><a href="#åŸºäºå·²æœ‰çš„ç±»å‹ï¼Œä½œä¸ºæ–°ç±»å‹çš„ç±»å‹è¯´æ˜" class="headerlink" title="åŸºäºå·²æœ‰çš„ç±»å‹ï¼Œä½œä¸ºæ–°ç±»å‹çš„ç±»å‹è¯´æ˜"></a>åŸºäºå·²æœ‰çš„ç±»å‹ï¼Œä½œä¸ºæ–°ç±»å‹çš„ç±»å‹è¯´æ˜</h3><p>Duration in time package<br><img src="/images/goinaction10.png" alt="image.png"><br>int64æ˜¯Durationçš„åŸºç¡€ç±»å‹ï¼Œä½†æ˜¯goä¸è®¤ä¸ºint64å’ŒDurationæ˜¯åŒä¸€ç±»å‹ã€‚Durationæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¸ä¼šåšéšå¼è½¬æ¢</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Duration <span class="type">int64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> dur Duration</span><br><span class="line">    dur = <span class="type">int64</span>(<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘æŠ¥é”™ï¼š<br>cannot use int64(1000) (constant 1000 of type int64) as Duration value in assignment</p>
<h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>æ–¹æ³•æ˜¯ç»™ç”¨æˆ·å®šä¹‰çš„ç±»å‹æ·»åŠ æ–°çš„è¡Œä¸ºï¼Œåœ¨å…³é”®å­—funcå’Œæ–¹æ³•åä¹‹é—´å¢åŠ äº†ä¸€ä¸ªå‚æ•°<br>å‡½æ•°æœ‰æ¥æ”¶è€…ï¼Œå°±è¢«ç§°ä¸ºæ–¹æ³•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Sample program to show how to declare methods and how the Go</span></span><br><span class="line"><span class="comment">// compiler supports them.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// user defines a user in the program.</span></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">    name  <span class="type">string</span></span><br><span class="line">    email <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// notify implements a method with a value receiver.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u user)</span></span> notify() &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Sending User Email To %s&lt;%s&gt;\n&quot;</span>,</span><br><span class="line">        u.name,</span><br><span class="line">        u.email)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// changeEmail implements a method with a pointer receiver.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *user)</span></span> changeEmail(email <span class="type">string</span>) &#123;</span><br><span class="line">    u.email = email</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for the application.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Values of type user can be used to call methods</span></span><br><span class="line">    <span class="comment">// declared with a value receiver.</span></span><br><span class="line">    bill := user&#123;<span class="string">&quot;Bill&quot;</span>, <span class="string">&quot;bill@email.com&quot;</span>&#125;</span><br><span class="line">    bill.notify()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Pointers of type user can also be used to call methods</span></span><br><span class="line">    <span class="comment">// declared with a value receiver.</span></span><br><span class="line">    lisa := &amp;user&#123;<span class="string">&quot;Lisa&quot;</span>, <span class="string">&quot;lisa@email.com&quot;</span>&#125;</span><br><span class="line">    lisa.notify()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Values of type user can be used to call methods</span></span><br><span class="line">    <span class="comment">// declared with a pointer receiver.</span></span><br><span class="line">    bill.changeEmail(<span class="string">&quot;bill@newdomain.com&quot;</span>)</span><br><span class="line">    bill.notify()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Pointers of type user can be used to call methods</span></span><br><span class="line">    <span class="comment">// declared with a pointer receiver.</span></span><br><span class="line">    lisa.changeEmail(<span class="string">&quot;lisa@newdomain.com&quot;</span>)</span><br><span class="line">    lisa.notify()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¨‹åºå£°æ˜äº†userç»“æ„ç±»å‹</p>
<ul>
<li>ä½¿ç”¨å€¼æ¥æ”¶è€…å®ç°æ–¹æ³•: func (u user) notify()</li>
</ul>
<p>(1)userç±»å‹çš„å€¼æ¥è°ƒç”¨æ–¹æ³•<br>bill :&#x3D; user{â€œBillâ€, â€œ<a href="mailto:&#x62;&#x69;&#108;&#108;&#x40;&#x65;&#109;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;">&#x62;&#x69;&#108;&#108;&#x40;&#x65;&#109;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;</a>â€œ}<br>bill.notify()<br>(2)userç±»å‹çš„æŒ‡é’ˆè°ƒç”¨æ–¹æ³•<br>lisa :&#x3D; &amp;user{â€œLisaâ€, â€œ<a href="mailto:&#x6c;&#105;&#x73;&#x61;&#x40;&#x65;&#x6d;&#x61;&#x69;&#x6c;&#46;&#x63;&#x6f;&#x6d;">&#x6c;&#105;&#x73;&#x61;&#x40;&#x65;&#x6d;&#x61;&#x69;&#x6c;&#46;&#x63;&#x6f;&#x6d;</a>â€œ}<br>lisa.notify()<br>goè¯­è¨€è°ƒæ•´æŒ‡é’ˆçš„å€¼æ¥ç¬¦åˆæ–¹æ³•çš„å®šä¹‰-&gt; (*lisa).notify()</p>
<ul>
<li>ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…å®ç°æ–¹æ³•: func (u *user) changeEmail(email string)</li>
</ul>
<p>(1)userç±»å‹çš„æŒ‡é’ˆè°ƒç”¨æ–¹æ³•<br>lisa :&#x3D; &amp;user{â€œLisaâ€, â€œ<a href="mailto:&#x6c;&#x69;&#115;&#x61;&#64;&#x65;&#x6d;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#109;">&#x6c;&#x69;&#115;&#x61;&#64;&#x65;&#x6d;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#109;</a>â€œ}<br>lisa.changeEmail(â€œ<a href="mailto:&#108;&#105;&#x73;&#x61;&#64;&#x6e;&#x65;&#119;&#x64;&#x6f;&#109;&#97;&#105;&#110;&#x2e;&#x63;&#x6f;&#109;">&#108;&#105;&#x73;&#x61;&#64;&#x6e;&#x65;&#119;&#x64;&#x6f;&#109;&#97;&#105;&#110;&#x2e;&#x63;&#x6f;&#109;</a>â€œ)<br>(2)userç±»å‹çš„å€¼æ¥è°ƒç”¨æ–¹æ³•<br>bill :&#x3D; user{â€œBillâ€, â€œ<a href="mailto:&#98;&#x69;&#x6c;&#108;&#x40;&#x65;&#109;&#x61;&#105;&#108;&#x2e;&#x63;&#111;&#x6d;">&#98;&#x69;&#x6c;&#108;&#x40;&#x65;&#109;&#x61;&#105;&#108;&#x2e;&#x63;&#111;&#x6d;</a>â€œ}<br>bill.changeEmail(â€œ<a href="mailto:&#98;&#105;&#x6c;&#x6c;&#64;&#110;&#x65;&#119;&#x64;&#x6f;&#x6d;&#x61;&#x69;&#x6e;&#46;&#99;&#111;&#109;">&#98;&#105;&#x6c;&#x6c;&#64;&#110;&#x65;&#119;&#x64;&#x6f;&#x6d;&#x61;&#x69;&#x6e;&#46;&#99;&#111;&#109;</a>â€œ)<br>goè¯­è¨€è°ƒæ•´å€¼æ¥ç¬¦åˆæ–¹æ³•çš„å®šä¹‰-&gt; ï¼ˆ&amp;bill).changeEmail(â€œ<a href="mailto:&#x62;&#105;&#108;&#108;&#64;&#x6e;&#x65;&#119;&#x64;&#111;&#109;&#x61;&#105;&#x6e;&#x2e;&#x63;&#111;&#109;">&#x62;&#105;&#108;&#108;&#64;&#x6e;&#x65;&#119;&#x64;&#111;&#109;&#x61;&#105;&#x6e;&#x2e;&#x63;&#111;&#109;</a>â€œ)</p>
<ul>
<li>goè¯­è¨€çš„ä¸¤ç§ç±»å‹çš„æ¥æ”¶è€…:</li>
</ul>
<p>(1)å€¼æ¥æ”¶è€…ï¼šè°ƒç”¨æ—¶ä½¿ç”¨å€¼å¾—å‰¯æœ¬æ¥æ‰§è¡Œ<br>é€‚ç”¨äºåˆ›å»ºæ–°çš„å€¼<br>(2ï¼‰æŒ‡é’ˆæ¥æ”¶è€…ï¼šè°ƒç”¨æ—¶ä½¿ç”¨å®é™…å€¼æ¥æ‰§è¡Œ<br>é€‚ç”¨äºä¿®æ”¹å½“å‰å€¼</p>
<h2 id="ç±»å‹çš„æœ¬è´¨"><a href="#ç±»å‹çš„æœ¬è´¨" class="headerlink" title="ç±»å‹çš„æœ¬è´¨"></a>ç±»å‹çš„æœ¬è´¨</h2><p>å…³æ³¨å€¼çš„æœ¬è´¨</p>
<h3 id="å†…ç½®ç±»å‹"><a href="#å†…ç½®ç±»å‹" class="headerlink" title="å†…ç½®ç±»å‹"></a>å†…ç½®ç±»å‹</h3><p>æ•°å€¼ç±»å‹ï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼Œå¸ƒå°”ç±»å‹<br>æŠŠè¿™äº›ç±»å‹çš„å€¼ä¼ é€’ç»™æ–¹æ³•æˆ–è€…å‡½æ•°æ—¶ï¼Œä¼ é€’çš„æ˜¯å¯¹åº”å€¼çš„å‰¯æœ¬</p>
<h3 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h3><p>åˆ‡ç‰‡ï¼Œæ˜ å°„ï¼Œé€šé“ï¼Œæ¥å£ï¼Œå‡½æ•°ç±»å‹(type MyFunc func(int, int) int<br>)<br>å¼•ç”¨ç±»å‹éƒ½åŒ…å«ä¸€ç»„ç‹¬ç‰¹çš„å­—æ®µï¼Œç”¨äºç®¡ç†åº•å±‚æ•°æ®ç»“æ„ã€‚å› æ­¤é€šè¿‡å¤åˆ¶æ¥ä¼ é€’ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å‰¯æœ¬ï¼Œæœ¬è´¨æ˜¯å…±äº«åº•å±‚æ•°æ®ç»“æ„</p>
<ul>
<li>ç¼–è¯‘å™¨åªå…è®¸ä¸ºå‘½åçš„ç”¨æˆ·å®šä¹‰çš„ç±»å‹å£°æ˜æ–¹æ³•ï¼š</li>
</ul>
<p>(1)å› ä¸ºæœªå‘½åç±»å‹æ²¡æœ‰ç‹¬ç«‹çš„å‘½åç©ºé—´ï¼Œæ— æ³•ä¸å…¶ä»–ä»£ç åˆ†å¼€ç®¡ç†ã€‚<br>(2)åº”è¯¥ä½¿ç”¨å…·åç±»å‹æ¥ç®¡ç†ä»£ç å¹¶æ·»åŠ æ–¹æ³•ã€‚å½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ªç»“æ„ä½“æˆ–æ¥å£æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘å…¶ä¸­æ·»åŠ æ–¹æ³•ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç®¡ç†è¯¥ç±»å‹çš„è¡Œä¸ºã€‚è¿™äº›æ–¹æ³•åªèƒ½åœ¨ç±»å‹æ‰€å±çš„åŒ…ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”å¿…é¡»é€šè¿‡è¯¥ç±»å‹æ¥è°ƒç”¨</p>
<h3 id="ç»“æ„ç±»å‹"><a href="#ç»“æ„ç±»å‹" class="headerlink" title="ç»“æ„ç±»å‹"></a>ç»“æ„ç±»å‹</h3><p>ç»“æ„ç±»å‹ç”¨æ¥æè¿°ä¸€ç»„æ•°æ®å€¼ï¼Œè¿™ç»„å€¼å¾—æœ¬è´¨å¯ä»¥æ˜¯åŸå§‹çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯éåŸå§‹çš„</p>
<h4 id="åŸå§‹çš„ç±»å‹çš„ç»“æ„ç±»å‹"><a href="#åŸå§‹çš„ç±»å‹çš„ç»“æ„ç±»å‹" class="headerlink" title="åŸå§‹çš„ç±»å‹çš„ç»“æ„ç±»å‹"></a>åŸå§‹çš„ç±»å‹çš„ç»“æ„ç±»å‹</h4><p>time packageé‡Œçš„Timeç±»å‹æ˜¯åŸå§‹çš„<br><img src="/images/goinaction11.png" alt="image.png"><br><img src="/images/goinaction12.png" alt="image.png"></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Add returns the time t+d.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t Time)</span></span> Add(d Duration) Time &#123;</span><br><span class="line">    dsec := <span class="type">int64</span>(d / <span class="number">1e9</span>)</span><br><span class="line">    nsec := t.nsec() + <span class="type">int32</span>(d%<span class="number">1e9</span>)</span><br><span class="line">    <span class="keyword">if</span> nsec &gt;= <span class="number">1e9</span> &#123;</span><br><span class="line">        dsec++</span><br><span class="line">        nsec -= <span class="number">1e9</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> nsec &lt; <span class="number">0</span> &#123;</span><br><span class="line">        dsec--</span><br><span class="line">        nsec += <span class="number">1e9</span></span><br><span class="line">    &#125;</span><br><span class="line">    t.wall = t.wall&amp;^nsecMask | <span class="type">uint64</span>(nsec) <span class="comment">// update nsec</span></span><br><span class="line">    t.addSec(dsec)</span><br><span class="line">    <span class="keyword">if</span> t.wall&amp;hasMonotonic != <span class="number">0</span> &#123;</span><br><span class="line">        te := t.ext + <span class="type">int64</span>(d)</span><br><span class="line">        <span class="keyword">if</span> d &lt; <span class="number">0</span> &amp;&amp; te &gt; t.ext || d &gt; <span class="number">0</span> &amp;&amp; te &lt; t.ext &#123;</span><br><span class="line">            <span class="comment">// Monotonic clock reading now out of range; degrade to wall-only.</span></span><br><span class="line">            t.stripMono()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            t.ext = te</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Timeç±»å‹çš„æ–¹æ³•ï¼Œä½¿ç”¨å€¼æ¥æ”¶è€…ï¼Œä¼ å…¥Timeå€¼å¾—å‰¯æœ¬ï¼Œè¿”å›äº†æ–¹æ³•å†…å¾—Timeå€¼å¾—å‰¯æœ¬</p>
<h4 id="éåŸå§‹çš„ç±»å‹çš„ç»“æ„ç±»å‹"><a href="#éåŸå§‹çš„ç±»å‹çš„ç»“æ„ç±»å‹" class="headerlink" title="éåŸå§‹çš„ç±»å‹çš„ç»“æ„ç±»å‹"></a>éåŸå§‹çš„ç±»å‹çš„ç»“æ„ç±»å‹</h4><p>os packageé‡Œçš„Fileç±»å‹æ˜¯éåŸå§‹çš„<br><img src="/images/goinaction13.png" alt="image.png"><br><img src="/images/goinaction14.png" alt="image.png"><br>Fileç±»å‹ä½¿ç”¨äº†åµŒå…¥çš„æŒ‡é’ˆï¼ŒæŒ‡å‘æœªå…¬å¼€çš„ç±»å‹ï¼Œè¿™å±‚é¢å¤–çš„å†…åµŒç±»å‹ç»„ç»‡äº†å¤åˆ¶<br>åœ¨å¯¹Fileç±»å‹è¿›è¡Œå¤åˆ¶æ—¶ï¼Œåªä¼šå¤åˆ¶<em>fileæŒ‡é’ˆæœ¬èº«ï¼Œè€Œä¸ä¼šå¤åˆ¶æŒ‡å‘çš„fileç±»å‹æ•°æ®ã€‚è¿™æ„å‘³ç€ï¼Œå¤åˆ¶åçš„Fileç±»å‹å’ŒåŸå§‹çš„Fileç±»å‹å°†å…±äº«åŒä¸€ä¸ª</em>fileæŒ‡é’ˆï¼Œå¹¶ä¸”å¯¹å…¶ä¸­ä¸€ä¸ªçš„ä¿®æ”¹ä¹Ÿä¼šå½±å“åˆ°å¦ä¸€ä¸ª<br>å‡½æ•°ï¼š<br>è°ƒç”¨è€…å¾—åˆ°æŒ‡å‘Fileç±»å‹å€¼å¾—æŒ‡é’ˆ-&gt; è¯´æ˜è¢«è¿”å›å¾—å€¼æ˜¯éåŸå§‹å¾—<br><img src="/images/goinaction15.png" alt="image.png"></p>
<p>æ–¹æ³•ï¼š<br>æ²¡æœ‰ä¿®æ”¹æ¥æ”¶è€…å¾—å€¼ï¼Œä½†æ˜¯ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…æ¥å£°æ˜<br><img src="/images/goinaction16.png" alt="image.png"></p>
<p>æ€»ç»“ï¼š<br>ï¼ˆ1ï¼‰å³ä½¿å‡½æ•°æˆ–è€…æ–¹æ³•æ²¡æœ‰ç›´æ¥æ”¹å˜éåŸå§‹å¾—å€¼å¾—çŠ¶æ€ï¼Œä¾æ—§åº”è¯¥ä½¿ç”¨å…±äº«å¾—æ–¹å¼ä¼ é€’ï¼Œå› ä¸ºå¯¹åº”ç±»å‹å¾—æ•°æ®æ˜¯éåŸå§‹å¾—ï¼Œåº”è¯¥æ€»æ˜¯è¢«å…±äº«ï¼Œè€Œä¸æ˜¯å¤åˆ¶</p>
<p>ï¼ˆ2ï¼‰ä½¿ç”¨å€¼æ¥æ”¶è€…è¿˜æ˜¯æŒ‡é’ˆæ¥æ”¶è€…ï¼Œä¸åº”è¯¥ç”±æ–¹æ³•æ˜¯å¦ä¿®æ”¹äº†æ¥æ”¶åˆ°å¾—å€¼æ¥å†³å®šï¼Œåº”è¯¥åŸºäºç±»å‹çš„æœ¬è´¨ï¼ˆé™¤äº†è®©ç±»å‹å€¼ç¬¦åˆæ¥å£çš„æ—¶å€™ï¼‰</p>
<h3 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><p>å¤šæ€ï¼š ä»£ç å¯ä»¥æ›´å…·ç±»å‹çš„å…·ä½“å®ç°é‡‡å–ä¸åŒè¡Œä¸ºçš„èƒ½åŠ›<br>å¦‚æœä¸€ä¸ªç±»å‹å®ç°äº†æŸä¸ªæ¥å£ï¼Œæ‰€æœ‰ä½¿ç”¨è¿™ä¸ªæ¥å£çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥æ”¯æŒè¿™ç§ç±»å‹çš„å€¼<br>egï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Sample program to show how to write a simple version of curl using</span></span><br><span class="line"><span class="comment">// the io.Reader and io.Writer interface support.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;io&quot;</span></span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line">    <span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// init is called before main.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(os.Args) != <span class="number">2</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;Usage: ./example2 &lt;url&gt;&quot;</span>)</span><br><span class="line">        os.Exit(<span class="number">-1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for the application.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Get a response from the web server.</span></span><br><span class="line">    r, err := http.Get(os.Args[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Copies from the Body to Stdout.</span></span><br><span class="line">    io.Copy(os.Stdout, r.Body)</span><br><span class="line">    <span class="keyword">if</span> err := r.Body.Close(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>copy å‡½æ•°æ¥æ”¶io.Readeræ¥å£ç±»å‹çš„å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Copy</span><span class="params">(dst Writer, src Reader)</span></span> (written <span class="type">int64</span>, err <span class="type">error</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> copyBuffer(dst, src, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">    Read(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>r.Body æ˜¯ io.ReadCloseræ¥å£ç±»å‹çš„å€¼ï¼Œå®ç°äº†Readeræ¥å£ï¼Œå› æ­¤å¯ä»¥ä¼ å…¥io.Copyæ–¹æ³•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ReadCloser <span class="keyword">interface</span> &#123;</span><br><span class="line">    Reader</span><br><span class="line">    Closer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ1ï¼‰æ¥å£æ˜¯ç”¨æ¥å®šä¹‰è¡Œä¸ºçš„ç±»å‹ï¼Œè¿™äº›è¢«å®šä¹‰çš„è¡Œä¸ºä¸ç”±æ¥å£ç›´æ¥å®ç°ï¼Œè€Œæ˜¯é€šè¿‡<strong>æ–¹æ³•</strong>ç”±<strong>ç”¨æˆ·å®šä¹‰çš„ç±»å‹</strong>å®ç°<br>ï¼ˆ2ï¼‰ç”¨æˆ·å®šä¹‰çš„ç±»å‹å®ç°äº†æŸä¸ªæ¥å£ç±»å‹å£°æ˜çš„ä¸€ç»„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç”¨æˆ·å®šä¹‰çš„ç±»å‹çš„å€¼å°±å¯ä»¥èµ‹ç»™è¿™ä¸ªæ¥å£ç±»å‹çš„å€¼<br>ï¼ˆ3ï¼‰å¯¹æ¥å£å€¼æ–¹æ³•çš„è°ƒç”¨ä¼šæ‰§è¡Œæ¥å£å€¼é‡Œå­˜å‚¨çš„ç”¨æˆ·å®šä¹‰çš„ç±»å‹çš„å€¼çš„å¯¹åº”çš„æ–¹æ³• -&gt; ä»»ä½•ç”¨æˆ·å®šä¹‰çš„ç±»å‹éƒ½å¯ä»¥å®ç°ä»»ä½•æ¥å£ -&gt; å¯¹æ¥å£å€¼æ–¹æ³•çš„è°ƒç”¨å°±æ˜¯ä¸€ç§å¤šæ€</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// notifier æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ï¼Œè¡¨ç¤ºå¯ä»¥å‘å¤–éƒ¨å‘é€é€šçŸ¥</span></span><br><span class="line"><span class="keyword">type</span> notifier <span class="keyword">interface</span> &#123;</span><br><span class="line">    notify()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// user æ˜¯ä¸€ä¸ªç»“æ„ä½“ç±»å‹ï¼Œè¡¨ç¤ºç”¨æˆ·</span></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">    name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç° notifier æ¥å£çš„ notify æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u user)</span></span> notify() &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Sending notification to user %s\n&quot;</span>, u.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// å£°æ˜ä¸€ä¸ª notifier ç±»å‹å˜é‡ nï¼Œèµ‹å€¼ä¸ºä¸€ä¸ª user ç±»å‹å˜é‡</span></span><br><span class="line">    <span class="keyword">var</span> n notifier</span><br><span class="line">    n = user&#123;<span class="string">&quot;Bill&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨ notifier æ¥å£ä¸­å®šä¹‰çš„ notify æ–¹æ³•ï¼Œè¾“å‡º &quot;Sending notification to user Bill&quot;</span></span><br><span class="line">    n.notify()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å°†å®ä½“å€¼èµ‹å€¼ç»™æ¥å£"><a href="#å°†å®ä½“å€¼èµ‹å€¼ç»™æ¥å£" class="headerlink" title="å°†å®ä½“å€¼èµ‹å€¼ç»™æ¥å£"></a>å°†å®ä½“å€¼èµ‹å€¼ç»™æ¥å£</h4><p>var n notifier<br>n &#x3D; user{â€œBillâ€}<br>userç±»å‹å€¼èµ‹å€¼åæ¥å£å˜é‡çš„å€¼çš„å†…éƒ¨å¸ƒå±€ï¼š<br>notifieræ˜¯ä¸€ä¸ªä¸¤ä¸ªå­—é•¿åº¦çš„æ•°æ®ç»“æ„<br>ç¬¬ä¸€ä¸ªæ˜¯æŒ‡å‘å†…éƒ¨è¡¨ï¼ˆiTableï¼‰çš„æŒ‡é’ˆ ï¼š åŒ…å«<strong>å·²å­˜å‚¨çš„å€¼çš„ç±»å‹çš„ä¿¡æ¯</strong>å’Œä¸è¿™ä¸ªå€¼å…³è”çš„ä¸€ç»„æ–¹æ³•<br>ç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªæŒ‡å‘æ‰€å­˜å‚¨å€¼çš„æŒ‡é’ˆ<br><img src="/images/goinaction17.png" alt="image.png"></p>
<h4 id="å°†å®ä½“æŒ‡é’ˆèµ‹å€¼ç»™æ¥å£"><a href="#å°†å®ä½“æŒ‡é’ˆèµ‹å€¼ç»™æ¥å£" class="headerlink" title="å°†å®ä½“æŒ‡é’ˆèµ‹å€¼ç»™æ¥å£"></a>å°†å®ä½“æŒ‡é’ˆèµ‹å€¼ç»™æ¥å£</h4><p>var n notifier<br>n &#x3D; &amp;user{â€œBillâ€}<br>ç¬¬ä¸€ä¸ªæ˜¯æŒ‡å‘å†…éƒ¨è¡¨ï¼ˆiTableï¼‰çš„æŒ‡é’ˆ ï¼š<strong>å­˜å‚¨ä¸€ä¸ªæŒ‡å‘ä¿å­˜çš„ç±»å‹çš„æŒ‡é’ˆ</strong>å’Œä¸è¿™ä¸ªå€¼å…³è”çš„ä¸€ç»„æ–¹æ³•<br>ç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªæŒ‡å‘æ‰€å­˜å‚¨å€¼çš„æŒ‡é’ˆ<br><img src="/images/goinaction18.png" alt="image.png"></p>
<h4 id="æ–¹æ³•é›†"><a href="#æ–¹æ³•é›†" class="headerlink" title="æ–¹æ³•é›†"></a>æ–¹æ³•é›†</h4><p>æ–¹æ³•é›†å®šä¹‰äº†æ¥å£çš„æ¥å—è§„åˆ™ï¼Œå®šä¹‰äº†ä¸€ç»„å…³è”åˆ°ç»™å®šç±»å‹çš„å€¼æˆ–è€…æŒ‡é’ˆçš„æ–¹æ³•<br><img src="/images/goinaction19.png" alt="image.png"><br>ï¼ˆ1ï¼‰å¦‚æœä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…æ¥å®ç°ä¸€ä¸ªæ¥å£ï¼Œé‚£ä¹ˆåªæœ‰æŒ‡å‘è¯¥ç±»å‹çš„æŒ‡é’ˆæ‰èƒ½å®ç°å¯¹åº”çš„æ¥å£<br>ï¼ˆ2ï¼‰å¦‚æœä½¿ç”¨å€¼æ¥æ”¶è€…æ¥å®ç°ä¸€ä¸ªæ¥å£ï¼Œé‚£ä¹ˆè¯¥ç±»å‹çš„å€¼å’ŒæŒ‡é’ˆéƒ½èƒ½å®ç°å¯¹åº”çš„æ¥å£</p>
<p>ç¬¬ä¸€æ¡é™åˆ¶å­˜åœ¨çš„åŸå› :<br>ç¼–è¯‘å™¨ä¸èƒ½æ€»æ˜¯è‡ªåŠ¨è·å–ä¸€ä¸ªå€¼çš„åœ°å€ï¼Ÿï¼Ÿ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Sample program to show how you can&#x27;t always get the</span></span><br><span class="line"><span class="comment">// address of a value.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// duration is a type with a base type of int.</span></span><br><span class="line"><span class="keyword">type</span> duration <span class="type">int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// format pretty-prints the duration value.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *duration)</span></span> pretty() <span class="type">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;Duration: %d&quot;</span>, *d)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for the application.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    duration(<span class="number">42</span>).pretty()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ./listing46.go:17: cannot call pointer method on duration(42)</span></span><br><span class="line">    <span class="comment">// ./listing46.go:17: cannot take the address of duration(42)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/goinaction20.png" alt="image.png"><br>duration(42).pretty()<br>æ”¹æˆè¿™æ ·å°±å¯ä»¥<br>var dur &#x3D; duration(42)<br>dur.pretty()</p>
<p>åŸå› ï¼šå€¼ç±»å‹ä¸èƒ½è¢«å¯»å€<br>duration(42)è¿”å›çš„å€¼æ˜¯å³å€¼ï¼Œå½“è°ƒç”¨æŒ‡é’ˆæ¥æ”¶è€…çš„æ–¹æ³•æ—¶ï¼Œç¼–è¯‘å™¨è¯•å›¾ç»™å…¶æ’å…¥å–åœ°å€ç¬¦ï¼Œæœªæœï¼Œå°±åªèƒ½æŠ¥é”™äº†ã€‚<br>å·¦å€¼å’Œå³å€¼ï¼šæœ€é‡è¦åŒºåˆ«å°±æ˜¯æ˜¯å¦å¯ä»¥è¢«å¯»å€<br>å¯ä»¥è¢«å¯»å€çš„æ˜¯å·¦å€¼ï¼Œæ—¢å¯ä»¥å‡ºç°åœ¨èµ‹å€¼å·å·¦è¾¹ä¹Ÿå¯ä»¥å‡ºç°åœ¨å³è¾¹ï¼›<br>ä¸å¯ä»¥è¢«å¯»å€çš„å³ä¸ºå³å€¼ï¼Œæ¯”å¦‚å‡½æ•°è¿”å›å€¼ã€å­—é¢å€¼ã€å¸¸é‡å€¼ç­‰ç­‰ï¼Œåªèƒ½å‡ºç°åœ¨èµ‹å€¼å·å³è¾¹ã€‚</p>
<h3 id="åµŒå…¥ç±»å‹"><a href="#åµŒå…¥ç±»å‹" class="headerlink" title="åµŒå…¥ç±»å‹"></a>åµŒå…¥ç±»å‹</h3><p>(1)å…è®¸ç”¨æˆ·æ‰©å±•æˆ–ä¿®æ”¹å·²æœ‰ç±»å‹çš„è¡Œä¸ºï¼Œå°†å·²æœ‰çš„ç±»å‹ç›´æ¥å£°æ˜åœ¨æ–°çš„ç»“æ„ç±»å‹é‡Œ<br>(2)è¢«åµŒå…¥çš„ç±»å‹è¢«ç§°ä¸ºæ–°çš„å¤–éƒ¨ç±»å‹çš„å†…éƒ¨ç±»å‹<br>(3)é€šè¿‡åµŒå…¥ç±»å‹ï¼Œä¸å¤–éƒ¨ç±»å‹ç›¸å…³çš„æ ‡è¯†ç¬¦ä¼šæå‡åˆ°å¤–éƒ¨ç±»å‹ä¸Š</p>
<ul>
<li>å¤–éƒ¨ç±»å‹å°±<strong>ç»„åˆ</strong>äº†<strong>å†…éƒ¨ç±»å‹</strong>åŒ…å«çš„æ‰€æœ‰<strong>å±æ€§</strong>ï¼Œå¹¶å¯ä»¥<strong>æ·»åŠ </strong>æ–°çš„å­—æ®µå’Œæ–¹æ³•</li>
<li>å¤–éƒ¨ç±»å‹ä¹Ÿå¯ä»¥é€šè¿‡å£°æ˜ä¸å†…éƒ¨æ ‡è¯†ç¬¦<strong>åŒå</strong>çš„æ ‡è¯†ç¬¦æ¥<strong>è¦†ç›–å†…éƒ¨æ ‡è¯†ç¬¦</strong>çš„å­—æ®µæˆ–æ–¹æ³•</li>
</ul>
<p>åµŒå…¥ä¸€ä¸ªç±»å‹ï¼Œåªéœ€è¦å£°æ˜è¿™ä¸ªç±»å‹çš„åå­—å³å¯ï¼šä¸æŒ‡å®šå†…éƒ¨ç±»å‹å¯¹åº”çš„å­—æ®µåï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å†…éƒ¨ç±»å‹çš„ç±»å‹åï¼Œæ¥è®¿é—®åˆ°å†…éƒ¨ç±»å‹çš„å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Sample program to show how to embed a type into another type and</span></span><br><span class="line"><span class="comment">// the relationship between the inner and outer type.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// user defines a user in the program.</span></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">    name  <span class="type">string</span></span><br><span class="line">    email <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// notify implements a method that can be called via</span></span><br><span class="line"><span class="comment">// a value of type user.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *user)</span></span> notify() &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Sending user email to %s&lt;%s&gt;\n&quot;</span>,</span><br><span class="line">        u.name,</span><br><span class="line">        u.email)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// admin represents an admin user with privileges.</span></span><br><span class="line"><span class="keyword">type</span> admin <span class="keyword">struct</span> &#123;</span><br><span class="line">    user  <span class="comment">// Embedded Type</span></span><br><span class="line">    level <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for the application.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Create an admin user.</span></span><br><span class="line">    ad := admin&#123;</span><br><span class="line">        user: user&#123;</span><br><span class="line">            name:  <span class="string">&quot;john smith&quot;</span>,</span><br><span class="line">            email: <span class="string">&quot;john@yahoo.com&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        level: <span class="string">&quot;super&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// We can access the inner type&#x27;s method directly.</span></span><br><span class="line">    ad.user.notify()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// The inner type&#x27;s method is promoted.</span></span><br><span class="line">    ad.notify()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨æ˜¯é€šè¿‡ç›´æ¥è®¿é—®å†…éƒ¨ç±»å‹user -&gt; å†…éƒ¨ç±»å‹å­˜åœ¨äºå¤–éƒ¨ç±»å‹å†…ï¼Œæ€»æ˜¯å¯è®¿é—®çš„<br>ad.user.notify()<br>å†…éƒ¨ç±»å‹çš„æ–¹æ³•æå‡åˆ°å¤–éƒ¨ç±»å‹ï¼Œç›´æ¥è°ƒç”¨<br>ad.notify()</p>
<p>å¤–éƒ¨ç±»å‹ä¸éœ€è¦ä½¿ç”¨å†…éƒ¨ç±»å‹çš„å®ç°ï¼Œæƒ³ä½¿ç”¨è‡ªå·±çš„ä¸€å¥—å®ç°</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Sample program to show what happens when the outer and inner</span></span><br><span class="line"><span class="comment">// type implement the same interface.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// notifier is an interface that defined notification</span></span><br><span class="line"><span class="comment">// type behavior.</span></span><br><span class="line"><span class="keyword">type</span> notifier <span class="keyword">interface</span> &#123;</span><br><span class="line">    notify()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// user defines a user in the program.</span></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">    name  <span class="type">string</span></span><br><span class="line">    email <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// notify implements a method that can be called via</span></span><br><span class="line"><span class="comment">// a value of type user.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *user)</span></span> notify() &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Sending user email to %s&lt;%s&gt;\n&quot;</span>,</span><br><span class="line">        u.name,</span><br><span class="line">        u.email)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// admin represents an admin user with privileges.</span></span><br><span class="line"><span class="keyword">type</span> admin <span class="keyword">struct</span> &#123;</span><br><span class="line">    user</span><br><span class="line">    level <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// notify implements a method that can be called via</span></span><br><span class="line"><span class="comment">// a value of type Admin.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *admin)</span></span> notify() &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Sending admin email to %s&lt;%s&gt;\n&quot;</span>,</span><br><span class="line">        a.name,</span><br><span class="line">        a.email)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for the application.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Create an admin user.</span></span><br><span class="line">    ad := admin&#123;</span><br><span class="line">        user: user&#123;</span><br><span class="line">            name:  <span class="string">&quot;john smith&quot;</span>,</span><br><span class="line">            email: <span class="string">&quot;john@yahoo.com&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        level: <span class="string">&quot;super&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Send the admin user a notification.</span></span><br><span class="line">    <span class="comment">// The embedded inner type&#x27;s implementation of the</span></span><br><span class="line">    <span class="comment">// interface is NOT &quot;promoted&quot; to the outer type.</span></span><br><span class="line">    sendNotification(&amp;ad)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// We can access the inner type&#x27;s method directly.</span></span><br><span class="line">    ad.user.notify()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// The inner type&#x27;s method is NOT promoted.</span></span><br><span class="line">    ad.notify()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// sendNotification accepts values that implement the notifier</span></span><br><span class="line"><span class="comment">// interface and sends notifications.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sendNotification</span><span class="params">(n notifier)</span></span> &#123;</span><br><span class="line">    n.notify()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>adminç±»å‹å¢åŠ äº†å¯¹notifieræ¥å£çš„å®ç° -&gt; æ¥å£åµŒå…¥çš„å†…éƒ¨ç±»å‹å®ç°æ²¡æœ‰æå‡åˆ°å¤–éƒ¨ç±»å‹<br>ad.user.notify() -&gt; è°ƒç”¨å†…éƒ¨ç±»å‹userçš„æ–¹æ³•<br>ad.notify() -&gt; è°ƒç”¨å¤–éƒ¨ç±»å‹adminçš„æ–¹æ³•</p>
<p>æ€»ç»“ï¼š<br>ï¼ˆ1ï¼‰å¤–éƒ¨ç±»å‹å®ç°äº†å’Œå†…éƒ¨ç±»å‹åŒåçš„æ–¹æ³•ï¼Œåˆ™å†…éƒ¨ç±»å‹çš„å®ç°å°±ä¸ä¼šè¢«æå‡<br>ï¼ˆ2ï¼‰ä½†æ˜¯å†…éƒ¨ç±»å‹çš„å€¼ä¸€ç›´åœ¨ï¼Œå¯ä»¥ç›´æ¥è®¿é—®å†…éƒ¨ç±»å‹çš„å€¼ï¼Œæ¥è®¿é—®æ²¡æœ‰è¢«æå‡çš„å†…éƒ¨ç±»å‹å®ç°çš„æ–¹æ³•</p>
<h3 id="å…¬å¼€æˆ–æœªå…¬å¼€çš„æ ‡è¯†ç¬¦"><a href="#å…¬å¼€æˆ–æœªå…¬å¼€çš„æ ‡è¯†ç¬¦" class="headerlink" title="å…¬å¼€æˆ–æœªå…¬å¼€çš„æ ‡è¯†ç¬¦"></a>å…¬å¼€æˆ–æœªå…¬å¼€çš„æ ‡è¯†ç¬¦</h3><p>goè¯­è¨€æ”¯æŒä»åŒ…é‡Œå…¬å¼€æˆ–è€…éšè—æ ‡è¯†ç¬¦<br>æ ‡è¯†ç¬¦åå­—ä»¥<strong>å°å†™</strong>å­—æ¯å¼€å¤´ï¼šæ ‡è¯†ç¬¦æœªå…¬å¼€ï¼ŒåŒ…å¤–çš„ä»£ç <strong>ä¸å¯è§</strong><br>æ ‡è¯†ç¬¦åå­—ä»¥<strong>å¤§å†™</strong>å­—æ¯å¼€å¤´ï¼šæ ‡è¯†ç¬¦å…¬å¼€ï¼ŒåŒ…å¤–çš„ä»£ç <strong>å¯è§</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> counters</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// alertCounter is an unexported type that</span></span><br><span class="line"><span class="comment">// contains an integer counter for alerts.</span></span><br><span class="line"><span class="keyword">type</span> alertCounter <span class="type">int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// New creates and returns values of the unexported</span></span><br><span class="line"><span class="comment">// type alertCounter.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(value <span class="type">int</span>)</span></span> alertCounter &#123;</span><br><span class="line">    <span class="keyword">return</span> alertCounter(value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;github.com/goinaction/code/chapter5/listing68/counters&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for the application.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Create a variable of the unexported type using the exported</span></span><br><span class="line">    <span class="comment">// New function from the package counters.</span></span><br><span class="line">    counter := counters.New(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Counter: %d\n&quot;</span>, counter)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>type alertCounter int -&gt; å°å†™çš„æ ‡è¯†ç¬¦æœªå…¬å¼€<br>New å·¥å‚å‡½æ•°åˆ›å»ºäº†æœªå…¬å¼€ç±»å‹çš„å€¼ï¼Œå°†è¿™ä¸ªå€¼è¿”å›ç»™è°ƒç”¨è€…ï¼ˆï¼Ÿï¼‰<br>åŸå› : alertCounterç±»å‹çš„å€¼æ˜¯ä¸€ä¸ªå…·ä½“çš„å€¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç±»å‹ã€‚å› æ­¤ï¼Œè™½ç„¶alertCounterç±»å‹æœ¬èº«æ˜¯æœªå…¬å¼€çš„ï¼Œä½†æ˜¯å®ƒçš„å€¼å¹¶æ²¡æœ‰è¢«é™åˆ¶åœ¨åŒ…å†…éƒ¨<br>ä¹¦ä¸Šï¼š</p>
<ul>
<li>å…¬å¼€æˆ–è€…æœªå…¬å¼€çš„æ ‡è¯†ç¬¦ï¼Œä¸æ˜¯ä¸€ä¸ªå€¼</li>
<li>çŸ­å˜é‡å£°æ˜æ“ä½œç¬¦ï¼Œæœ‰èƒ½åŠ›æ•è·å¼•ç”¨çš„ç±»å‹</li>
</ul>
<p>åµŒå…¥ç±»å‹+æœªå…¬å¼€æ ‡è¯†ç¬¦çš„ä½¿ç”¨</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Package entities contains support for types of</span></span><br><span class="line"><span class="comment">// people in the system.</span></span><br><span class="line"><span class="keyword">package</span> entities</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// user defines a user in the program.</span></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name  <span class="type">string</span></span><br><span class="line">    Email <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Admin defines an admin in the program.</span></span><br><span class="line"><span class="keyword">type</span> Admin <span class="keyword">struct</span> &#123;</span><br><span class="line">    user   <span class="comment">// The embedded type is unexported.</span></span><br><span class="line">    Rights <span class="type">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Sample program to show how unexported fields from an exported</span></span><br><span class="line"><span class="comment">// struct type can&#x27;t be accessed directly.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;github.com/goinaction/code/chapter5/listing74/entities&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for the application.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Create a value of type Admin from the entities package.</span></span><br><span class="line">    a := entities.Admin&#123;</span><br><span class="line">        Rights: <span class="number">10</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set the exported fields from the unexported</span></span><br><span class="line">    <span class="comment">// inner type.</span></span><br><span class="line">    a.Name = <span class="string">&quot;Bill&quot;</span></span><br><span class="line">    a.Email = <span class="string">&quot;bill@email.com&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    fmt.Printf(<span class="string">&quot;User: %v\n&quot;</span>, a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Adminç±»å‹çš„å†…éƒ¨ç±»å‹useræ˜¯æœªå…¬å¼€çš„ï¼Œæ— æ³•ç›´æ¥é€šè¿‡ç»“æ„å­—é¢é‡åˆå§‹åŒ–æ”¹å†…éƒ¨ç±»å‹</li>
<li>è™½ç„¶å†…éƒ¨ç±»å‹æ˜¯æœªå…¬å¼€çš„ï¼Œä½†æ˜¯å†…éƒ¨ç±»å‹é‡Œå£°æ˜çš„å­—æ®µæ˜¯å…¬å¼€çš„</li>
<li>å†…éƒ¨ç±»å‹çš„æ ‡è¯†ç¬¦æå‡åˆ°å¤–éƒ¨ç±»å‹ï¼Œè¿™äº›å…¬å¼€çš„å­—æ®µå¯ä»¥é€šè¿‡å¤–éƒ¨ç±»å‹è®¿é—®åˆ°</li>
</ul>
<h1 id="å¹¶å‘"><a href="#å¹¶å‘" class="headerlink" title="å¹¶å‘"></a>å¹¶å‘</h1><h2 id="å¹¶å‘ä¸å¹¶è¡Œ"><a href="#å¹¶å‘ä¸å¹¶è¡Œ" class="headerlink" title="å¹¶å‘ä¸å¹¶è¡Œ"></a>å¹¶å‘ä¸å¹¶è¡Œ</h2><p>goè¯­è¨€é‡Œçš„å¹¶å‘æ˜¯æŒ‡èƒ½è®©æŸä¸ªå‡½æ•°ç‹¬ç«‹äºå…¶ä»–å‡½æ•°è¿è¡Œçš„èƒ½åŠ›ã€‚<br>å½“ä¸€ä¸ªå‡½æ•°åˆ›å»ºä¸ºgoroutineæ—¶ï¼ŒGoä¼šå°†å…¶è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å·¥ä½œå•å…ƒã€‚</p>
<p><img src="/images/goinaction21-0.png" alt="image.png"><img src="/images/goinaction21-1.png" alt="image.png"></p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªgoroutineå°±ä¼šè¢«æ”¾åˆ°è°ƒåº¦å™¨çš„å…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­</li>
<li>è°ƒåº¦å™¨å°±å°†è¿™äº›é˜Ÿåˆ—ä¸­çš„goroutineåˆ†é…ç»™ä¸€ä¸ªé€»è¾‘å¤„ç†å™¨ï¼Œå¹¶æ”¾åˆ°è¿™ä¸ªé€»è¾‘å¤„ç†å™¨å¯¹åº”çš„æœ¬åœ°è¿è¡Œé˜Ÿåˆ—ä¸­</li>
<li>æœ¬åœ°è¿è¡Œé˜Ÿåˆ—ä¸­çš„goroutineä¸€ç›´ç­‰å¾…ç›´åˆ°è‡ªå·±è¢«åˆ†é…çš„é€»è¾‘å¤„ç†å™¨æ‰§è¡Œ</li>
</ul>
<p>goroutineæ‰§è¡Œé˜»å¡çš„ç³»ç»Ÿè°ƒç”¨ï¼šæ‰“å¼€æ–‡ä»¶<br>åˆ†ç¦»-&gt; çº¿ç¨‹é˜»å¡ -&gt; ç­‰å¾…ç³»ç»Ÿè°ƒç”¨çš„è¿”å›</p>
<p>å¹¶å‘ï¼šè®©ä¸åŒçš„ä»£ç ç‰‡æ®µåŒæ—¶åœ¨ä¸åŒçš„ç‰©ç†å¤„ç†å™¨ä¸Šæ‰§è¡Œï¼ŒåŒæ—¶ç®¡ç†å¾ˆå¤šäº‹æƒ…<br>å¹¶è¡Œï¼šåŒæ—¶åšå¾ˆå¤šäº‹æƒ…<br>goroutineå¹¶è¡Œï¼Œéœ€è¦å¤šäºä¸€ä¸ªé€»è¾‘å¤„ç†å™¨ï¼Œå¯ä»¥åœ¨ä¸åŒçš„çº¿ç¨‹ä¸Šè¿è¡Œ<br>ä¸€ä¸ªé€»è¾‘å¤„ç†å™¨å’Œä¸¤ä¸ªé€»è¾‘å¤„ç†å™¨çš„åŒºåˆ«ï¼š<br><img src="/images/goinaction22-0.png" alt="image.png"><img src="/images/goinaction22-1.png" alt="image.png"></p>
<h2 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a>goroutine</h2><h3 id="goroutineå¹¶å‘"><a href="#goroutineå¹¶å‘" class="headerlink" title="goroutineå¹¶å‘"></a>goroutineå¹¶å‘</h3><h4 id="ä¸€ä¸ªé€»è¾‘å¤„ç†å™¨å¹¶å‘è¿è¡Œå¤šä¸ªgoroutine"><a href="#ä¸€ä¸ªé€»è¾‘å¤„ç†å™¨å¹¶å‘è¿è¡Œå¤šä¸ªgoroutine" class="headerlink" title="ä¸€ä¸ªé€»è¾‘å¤„ç†å™¨å¹¶å‘è¿è¡Œå¤šä¸ªgoroutine"></a>ä¸€ä¸ªé€»è¾‘å¤„ç†å™¨å¹¶å‘è¿è¡Œå¤šä¸ªgoroutine</h4><ul>
<li>runtime.GOMAXPROCS(1) è®¾ç½®é€»è¾‘å¤„ç†å™¨æ•°é‡æ˜¯1</li>
<li>WaitGroupæ˜¯ä¸€ä¸ªè®¡æ•°ä¿¡å·é‡ï¼Œç”¨æ¥è®°å½•å¹¶ç»´æŠ¤è¿è¡Œçš„goroutine</li>
<li>å¦‚æœWaitGroupçš„å€¼å¤§äº0ï¼ŒWaitæ–¹æ³•å°±ä¼šé˜»å¡</li>
<li>å½“ä»£ç ä¸­å‡½æ•°é€šè¿‡goroutineæ‰§è¡Œï¼Œmainä»£ç ä¼šç»§ç»­è¿è¡Œï¼Œè¿™æ ·mainå‡½æ•°ä¼šåœ¨goroutineå®Œæˆå·¥ä½œå‰è¿”å›ï¼Œç¨‹åºå°±æœ‰å¯èƒ½åœ¨goroutineè¿è¡Œå‰ç§æ¤ï¼Œå› æ­¤mainå‡½æ•°éœ€è¦é€šè¿‡WaitGroupæ¥ç­‰å¾…goroutineå®Œæˆå·¥ä½œ</li>
<li>å½“goroutineå ç”¨æ—¶é—´è¿‡é•¿æ—¶ï¼Œè°ƒåº¦å™¨ä¼šåœæ­¢å½“å‰æ­£è¿è¡Œçš„goroutineï¼Œå¹¶ç»™å…¶ä»–å¯è¿è¡Œçš„goroutineè¿è¡Œçš„æœºä¼š</li>
</ul>
<p><img src="/images/goinaction23.png" alt="image.png"></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// This sample program demonstrates how the goroutine scheduler</span></span><br><span class="line"><span class="comment">// will time slice goroutines on a single thread.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;runtime&quot;</span></span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// wg is used to wait for the program to finish.</span></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for all Go programs.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Allocate 1 logical processors for the scheduler to use.</span></span><br><span class="line">    runtime.GOMAXPROCS(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add a count of two, one for each goroutine.</span></span><br><span class="line">    wg.Add(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create two goroutines.</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Create Goroutines&quot;</span>)</span><br><span class="line">    <span class="keyword">go</span> printPrime(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">    <span class="keyword">go</span> printPrime(<span class="string">&quot;B&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Wait for the goroutines to finish.</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Waiting To Finish&quot;</span>)</span><br><span class="line">    wg.Wait()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">&quot;Terminating Program&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// printPrime displays prime numbers for the first 5000 numbers.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printPrime</span><span class="params">(prefix <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">    <span class="comment">// Schedule the call to Done to tell main we are done.</span></span><br><span class="line">    <span class="keyword">defer</span> wg.Done()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">next:</span><br><span class="line">    <span class="keyword">for</span> outer := <span class="number">2</span>; outer &lt; <span class="number">5000</span>; outer++ &#123;</span><br><span class="line">        <span class="keyword">for</span> inner := <span class="number">2</span>; inner &lt; outer; inner++ &#123;</span><br><span class="line">            <span class="keyword">if</span> outer%inner == <span class="number">0</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span> next</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s:%d\n&quot;</span>, prefix, outer)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Completed&quot;</span>, prefix)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/goinaction24.png" alt="image.png"><br>è°ƒåº¦å™¨åˆ‡æ¢ä¸¤ä¸ªgoroutine</p>
<h3 id="goroutineå¹¶è¡Œ"><a href="#goroutineå¹¶è¡Œ" class="headerlink" title="goroutineå¹¶è¡Œ"></a>goroutineå¹¶è¡Œ</h3><p>import runtime<br>runtime.GOMAXPROCS(runtime.NumCPU())</p>
<ul>
<li>runtimeåŒ…ä¿®æ”¹Goè¯­è¨€è¿è¡Œæ—¶é…ç½®å‚æ•°çš„èƒ½åŠ›</li>
<li>ä¿®æ”¹è°ƒåº¦å™¨ä½¿ç”¨çš„é€»è¾‘å¤„ç†å™¨çš„æ•°é‡ -&gt; ä¸ºæ¯ä¸ªå¯ç”¨çš„ç‰©ç†å¤„ç†å™¨åˆ›å»ºä¸€ä¸ªé€»è¾‘å¤„ç†å™¨</li>
<li>æœ‰å¤šä¸ªé€»è¾‘å¤„ç†å™¨ ä¸” å¯ä»¥åŒæ—¶è®©æ¯ä¸ªé€»è¾‘å¤„ç†å™¨è¿è¡Œåœ¨ä¸€ä¸ªå¯ç”¨çš„ç‰©ç†å¤„ç†å™¨ä¸Šï¼Œ goroutineæ‰ä¼šå¹¶è¡Œè¿è¡Œ</li>
</ul>
<h3 id="ç«äº‰çŠ¶æ€"><a href="#ç«äº‰çŠ¶æ€" class="headerlink" title="ç«äº‰çŠ¶æ€"></a>ç«äº‰çŠ¶æ€</h3><p>ä¸¤ä¸ªgoroutineæ²¡æœ‰äº’ç›¸åŒæ­¥ï¼ˆäº’æ–¥é”ï¼Œé€šé“ï¼Œæ¡ä»¶é”ï¼‰ä¸‹ï¼Œè®¿é—®æŸä¸ªå…±äº«çš„èµ„æºï¼Œå¹¶è¯•å›¾è¯»å†™è¿™ä¸ªèµ„æºï¼Œå°±ä¼šå¤„äºäº’ç›¸ç«äº‰çš„çŠ¶æ€</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// This sample program demonstrates how to create race</span></span><br><span class="line"><span class="comment">// conditions in our programs. We don&#x27;t want to do this.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;runtime&quot;</span></span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    <span class="comment">// counter is a variable incremented by all goroutines.</span></span><br><span class="line">    counter <span class="type">int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// wg is used to wait for the program to finish.</span></span><br><span class="line">    wg sync.WaitGroup</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for all Go programs.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Add a count of two, one for each goroutine.</span></span><br><span class="line">    wg.Add(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create two goroutines.</span></span><br><span class="line">    <span class="keyword">go</span> incCounter(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">go</span> incCounter(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Wait for the goroutines to finish.</span></span><br><span class="line">    wg.Wait()</span><br><span class="line">    fmt.Println(<span class="string">&quot;Final Counter:&quot;</span>, counter)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// incCounter increments the package level counter variable.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">incCounter</span><span class="params">(id <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="comment">// Schedule the call to Done to tell main we are done.</span></span><br><span class="line">    <span class="keyword">defer</span> wg.Done()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> count := <span class="number">0</span>; count &lt; <span class="number">2</span>; count++ &#123;</span><br><span class="line">        <span class="comment">// Capture the value of Counter.</span></span><br><span class="line">        value := counter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Yield the thread and be placed back in queue.</span></span><br><span class="line">        runtime.Gosched()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Increment our local value of Counter.</span></span><br><span class="line">        value++</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Store the value back into Counter.</span></span><br><span class="line">        counter = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/goinaction25.png" alt="image.png"></p>
<ul>
<li>counteræ˜¯è¿›è¡Œå››æ¬¡è¯»å†™æ“ä½œï¼Œæ¯ä¸ªgoroutineæ‰§è¡Œä¸¤æ¬¡</li>
<li>runtime.Gosched()å°†goroutineä»å½“å‰çº¿ç¨‹é€€å‡ºï¼Œç»™å…¶ä»–goroutineè¿è¡Œ</li>
<li>ç”¨ç«äº‰æ£€æµ‹å™¨æ ‡å¿—æ¥ç¼–è¯‘ç¨‹åº</li>
</ul>
<p>go build -race<br>.&#x2F;test &#x2F;&#x2F;è¿è¡Œ<br><img src="/images/goinaction26.png" alt="image.png"></p>
<h3 id="é”ä½å…±äº«èµ„æº"><a href="#é”ä½å…±äº«èµ„æº" class="headerlink" title="é”ä½å…±äº«èµ„æº"></a>é”ä½å…±äº«èµ„æº</h3><p>åŒæ­¥æœºåˆ¶ : å¯¹å…±äº«èµ„æºåŠ é”</p>
<h4 id="åŸå­å‡½æ•°"><a href="#åŸå­å‡½æ•°" class="headerlink" title="åŸå­å‡½æ•°"></a>åŸå­å‡½æ•°</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">incCounter</span><span class="params">(id <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="comment">// Schedule the call to Done to tell main we are done.</span></span><br><span class="line">    <span class="keyword">defer</span> wg.Done()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> count := <span class="number">0</span>; count &lt; <span class="number">2</span>; count++ &#123;</span><br><span class="line">        <span class="comment">// Safely Add One To Counter.</span></span><br><span class="line">        atomic.AddInt64(&amp;counter, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Yield the thread and be placed back in queue.</span></span><br><span class="line">        runtime.Gosched()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>atmoic</p>
<ul>
<li>AddInt64åŒæ­¥æ•´å‹çš„åŠ æ³•</li>
<li>LoadInt64å®‰å…¨è¯»æ•´å‹å€¼</li>
<li>StoreInt64å®‰å…¨å†™æ•´å‹å€¼</li>
</ul>
<h4 id="äº’æ–¥é”"><a href="#äº’æ–¥é”" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h4><p>åœ¨ä»£ç ä¸Šåˆ›å»ºä¸€ä¸ªä¸´ç•ŒåŒºï¼Œä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªgoroutineå¯ä»¥æ‰§è¡Œè¿™ä¸ªä¸´ç•ŒåŒºä»£ç </p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">incCounter</span><span class="params">(id <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="comment">// Schedule the call to Done to tell main we are done.</span></span><br><span class="line">    <span class="keyword">defer</span> wg.Done()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> count := <span class="number">0</span>; count &lt; <span class="number">2</span>; count++ &#123;</span><br><span class="line">        <span class="comment">// Only allow one goroutine through this</span></span><br><span class="line">        <span class="comment">// critical section at a time.</span></span><br><span class="line">        mutex.Lock()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// Capture the value of counter.</span></span><br><span class="line">            value := counter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// Yield the thread and be placed back in queue.</span></span><br><span class="line">            runtime.Gosched()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// Increment our local value of counter.</span></span><br><span class="line">            value++</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// Store the value back into counter.</span></span><br><span class="line">            counter = value</span><br><span class="line">        &#125;</span><br><span class="line">        mutex.Unlock()</span><br><span class="line">        <span class="comment">// Release the lock and allow any</span></span><br><span class="line">        <span class="comment">// waiting goroutine through.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é€šé“"><a href="#é€šé“" class="headerlink" title="é€šé“"></a>é€šé“</h4><p>å¯ä»¥åœ¨goroutineé—´åšåŒæ­¥</p>
<ul>
<li>ä½¿ç”¨makeåˆ›å»ºé€šé“(å‚æ•°chan+å…è®¸é€šé“äº¤æ¢çš„ç±»å‹ï¼‰</li>
</ul>
<p>ï¼ˆ1ï¼‰æ— ç¼“å†²é€šé“ï¼šunbuffered :&#x3D; make(chan int)<br>éœ€è¦å‘é€goroutineå’Œæ¥æ”¶goroutineéƒ½å‡†å¤‡å¥½ï¼Œæ‰èƒ½å®Œæˆå‘é€å’Œæ¥æ”¶æ“ä½œã€‚æ²¡å‡†å¤‡å¥½ä¼šé˜»å¡ï¼Œä¿è¯åŒæ—¶äº¤æ¢æ•°æ®<br><img src="/images/goinaction27.png" alt="image.png">)<br>ï¼ˆ2ï¼‰æœ‰ç¼“å†²é€šé“ï¼šbuffered :&#x3D; make(chan string, 10)<br>åœ¨è¢«æ¥æ”¶å‰èƒ½å­˜å‚¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªå€¼çš„é€šé“ï¼Œé€šé“ä¸­æ²¡æœ‰è¦æ¥æ”¶çš„å€¼æ—¶ï¼Œæ‰ä¼šé˜»å¡ã€‚<br><img src="/images/goinaction28.png" alt="image.png"><br>close(chan) å…³é—­é€šé“åï¼Œgoroutineä¾ç„¶å¯ä»¥ä»é€šé“æ¥æ”¶æ•°æ®ï¼Œä½†æ˜¯ä¸èƒ½å†å‘é€šé“é‡Œå‘é€æ•°æ® -&gt; ä¸ä¼šæœ‰æ•°æ®ä¸¢å¤±</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// This sample program demonstrates how to use a buffered</span></span><br><span class="line"><span class="comment">// channel to work on multiple tasks with a predefined number</span></span><br><span class="line"><span class="comment">// of goroutines.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;math/rand&quot;</span></span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    numberGoroutines = <span class="number">4</span>  <span class="comment">// Number of goroutines to use.</span></span><br><span class="line">    taskLoad         = <span class="number">10</span> <span class="comment">// Amount of work to process.</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// wg is used to wait for the program to finish.</span></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// init is called to initialize the package by the</span></span><br><span class="line"><span class="comment">// Go runtime prior to any other code being executed.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Seed the random number generator.</span></span><br><span class="line">    rand.Seed(time.Now().Unix())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for all Go programs.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Create a buffered channel to manage the task load.</span></span><br><span class="line">    tasks := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>, taskLoad)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Launch goroutines to handle the work.</span></span><br><span class="line">    wg.Add(numberGoroutines)</span><br><span class="line">    <span class="keyword">for</span> gr := <span class="number">1</span>; gr &lt;= numberGoroutines; gr++ &#123;</span><br><span class="line">        <span class="keyword">go</span> worker(tasks, gr)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add a bunch of work to get done.</span></span><br><span class="line">    <span class="keyword">for</span> post := <span class="number">1</span>; post &lt;= taskLoad; post++ &#123;</span><br><span class="line">        tasks &lt;- fmt.Sprintf(<span class="string">&quot;Task : %d&quot;</span>, post)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Close the channel so the goroutines will quit</span></span><br><span class="line">    <span class="comment">// when all the work is done.</span></span><br><span class="line">    <span class="built_in">close</span>(tasks)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Wait for all the work to get done.</span></span><br><span class="line">    wg.Wait()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// worker is launched as a goroutine to process work from</span></span><br><span class="line"><span class="comment">// the buffered channel.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">worker</span><span class="params">(tasks <span class="keyword">chan</span> <span class="type">string</span>, worker <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="comment">// Report that we just returned.</span></span><br><span class="line">    <span class="keyword">defer</span> wg.Done()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        <span class="comment">// Wait for work to be assigned.</span></span><br><span class="line">        task, ok := &lt;-tasks</span><br><span class="line">        <span class="keyword">if</span> !ok &#123;</span><br><span class="line">            <span class="comment">// This means the channel is empty and closed.</span></span><br><span class="line">            fmt.Printf(<span class="string">&quot;Worker: %d : Shutting Down\n&quot;</span>, worker)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Display we are starting the work.</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Worker: %d : Started %s\n&quot;</span>, worker, task)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Randomly wait to simulate work time.</span></span><br><span class="line">        sleep := rand.Int63n(<span class="number">100</span>)</span><br><span class="line">        time.Sleep(time.Duration(sleep) * time.Millisecond)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Display we finished the work.</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Worker: %d : Completed %s\n&quot;</span>, worker, task)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/goinaction29.png" alt="image.png"></p>
<ul>
<li>å‘é€šé“å‘é€å€¼ &lt;-</li>
</ul>
<p>buffered &lt;- â€œGopherâ€</p>
<ul>
<li>ä»é€šé“æ¥æ”¶å€¼</li>
</ul>
<p>value :&#x3D; &lt;- buffered</p>
<h1 id="æ ‡å‡†åº“"><a href="#æ ‡å‡†åº“" class="headerlink" title="æ ‡å‡†åº“"></a>æ ‡å‡†åº“</h1><h2 id="è®°å½•æ—¥å¿—"><a href="#è®°å½•æ—¥å¿—" class="headerlink" title="è®°å½•æ—¥å¿—"></a>è®°å½•æ—¥å¿—</h2><h3 id="logåŒ…"><a href="#logåŒ…" class="headerlink" title="logåŒ…"></a>logåŒ…</h3><ul>
<li>è®¾ç½®æ—¥å¿—çš„å‰ç¼€ ï¼šlog.SetPrefix(â€œTRACE: â€œ)</li>
<li>è®¾ç½®å†™åˆ°æ—¥å¿—é¡¹çš„ä¿¡æ¯ ï¼š log.SetFlags(log.Ldate | log.Lmicroseconds | log.Llongfile)</li>
</ul>
<p>è¾“å‡º<br>TRACE: 2023&#x2F;06&#x2F;07 17:27:26.146249 &#x2F;mnt&#x2F;d&#x2F;code&#x2F;code-master&#x2F;chapter8&#x2F;listing03&#x2F;listing03.go:15: message<br><img src="/images/goinaction30.png" alt="image.png"><br>iotaæ˜¯å†…ç½®å¸¸é‡ç”Ÿæˆå™¨ï¼š 1&lt;&lt;iota æ¯ä¸ªå¸¸é‡å£°æ˜éƒ½å°†1æŒ‰ä½å·¦ç§»iotaä¸ªä½ç½®<br>logåŒ…æ˜¯å¤šgoroutineå®‰å…¨çš„ï¼Œå¤šä¸ªgoroutineå¯ä»¥è°ƒç”¨æ¥è‡ªåŒä¸€ä¸ªæ—¥å¿—è®°å½•å™¨çš„å‡½æ•°ï¼Œä¸ä¼šæœ‰å†™å†²çªï¼Œç”¨æˆ·å®šåˆ¶çš„æ—¥å¿—å™¨ä¹Ÿåº”è¯¥æ»¡è¶³è¿™ä¸ªæ€§è´¨<br>ï¼ˆå¦‚æœæ²¡æœ‰å†™å…¥éœ€æ±‚ä¹Ÿå¯ä»¥æ²¡æœ‰äº’æ–¥é” team logging repoï¼‰<br>log.Loggerå†…éƒ¨ç»´æŠ¤äº†äº’æ–¥é”mutex<br><img src="/images/goinaction31.png" alt="image.png"><br><img src="/images/goinaction32.png" alt="image.png"></p>
<h3 id="å®šåˆ¶çš„æ—¥å¿—è®°å½•å™¨"><a href="#å®šåˆ¶çš„æ—¥å¿—è®°å½•å™¨" class="headerlink" title="å®šåˆ¶çš„æ—¥å¿—è®°å½•å™¨"></a>å®šåˆ¶çš„æ—¥å¿—è®°å½•å™¨</h3><p>éœ€è¦åˆ›å»ºLoggerç±»å‹å€¼</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// This sample program demonstrates how to create customized loggers.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;io&quot;</span></span><br><span class="line">    <span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">    <span class="string">&quot;log&quot;</span></span><br><span class="line">    <span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    Trace   *log.Logger <span class="comment">// Just about anything</span></span><br><span class="line">    Info    *log.Logger <span class="comment">// Important information</span></span><br><span class="line">    Warning *log.Logger <span class="comment">// Be concerned</span></span><br><span class="line">    Error   *log.Logger <span class="comment">// Critical problem</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    file, err := os.OpenFile(<span class="string">&quot;errors.txt&quot;</span>,</span><br><span class="line">        os.O_CREATE|os.O_WRONLY|os.O_APPEND, <span class="number">0666</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatalln(<span class="string">&quot;Failed to open error log file:&quot;</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Trace = log.New(ioutil.Discard,</span><br><span class="line">        <span class="string">&quot;TRACE: &quot;</span>,</span><br><span class="line">        log.Ldate|log.Ltime|log.Lshortfile)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Info = log.New(os.Stdout,</span><br><span class="line">        <span class="string">&quot;INFO: &quot;</span>,</span><br><span class="line">        log.Ldate|log.Ltime|log.Lshortfile)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Warning = log.New(os.Stdout,</span><br><span class="line">        <span class="string">&quot;WARNING: &quot;</span>,</span><br><span class="line">        log.Ldate|log.Ltime|log.Lshortfile)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Error = log.New(io.MultiWriter(file, os.Stderr),</span><br><span class="line">        <span class="string">&quot;ERROR: &quot;</span>,</span><br><span class="line">        log.Ldate|log.Ltime|log.Lshortfile)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Trace.Println(<span class="string">&quot;I have something standard to say&quot;</span>)</span><br><span class="line">    Info.Println(<span class="string">&quot;Special Information&quot;</span>)</span><br><span class="line">    Warning.Println(<span class="string">&quot;There is something you need to know about&quot;</span>)</span><br><span class="line">    Error.Println(<span class="string">&quot;Something has failed&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç¼–ç -x2F-è§£ç "><a href="#ç¼–ç -x2F-è§£ç " class="headerlink" title="ç¼–ç &#x2F;è§£ç "></a>ç¼–ç &#x2F;è§£ç </h2><h3 id="è§£ç json"><a href="#è§£ç json" class="headerlink" title="è§£ç json"></a>è§£ç json</h3><p>http.Get() ï¼Œjson unmarshalå’Œ shouldbindjsonï¼ˆgin æ¡†æ¶ä¸­çš„ JSON è¯·æ±‚å‚æ•°è§£æå™¨ï¼Œå¯ä»¥å°†å®¢æˆ·ç«¯å‘é€çš„ JSON æ•°æ®è§£ææˆ Go ç»“æ„ä½“ç±»å‹ï¼‰éƒ½æ˜¯å°† JSON æ•°æ®è§£ç ä¸º Go ç»“æ„ä½“çš„æ–¹æ³•ï¼Œä½†å®ƒä»¬ä¹‹é—´å­˜åœ¨ä¸€äº›å·®å¼‚ã€‚</p>
<h4 id="json-NewDecoder-resp-Body-Decode-amp-gr"><a href="#json-NewDecoder-resp-Body-Decode-amp-gr" class="headerlink" title="json.NewDecoder(resp.Body).Decode(&amp;gr)"></a>json.NewDecoder(resp.Body).Decode(&amp;gr)</h4><p>ä½¿ç”¨äº† json.Decoder ç±»å‹æ¥å¤„ç† JSON æ•°æ®ï¼Œå¹¶å…è®¸æˆ‘ä»¬ä»è¾“å…¥æµä¸­é€æ­¥è¯»å–æ•°æ®ã€‚è¿™å¯¹äºå¤„ç†å¤§å‹ JSON æ•°æ®æˆ–éœ€è¦å®æ—¶å¤„ç†è¾“å…¥æ•°æ®çš„æƒ…å†µéå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ http.Response ä¸­çš„ Body å­—æ®µå¹¶ä½¿ç”¨ json.Decoder ç±»å‹ä»è¾“å…¥æµä¸­é€æ­¥è¯»å– JSON æ•°æ®ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">    Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    resp, err := http.Get(<span class="string">&quot;https://jsonplaceholder.typicode.com/users/1&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> user User</span><br><span class="line">    decoder := json.NewDecoder(resp.Body)</span><br><span class="line">    <span class="keyword">if</span> err := decoder.Decode(&amp;user); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(user.Name, user.Age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="json-Unmarshal-data-amp-gr"><a href="#json-Unmarshal-data-amp-gr" class="headerlink" title="json.Unmarshal(data, &amp;gr)"></a>json.Unmarshal(data, &amp;gr)</h4><p>å‡½æ•°æ¥å—ä¸€ä¸ªå­—èŠ‚æ•°ç»„æˆ–å­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥ï¼Œå°†å…¶è§£æä¸ºæŒ‡å®šç±»å‹çš„ç»“æ„ä½“ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ä¼ å…¥çš„ç»“æ„ä½“å˜é‡ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ json.Unmarshal() å°† JSON æ•°æ®è§£ç ä¸º Person ç»“æ„ä½“ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">    Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    data := []<span class="type">byte</span>(<span class="string">`&#123;&quot;name&quot;: &quot;Alice&quot;, &quot;age&quot;: 30&#125;`</span>)</span><br><span class="line">    <span class="keyword">var</span> person Person</span><br><span class="line">    err := json.Unmarshal(data, &amp;person)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(person.Name, person.Age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>var c map[string]interface{}<br>err :&#x3D; json.Unmarshal([]byte(JSON), &amp;c)<br>å¦‚æœååºåˆ—åŒ–åˆ°mapå˜é‡ï¼Œå€¼æ˜¯interface{}ç±»å‹ï¼ˆmap[string]interface{})[â€œhomeâ€]ï¼‰<br>åŸå› ï¼šJSON çš„æ•°æ®ç±»å‹æ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€æ•°ç»„ã€å¯¹è±¡ç­‰å¤šç§ç±»å‹ï¼Œè€Œåœ¨ Go ä¸­ map çš„å€¼ç±»å‹å¿…é¡»æ˜¯å›ºå®šçš„ã€‚å› æ­¤ï¼Œåœ¨å°† JSON æ•°æ®ååºåˆ—åŒ–ä¸º Go map å˜é‡æ—¶ï¼Œéœ€è¦å°†å€¼ç±»å‹è®¾ç½®ä¸º interface{} ç±»å‹ï¼Œä»¥å®¹çº³ä»»ä½•å¯èƒ½çš„ JSON æ•°æ®ç±»å‹ã€‚</p>
<h4 id="Ginæ¡†æ¶ä¸­çš„ShouldBindJSON"><a href="#Ginæ¡†æ¶ä¸­çš„ShouldBindJSON" class="headerlink" title="Ginæ¡†æ¶ä¸­çš„ShouldBindJSON()"></a>Ginæ¡†æ¶ä¸­çš„ShouldBindJSON()</h4><p>ä¸€ä¸ª Gin æ¡†æ¶æä¾›çš„å‡½æ•°ï¼Œç”¨äºå°† HTTP è¯·æ±‚æ­£æ–‡ä¸­çš„ JSON æ•°æ®ç»‘å®šåˆ°æŒ‡å®šçš„ç»“æ„ä½“ä¸­ã€‚å¦‚æœè¯·æ±‚æ­£æ–‡ä¸­çš„ JSON æ•°æ®æ— æ³•ç»‘å®šåˆ°ç»“æ„ä½“ï¼ŒShouldBindJSON() ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ ShouldBindJSON() å°†è¯·æ±‚æ­£æ–‡ä¸­çš„ JSON æ•°æ®ç»‘å®šåˆ° Person ç»“æ„ä½“ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">    Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    r := gin.Default()</span><br><span class="line">    r.POST(<span class="string">&quot;/person&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">        <span class="keyword">var</span> person Person</span><br><span class="line">        <span class="keyword">if</span> err := c.ShouldBindJSON(&amp;person); err != <span class="literal">nil</span> &#123;</span><br><span class="line">            c.JSON(http.StatusBadRequest, gin.H&#123;<span class="string">&quot;error&quot;</span>: err.Error()&#125;)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        c.JSON(http.StatusOK, person)</span><br><span class="line">    &#125;)</span><br><span class="line">    r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º Person çš„ç»“æ„ä½“ç±»å‹ï¼Œå¹¶ä½¿ç”¨ Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ª HTTP POST è·¯ç”±æ¥å¤„ç† JSON æ•°æ®ã€‚åœ¨è·¯ç”±å¤„ç†ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ ShouldBindJSON() å‡½æ•°å°†è¯·æ±‚æ­£æ–‡ä¸­çš„ JSON æ•°æ®ç»‘å®šåˆ° Person ç»“æ„ä½“ã€‚å¦‚æœç»‘å®šå¤±è´¥ï¼Œåˆ™è¿”å›ä¸€ä¸ªé”™è¯¯å“åº”</p>
<p>type User struct {<br>Name string <code>json:&quot;name&quot;</code><br>Age  int    <code>json:&quot;age&quot;</code><br>}</p>
<ul>
<li>å•å¼•å·å£°æ˜çš„å­—ç¬¦ä¸²è¢«ç§°ä½œæ ‡ç­¾ï¼Œå°†jsonæ–‡æ¡£å’Œç»“æ„ç±»å‹é‡Œçš„å­—æ®µæ˜ å°„èµ·æ¥</li>
<li>æ²¡æœ‰æ ‡ç­¾çš„è¯ï¼Œè§£ç å’Œç¼–ç ä¼šä»¥å¤§å°å†™æ— å…³æ–¹å¼ä¸å­—æ®µåå­—åŒ¹é…</li>
<li>è‹¥æ— æ³•åŒ¹é…ï¼Œå¯¹åº”ç»“æ„ç±»å‹çš„å­—æ®µå°±åŒ…å«é›¶å€¼</li>
</ul>
<p>http.Get() ï¼ˆä»äº’è”ç½‘ä¸Šè·å–æ•°æ®ï¼Œä¾‹å¦‚ä» Web æœåŠ¡å™¨æˆ– API ç«¯ç‚¹è·å–æ•°æ®ï¼‰å’Œio.ReadAll()ï¼ˆå°†å“åº”ä½“çš„æ‰€æœ‰å†…å®¹è¯»å–åˆ°ä¸€ä¸ªå­—èŠ‚æ•°ç»„ä¸­ï¼‰å‡½æ•°ä¼šè¯»å– Request.Body ä¸­çš„æ‰€æœ‰æ•°æ®å¹¶å°†å…¶å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè¿™æ„å‘³ç€è¿æ¥ä»ç„¶ä¿æŒæ‰“å¼€çŠ¶æ€ã€‚å¦‚æœä¸æ˜¾å¼å…³é—­è¯·æ±‚ä½“ï¼Œåˆ™ä¼šå¯¼è‡´å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ä¸€ç›´æ‰“å¼€ï¼Œç›´åˆ°è¿æ¥è¶…æ—¶æˆ–å®¢æˆ·ç«¯å…³é—­è¿æ¥ä¸ºæ­¢<br><img src="/images/goinaction33.png" alt="image.png"><br><img src="/images/goinaction34.png" alt="image.png"><br>x.(T) å°†æ¥å£ç±»å‹è½¬æ¢ä¸ºç›®æ ‡ç±»å‹</p>
<h3 id="ç¼–ç json"><a href="#ç¼–ç json" class="headerlink" title="ç¼–ç json"></a>ç¼–ç json</h3><p>json.NewEncoder()ã€json.Marshal() å’Œ Gin æ¡†æ¶ä¸­çš„ JSON() å‡½æ•°éƒ½æ˜¯ç”¨äºå°† Go ç»“æ„ä½“ç±»å‹ç¼–ç ä¸º JSON æ•°æ®çš„æ–¹æ³•ï¼Œä½†å®ƒä»¬ä¹‹é—´å­˜åœ¨ä¸€äº›å·®å¼‚ã€‚</p>
<h4 id="json-NewEncoder-ï¼š"><a href="#json-NewEncoder-ï¼š" class="headerlink" title="json.NewEncoder()ï¼š"></a>json.NewEncoder()ï¼š</h4><p>ä½¿ç”¨ json.Encoder ç±»å‹å°† Go ç»“æ„ä½“ç±»å‹ç¼–ç ä¸º JSON æ•°æ®ï¼Œå¹¶å…è®¸æˆ‘ä»¬é€æ­¥å†™å…¥è¾“å‡ºæµã€‚è¿™å¯¹äºéœ€è¦å®æ—¶å¤„ç†è¾“å‡ºæ•°æ®æˆ–å¤„ç†å¤§å‹ JSON æ•°æ®çš„æƒ…å†µéå¸¸æœ‰ç”¨ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">    Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    person := Person&#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">30</span>&#125;</span><br><span class="line">    encoder := json.NewEncoder(os.Stdout)</span><br><span class="line">    <span class="keyword">if</span> err := encoder.Encode(person); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º Person çš„ç»“æ„ä½“ç±»å‹ï¼ŒåŒ…å«ä¸¤ä¸ªå±æ€§ï¼šName å’Œ Ageã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ json.NewEncoder() å°† Person ç»“æ„ä½“ç±»å‹ç¼–ç ä¸º JSON æ•°æ®ï¼Œå¹¶å°†å…¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæµä¸­ã€‚</p>
<h4 id="json-Marshal"><a href="#json-Marshal" class="headerlink" title="json.Marshal()"></a>json.Marshal()</h4><p>å°† Go ç»“æ„ä½“ç±»å‹ç¼–ç ä¸º JSON æ•°æ®ï¼Œå¹¶å°†å…¶ä½œä¸ºå­—èŠ‚æ•°ç»„è¿”å›ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">    Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    person := Person&#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">30</span>&#125;</span><br><span class="line">    data, err := json.Marshal(person)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="type">string</span>(data))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º Person çš„ç»“æ„ä½“ç±»å‹ï¼ŒåŒ…å«ä¸¤ä¸ªå±æ€§ï¼šName å’Œ Ageã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ json.Marshal() å°† Person ç»“æ„ä½“ç±»å‹ç¼–ç ä¸º JSON æ•°æ®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ data å˜é‡ä¸­ï¼Œæœ€åæ‰“å° data å˜é‡çš„å†…å®¹ã€‚</p>
<h4 id="Gin-æ¡†æ¶ä¸­çš„-JSON-å‡½æ•°"><a href="#Gin-æ¡†æ¶ä¸­çš„-JSON-å‡½æ•°" class="headerlink" title="Gin æ¡†æ¶ä¸­çš„ JSON() å‡½æ•°"></a>Gin æ¡†æ¶ä¸­çš„ JSON() å‡½æ•°</h4><p>å°† Go ç»“æ„ä½“ç±»å‹ç¼–ç ä¸º JSON æ•°æ®ï¼Œå¹¶å°†å…¶å‘é€å›å®¢æˆ·ç«¯ä½œä¸º HTTP å“åº”ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">    Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    r := gin.Default()</span><br><span class="line">    r.GET(<span class="string">&quot;/person&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">        person := Person&#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">30</span>&#125;</span><br><span class="line">        c.JSON(http.StatusOK, person)</span><br><span class="line">    &#125;)</span><br><span class="line">    r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Gin æ¡†æ¶åˆ›å»ºäº†ä¸€ä¸ª HTTP GET è·¯ç”±æ¥å¤„ç†è¯·æ±‚ï¼Œå¹¶ä½¿ç”¨ JSON() å‡½æ•°å°† Person ç»“æ„ä½“ç±»å‹ç¼–ç ä¸º JSON æ•°æ®ï¼Œå¹¶å°†å…¶ä½œä¸ºå“åº”å‘é€å›å®¢æˆ·ç«¯ã€‚<br>å¯¹æ¯”ï¼š<br>c.PureJSON() æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå°†ä¸€ä¸ªç»“æ„ä½“æˆ– map è½¬æ¢ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶ä½œä¸º HTTP å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ä¸ c.JSON() æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œc.PureJSON() ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œ HTML è½¬ä¹‰ã€‚è¿™æ„å‘³ç€å¦‚æœæ‚¨éœ€è¦åœ¨ JSON ä¸­åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆä¾‹å¦‚ &lt;, &gt;, &amp;ï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ c.PureJSON() æ¥é¿å…è¿™äº›å­—ç¬¦è¢«è½¬ä¹‰ä¸º HTML å®ä½“</p>
<p>æ€»çš„æ¥è¯´ï¼Œjson.NewEncoder()ã€json.Marshal() å’Œ Gin æ¡†æ¶ä¸­çš„ JSON() å‡½æ•°éƒ½æ˜¯ç”¨äºå°† Go ç»“æ„ä½“ç±»å‹ç¼–ç ä¸º JSON æ•°æ®çš„æ–¹æ³•ã€‚å…¶ä¸­ï¼Œjson.NewEncoder() å¯¹äºå¤„ç†å¤§å‹ JSON æ•°æ®æˆ–éœ€è¦å®æ—¶å¤„ç†è¾“å‡ºæ•°æ®çš„æƒ…å†µéå¸¸æœ‰ç”¨ï¼Œè€Œ json.Marshal() åˆ™ç›´æ¥è¿”å›ç¼–ç åçš„ JSON å­—ç¬¦ä¸²ï¼Œè€Œ Gin æ¡†æ¶ä¸­çš„ JSON() å‡½æ•°åˆ™ç›´æ¥å°†ç¼–ç åçš„ JSON æ•°æ®ä½œä¸ºå“åº”å‘é€ç»™å®¢æˆ·ç«¯</p>
<h2 id="è¾“å…¥å’Œè¾“å‡º"><a href="#è¾“å…¥å’Œè¾“å‡º" class="headerlink" title="è¾“å…¥å’Œè¾“å‡º"></a>è¾“å…¥å’Œè¾“å‡º</h2><p>åªè¦å®ç°äº†io.Writerå’Œio.Readerä¸¤ä¸ªæ¥å£ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ioåŒ…æä¾›çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨äºå…¶ä»–åŒ…é‡Œæ¥æ”¶è¿™ä¸¤ä¸ªæ¥å£çš„å‡½æ•°åŠæ–¹æ³•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">    Read(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> &#123;</span><br><span class="line">    Write(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Sample program to show how different functions from the</span></span><br><span class="line"><span class="comment">// standard library use the io.Writer interface.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;bytes&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;os&quot;</span></span><br><span class="line">    <span class="string">&quot;io&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main is the entry point for the application.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Create a Buffer value and write a string to the buffer.</span></span><br><span class="line">    <span class="comment">// Using the Write method that implements io.Writer.</span></span><br><span class="line">    <span class="keyword">var</span> b bytes.Buffer</span><br><span class="line">    b.Write([]<span class="type">byte</span>(<span class="string">&quot;Hello &quot;</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Use Fprintf to concatenate a string to the Buffer.</span></span><br><span class="line">    <span class="comment">// Passing the address of a bytes.Buffer value for io.Writer.</span></span><br><span class="line">    fmt.Fprintf(&amp;b, <span class="string">&quot;World!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>func Fprintf(w io.Writer, format string, a â€¦any) (n int, err error)<br>Bufferå®ç°äº†Writeræ–¹æ³• æ‰€ä»¥å¯ä»¥ä¼ å…¥Fprintfå‡½æ•°é‡Œ<br>func (b *Buffer) Write(p []byte) (n int, err error)</p>
<h1 id="æµ‹è¯•å’Œæ€§èƒ½"><a href="#æµ‹è¯•å’Œæ€§èƒ½" class="headerlink" title="æµ‹è¯•å’Œæ€§èƒ½"></a>æµ‹è¯•å’Œæ€§èƒ½</h1><p>éœ€è¦éµå®ˆçš„è§„å®š</p>
<ul>
<li>goè¯­è¨€æµ‹è¯•å·¥å…·åªä¼šè®¤ä¸º_test.goç»“å°¾çš„æ–‡ä»¶æ˜¯æµ‹è¯•æ–‡ä»¶</li>
</ul>
<p>ï¼ˆå¦‚æœæ²¡æœ‰ go testå‘½ä»¤æ—¶å°±ä¼šæŠ¥ï¼š?       command-line-arguments  [no test files]ï¼‰</p>
<ul>
<li>éœ€è¦import testing åŒ…</li>
<li>æµ‹è¯•å‡½æ•°æ˜¯å…¬å¼€å‡½æ•°ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰ï¼Œå¹¶ä»¥Testå¼€å¤´ï¼Œå¿…é¡»æ¥æ”¶testing.Tç±»å‹çš„æŒ‡é’ˆ-&gt; æŠ¥å‘Šæ¯ä¸ªæµ‹è¯•çš„è¾“å‡ºå’ŒçŠ¶æ€</li>
</ul>
<p>go test -v xxx_test.go<br>(-v éœ€è¦åŠ å…¥å†—ä½™é€‰é¡¹ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">package listing01</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">import</span> <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="string">&quot;testing&quot;</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">func <span class="title">TestDownload</span><span class="params">(t *testing.T)</span></span></span><br></pre></td></tr></table></figure>






]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go in action</tag>
      </tags>
  </entry>
  <entry>
    <title>Go mod</title>
    <url>/Go%20mod/</url>
    <content><![CDATA[<h1 id="Go-mod"><a href="#Go-mod" class="headerlink" title="Go mod"></a>Go mod</h1><ul>
<li><p>Goè¯­è¨€é»˜è®¤çš„ä¾èµ–ç®¡ç†å·¥å…·</p>
</li>
<li><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>go mod download</td>
<td>ä¸‹è½½ä¾èµ–åŒ…åˆ°æœ¬åœ°ï¼ˆé»˜è®¤ä¸º GOPATH&#x2F;pkg&#x2F;mod ç›®å½•ï¼‰</td>
</tr>
<tr>
<td>go mod edit</td>
<td>ç¼–è¾‘ go.mod æ–‡ä»¶</td>
</tr>
<tr>
<td>go mod graph</td>
<td>æ‰“å°æ¨¡å—ä¾èµ–å›¾</td>
</tr>
<tr>
<td>go mod init</td>
<td>åˆå§‹åŒ–å½“å‰æ–‡ä»¶å¤¹ï¼Œåˆ›å»º go.mod æ–‡ä»¶</td>
</tr>
<tr>
<td>go mod tidy</td>
<td>å¢åŠ ç¼ºå°‘çš„åŒ…ï¼Œåˆ é™¤æ— ç”¨çš„åŒ…</td>
</tr>
<tr>
<td>go mod vendor</td>
<td>å°†ä¾èµ–å¤åˆ¶åˆ° vendor ç›®å½•ä¸‹</td>
</tr>
<tr>
<td>go mod verify</td>
<td>æ ¡éªŒä¾èµ–</td>
</tr>
<tr>
<td>go mod why</td>
<td>è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–</td>
</tr>
</tbody></table>
</li>
<li><p>export GOPROXY&#x3D;<a href="https://goproxy.cn/">https://goproxy.cn</a> ä½¿ç”¨ä»£ç†æœåŠ¡å™¨</p>
</li>
<li><p>go.mod æ–‡ä»¶ä¸€æ—¦åˆ›å»ºåï¼Œå®ƒçš„å†…å®¹å°†ä¼šè¢« go toolchain å…¨é¢æŒæ§ï¼Œgo toolchain ä¼šåœ¨å„ç±»å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œæ¯”å¦‚<code>go get</code>ã€<code>go build</code>ã€<code>go mod</code>ç­‰ä¿®æ”¹å’Œç»´æŠ¤ go.mod æ–‡ä»¶</p>
</li>
<li><p>ä½¿ç”¨</p>
<ol>
<li><p>åˆå§‹åŒ–ç”Ÿæˆgo.modæ–‡ä»¶</p>
<p><code>go mod init</code></p>
</li>
<li><p>go.mod æä¾›äº† moduleã€requireã€replace å’Œ exclude å››ä¸ªå‘½ä»¤ï¼š</p>
<ul>
<li>module è¯­å¥æŒ‡å®šåŒ…çš„åå­—ï¼ˆè·¯å¾„ï¼‰</li>
<li>require è¯­å¥æŒ‡å®šçš„ä¾èµ–é¡¹æ¨¡å—</li>
<li>replace è¯­å¥å¯ä»¥æ›¿æ¢ä¾èµ–é¡¹æ¨¡å—</li>
<li>exclude è¯­å¥å¯ä»¥å¿½ç•¥ä¾èµ–é¡¹æ¨¡å—</li>
</ul>
</li>
</ol>
</li>
</ul>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go basic</tag>
      </tags>
  </entry>
  <entry>
    <title>slice å’Œ map çº¿ç¨‹å®‰å…¨é—®é¢˜</title>
    <url>/goinactionSliceMap/</url>
    <content><![CDATA[<h1 id="sliceå’Œmapåº•å±‚ç»“æ„ä¸æºç "><a href="#sliceå’Œmapåº•å±‚ç»“æ„ä¸æºç " class="headerlink" title="sliceå’Œmapåº•å±‚ç»“æ„ä¸æºç "></a>sliceå’Œmapåº•å±‚ç»“æ„ä¸æºç </h1><ul>
<li><p>sliceæºç ä½ç½®åœ¨$GOPATH&#x2F;src&#x2F;runtime&#x2F;slice.go</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> slice <span class="keyword">struct</span> &#123;</span><br><span class="line">	array unsafe.Pointer</span><br><span class="line">	<span class="built_in">len</span>   <span class="type">int</span></span><br><span class="line">	<span class="built_in">cap</span>   <span class="type">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>sliceç»“æ„ç±»ä¼¼vector, åº•å±‚æ˜¯æ•°ç»„ï¼Œä¼ é€’çš„æ—¶å€™æ˜¯ä¼ é€’çš„æŒ‡é’ˆï¼Œé•¿åº¦å’Œå®¹é‡ï¼Œæ˜¯å¼•ç”¨ç±»å‹</p>
</li>
<li><p>mapæºç ä½ç½®åœ¨$GOPATH&#x2F;src&#x2F;runtime&#x2F;map.go</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">bucketCntBits = <span class="number">3</span></span><br><span class="line">bucketCnt     = <span class="number">1</span> &lt;&lt; bucketCntBits</span><br><span class="line"></span><br><span class="line"><span class="comment">// A bucket for a Go map.</span></span><br><span class="line"><span class="keyword">type</span> bmap <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">// tophash generally contains the top byte of the hash value</span></span><br><span class="line">	<span class="comment">// for each key in this bucket. If tophash[0] &lt; minTopHash,</span></span><br><span class="line">	<span class="comment">// tophash[0] is a bucket evacuation state instead.</span></span><br><span class="line">	tophash [bucketCnt]<span class="type">uint8</span></span><br><span class="line">	<span class="comment">// Followed by bucketCnt keys and then bucketCnt elems.</span></span><br><span class="line">	<span class="comment">// <span class="doctag">NOTE:</span> packing all the keys together and then all the elems together makes the</span></span><br><span class="line">	<span class="comment">// code a bit more complicated than alternating key/elem/key/elem/... but it allows</span></span><br><span class="line">	<span class="comment">// us to eliminate padding which would be needed for, e.g., map[int64]int8.</span></span><br><span class="line">	<span class="comment">// Followed by an overflow pointer.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ1ï¼‰mapæ˜¯æ•°ç»„å­˜å‚¨çš„çš„ï¼Œæ¯ä¸ªæ•°ç»„ä¸‹æ ‡å¤„å­˜å‚¨çš„æ˜¯ä¸€ä¸ªbucket,è¿™ä¸ªbucketçš„ç±»å‹è§ä¸Šé¢ä»£ç ï¼Œæ¯ä¸ªbucketä¸­å¯ä»¥å­˜å‚¨8ä¸ªkvé”®å€¼å¯¹ï¼Œå½“æ¯ä¸ªbucketå­˜å‚¨çš„kvå¯¹åˆ°è¾¾8ä¸ªä¹‹åï¼Œä¼šé€šè¿‡overflowæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ–°çš„bucketï¼Œä»è€Œå½¢æˆä¸€ä¸ªé“¾è¡¨,çœ‹bmapçš„ç»“æ„<br>ï¼ˆ2ï¼‰å½“å¾€mapä¸­å­˜å‚¨ä¸€ä¸ªkvå¯¹æ—¶ï¼š<br>é€šè¿‡kè·å–hashå€¼ï¼Œhashå€¼çš„ä½å…«ä½å’Œbucketæ•°ç»„é•¿åº¦å–ä½™ï¼Œå®šä½åˆ°åœ¨æ•°ç»„ä¸­çš„é‚£ä¸ªä¸‹æ ‡<br>hashå€¼çš„é«˜å…«ä½å­˜å‚¨åœ¨bucketä¸­çš„tophashä¸­ï¼Œç”¨æ¥å¿«é€Ÿåˆ¤æ–­keyæ˜¯å¦å­˜åœ¨<br>keyå’Œvalueçš„å…·ä½“å€¼åˆ™é€šè¿‡æŒ‡é’ˆè¿ç®—å­˜å‚¨<br>å½“ä¸€ä¸ªbucketæ»¡æ—¶ï¼Œé€šè¿‡overfolwæŒ‡é’ˆé“¾æ¥åˆ°ä¸‹ä¸€ä¸ªbucket<br><img src="/images/goinaction5.png" alt="image.png"></p>
</li>
</ul>
<h1 id="sliceçº¿ç¨‹å®‰å…¨"><a href="#sliceçº¿ç¨‹å®‰å…¨" class="headerlink" title="sliceçº¿ç¨‹å®‰å…¨"></a>sliceçº¿ç¨‹å®‰å…¨</h1><ul>
<li>å¤šçº¿ç¨‹æ˜¯sliceæ˜¯ä¸å®‰å…¨çš„</li>
</ul>
<p>å½“å®¹é‡ä¸å¤Ÿï¼Œsliceå¢é•¿æ—¶ï¼Œå­˜åœ¨å¤šçº¿ç¨‹ç«äº‰çš„é—®é¢˜ï¼š<br>ä¸‹é¢è¿™æ®µä»£ç forå¾ªç¯å¯åŠ¨10ä¸ªgoroutineè¿è¡Œï¼Œæ¯ä¸ªgoroutineå‘sliceé‡Œæ·»åŠ ä¸€ä¸ªå…ƒç´ a</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> slice []<span class="type">int</span></span><br><span class="line">	n := <span class="number">10</span></span><br><span class="line">	<span class="keyword">var</span> sum <span class="type">int</span></span><br><span class="line">	wg := sync.WaitGroup&#123;&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len:%d, cap:%d, slice:%v\n&quot;</span>, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice), slice)</span><br><span class="line"></span><br><span class="line">	wg.Add(n)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">		<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(a <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">			<span class="keyword">defer</span> wg.Done()</span><br><span class="line">			sum++</span><br><span class="line">			slice = <span class="built_in">append</span>(slice, a)</span><br><span class="line">			fmt.Printf(<span class="string">&quot;a:%d, len:%d, cap:%d, slice:%v\n&quot;</span>, a, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice), slice)</span><br><span class="line">		&#125;(i)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	wg.Wait()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len:%d, cap:%d, slice:%v\n&quot;</span>, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice), slice)</span><br><span class="line">	fmt.Println(sum)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>output:<br><img src="/images/goinaction6.png" alt="image.png"><br>è¿è¡Œçœ‹å‡ºï¼Œlen(slice)ä¸æ˜¯é¢„æœŸçš„nï¼Œè€Œå°äºäº†n<br>a&#x3D;7çš„æ—¶å€™ï¼Œ slice&#x3D;[9 4 5 6 7]<br>a&#x3D;3çš„æ—¶å€™ï¼Œslice&#x3D;[9 4 5 6 3]<br>å¯ä»¥çœ‹å‡ºæ˜¯åœ¨slice&#x3D;[9 4 5 6]æ—¶æ‰©å®¹ï¼Œä¹‹å‰cap&#x3D;4, a&#x3D;7å’Œa&#x3D;3çš„æ—¶å€™ï¼ŒåŒæ—¶æ‰©å®¹ï¼Œå°†åŸæ¥çš„9 4 5 6æ‹·è´è¿‡æ¥ï¼Œå¹¶åœ¨æ–°ä½ç½®åŠ ä¸Šå¯¹åº”å…ƒç´ ï¼Œä¸¤ä¸ªgoroutineåŒæ—¶è¿è¡Œï¼Œå‡ºç°äº†ç´¢å¼•ä½è¦†å†™é—®é¢˜<br>ç´¢å¼•ä½è¦†å†™ï¼šåŒæ—¶ä¿®æ”¹ç›¸åŒç´¢å¼•ä½ç½®çš„å…ƒç´ </p>
<h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><h3 id="goroutineç­‰å¾…å…¶ä»–goroutineå®Œæˆä»»åŠ¡"><a href="#goroutineç­‰å¾…å…¶ä»–goroutineå®Œæˆä»»åŠ¡" class="headerlink" title="goroutineç­‰å¾…å…¶ä»–goroutineå®Œæˆä»»åŠ¡"></a>goroutineç­‰å¾…å…¶ä»–goroutineå®Œæˆä»»åŠ¡</h3><p>forå¾ªç¯ä¸­å¯¹æ¯ä¸ªgoroutineå†…éƒ¨éƒ½å¢åŠ äº†ç­‰å¾…ä»»åŠ¡ï¼Œå¿…é¡»ç­‰å¾…å…¶ä»–goroutineå®Œæˆæ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œè¿™æ ·èƒ½å®‰å…¨çš„è®¿é—®slice</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> slice []<span class="type">int</span></span><br><span class="line">    n := <span class="number">10</span></span><br><span class="line">    <span class="keyword">var</span> sum <span class="type">int</span></span><br><span class="line">    wg := sync.WaitGroup&#123;&#125;</span><br><span class="line"></span><br><span class="line">    fmt.Printf(<span class="string">&quot;len:%d, cap:%d, slice:%v\n&quot;</span>, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice), slice)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">        wg.Add(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(a <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">defer</span> wg.Done()</span><br><span class="line">            sum++</span><br><span class="line">            slice = <span class="built_in">append</span>(slice, a)</span><br><span class="line">            fmt.Printf(<span class="string">&quot;a:%d, len:%d, cap:%d, slice:%v\n&quot;</span>, a, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice), slice)</span><br><span class="line">        &#125;(i)</span><br><span class="line">        wg.Wait()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fmt.Printf(<span class="string">&quot;len:%d, cap:%d, slice:%v\n&quot;</span>, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice), slice)</span><br><span class="line">    fmt.Println(sum)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>output:<br><img src="/images/goinaction7.png" alt="image.png"><br>åˆ‡ç‰‡sliceä¸­ç›¸åŒç´¢å¼•ä¸‹å­˜æ”¾çš„å€¼æ€»æ˜¯ç›¸åŒçš„</p>
<h4 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h4><p>æ‰€æœ‰goroutineé˜»å¡ï¼Œæ— æ³•å¹¶å‘æ‰§è¡Œï¼Œå½±å“æ€§èƒ½</p>
<h3 id="åŠ é”"><a href="#åŠ é”" class="headerlink" title="åŠ é”"></a>åŠ é”</h3><p>å¯¹æ•°æ®ä¿®æ”¹çš„æ—¶å€™åŠ é”</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> slice []<span class="type">int</span></span><br><span class="line">	n := <span class="number">10</span></span><br><span class="line">	<span class="keyword">var</span> sum <span class="type">int</span></span><br><span class="line">	wg := sync.WaitGroup&#123;&#125;</span><br><span class="line">	mutex := sync.Mutex&#123;&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len:%d, cap:%d, slice:%v\n&quot;</span>, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice), slice)</span><br><span class="line"></span><br><span class="line">	wg.Add(n)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">		<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(a <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">			<span class="keyword">defer</span> wg.Done()</span><br><span class="line">			mutex.Lock()</span><br><span class="line">			<span class="keyword">defer</span> mutex.Unlock()</span><br><span class="line">			sum++</span><br><span class="line">			slice = <span class="built_in">append</span>(slice, a)</span><br><span class="line">			fmt.Printf(<span class="string">&quot;a:%d, len:%d, cap:%d, slice:%v\n&quot;</span>, a, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice), slice)</span><br><span class="line">		&#125;(i)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	wg.Wait()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len:%d, cap:%d, slice:%v\n&quot;</span>, <span class="built_in">len</span>(slice), <span class="built_in">cap</span>(slice), slice)</span><br><span class="line">	fmt.Println(sum)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>output:<br><img src="/images/goinaction8.png" alt="image.png"><br>åˆ‡ç‰‡sliceä¸­ç›¸åŒç´¢å¼•ä¸‹å­˜æ”¾çš„å€¼æ€»æ˜¯ç›¸åŒçš„</p>
<h1 id="mapçº¿ç¨‹å®‰å…¨"><a href="#mapçº¿ç¨‹å®‰å…¨" class="headerlink" title="mapçº¿ç¨‹å®‰å…¨"></a>mapçº¿ç¨‹å®‰å…¨</h1><ul>
<li>å¤šçº¿ç¨‹æ˜¯mapæ˜¯ä¸å®‰å…¨çš„</li>
</ul>
<p>ä¸‹é¢è¿™æ®µä»£ç forå¾ªç¯å¯åŠ¨10ä¸ªgoroutineè¿è¡Œï¼Œæ¯ä¸ªgoroutineå‘mapé‡Œæ·»åŠ ä¸€ä¸ªå…ƒç´ a</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    mp := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>)</span><br><span class="line">    n := <span class="number">10</span></span><br><span class="line">    <span class="keyword">var</span> sum <span class="type">int</span></span><br><span class="line">    wg := sync.WaitGroup&#123;&#125;</span><br><span class="line"></span><br><span class="line">    fmt.Printf(<span class="string">&quot;len:%d, mp:%v\n&quot;</span>, <span class="built_in">len</span>(mp), mp)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    wg.Add(n)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(a <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">defer</span> wg.Done()</span><br><span class="line">            sum++</span><br><span class="line">            mp[a] = a</span><br><span class="line">            fmt.Printf(<span class="string">&quot;a:%d, len:%d, mp:%v\n&quot;</span>, a, <span class="built_in">len</span>(mp), mp)</span><br><span class="line">        &#125;(i)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    wg.Wait()</span><br><span class="line">    fmt.Printf(<span class="string">&quot;len:%d, mp:%v\n&quot;</span>, <span class="built_in">len</span>(mp), mp)</span><br><span class="line">    fmt.Println(sum)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>output:<br><img src="/images/goinaction9.png" alt="image.png"><br>mapçº¿ç¨‹ä¸å®‰å…¨ä¸èƒ½æˆåŠŸè¿è¡Œ<br>è§£å†³æ–¹æ³•å’Œsliceç›¸ä¼¼ï¼šåŠ é”<br>ä¿®æ”¹åèƒ½æˆåŠŸè¿è¡Œ</p>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go in action</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®ç»“æ„</title>
    <url>/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
    <content><![CDATA[<h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><p>[toc]</p>
<h2 id="æ•´å‹"><a href="#æ•´å‹" class="headerlink" title="æ•´å‹"></a>æ•´å‹</h2><ul>
<li>æœ‰ç¬¦å·æ•´å‹int8ã€int16ã€int32ã€int64</li>
<li>æ— ç¬¦å·æ•´å‹uint8ã€uint16ã€uint32ã€uint64</li>
<li>intå’Œuintå¯¹åº”ç‰¹å®šCPUå¹³å°æœºå™¨å­—å¤§å°çš„æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°</li>
</ul>
<h2 id="æµ®ç‚¹æ•°"><a href="#æµ®ç‚¹æ•°" class="headerlink" title="æµ®ç‚¹æ•°"></a>æµ®ç‚¹æ•°</h2><ul>
<li>Goè¯­è¨€æä¾›äº†ä¸¤ç§ç²¾åº¦çš„æµ®ç‚¹æ•°ï¼Œfloat32å’Œfloat64</li>
<li>math.MaxFloat32è¡¨ç¤ºfloat32èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°å€¼</li>
</ul>
<h2 id="å¸ƒå°”å‹"><a href="#å¸ƒå°”å‹" class="headerlink" title="å¸ƒå°”å‹"></a>å¸ƒå°”å‹</h2><ul>
<li>å¸ƒå°”å€¼å¹¶ä¸ä¼šéšå¼è½¬æ¢ä¸ºæ•°å­—å€¼0æˆ–1</li>
</ul>
<h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><ul>
<li><p>å†…ç½®çš„lenå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å­—èŠ‚æ•°ç›®</p>
</li>
<li><p>ç´¢å¼•æ“ä½œs[i]è¿”å›ç¬¬iä¸ªå­—èŠ‚çš„å­—èŠ‚å€¼</p>
</li>
<li><p>å­å­—ç¬¦ä¸²æ“ä½œs[i:j]åŸºäºåŸå§‹çš„så­—ç¬¦ä¸²çš„ç¬¬iä¸ªå­—èŠ‚å¼€å§‹åˆ°ç¬¬jä¸ªå­—èŠ‚ï¼ˆå¹¶ä¸åŒ…å«jæœ¬èº«ï¼‰ç”Ÿæˆä¸€ä¸ªæ–°å­—ç¬¦ä¸²,ç”Ÿæˆçš„æ–°å­—ç¬¦ä¸²å°†åŒ…å«j-iä¸ªå­—èŠ‚ï¼Œiè¿˜æ˜¯jéƒ½å¯èƒ½è¢«å¿½ç•¥ï¼Œå½“å®ƒä»¬è¢«å¿½ç•¥æ—¶å°†é‡‡ç”¨0ä½œä¸ºå¼€å§‹ä½ç½®ï¼Œé‡‡ç”¨len(s)ä½œä¸ºç»“æŸçš„ä½ç½®</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">  s := <span class="string">&quot;hello, world&quot;</span></span><br><span class="line">  fmt.Println(s[:<span class="number">5</span>]) <span class="comment">// &quot;hello&quot;</span></span><br><span class="line">  fmt.Println(s[<span class="number">7</span>:]) <span class="comment">// &quot;world&quot;</span></span><br><span class="line">  fmt.Println(s[:])  <span class="comment">// &quot;hello, world&quot;</span></span><br><span class="line"></span><br><span class="line">* è¯•å›¾è®¿é—®è¶…å‡ºå­—ç¬¦ä¸²ç´¢å¼•èŒƒå›´çš„å­—èŠ‚å°†å¯¼è‡´<span class="built_in">panic</span>å¼‚å¸¸</span><br><span class="line"></span><br><span class="line">* å­—ç¬¦ä¸²æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œå› æ­¤å°è¯•ä¿®æ”¹å­—ç¬¦ä¸²å†…éƒ¨æ•°æ®çš„æ“ä½œä¹Ÿæ˜¯è¢«ç¦æ­¢çš„</span><br><span class="line"></span><br><span class="line">* ç”¨<span class="string">``</span>è¡¨ç¤ºåŸç”Ÿçš„å­—ç¬¦ä¸²é¢å€¼ï¼Œåœ¨åŸç”Ÿçš„å­—ç¬¦ä¸²é¢å€¼ä¸­ï¼Œæ²¡æœ‰è½¬ä¹‰æ“ä½œï¼›å…¨éƒ¨çš„å†…å®¹éƒ½æ˜¯å­—é¢çš„æ„æ€ï¼ŒåŒ…å«é€€æ ¼å’Œæ¢è¡Œ</span><br><span class="line"></span><br><span class="line">* åŸç”Ÿå­—ç¬¦ä¸²é¢å€¼åŒæ—¶è¢«å¹¿æ³›åº”ç”¨äºHTMLæ¨¡æ¿ã€JSONé¢å€¼ã€å‘½ä»¤è¡Œæç¤ºä¿¡æ¯ä»¥åŠé‚£äº›éœ€è¦æ‰©å±•åˆ°å¤šè¡Œçš„åœºæ™¯</span><br><span class="line"></span><br><span class="line">* Unicodeæ¯ä¸ªç¬¦å·éƒ½åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„Unicodeç ç‚¹ï¼ŒUnicodeç ç‚¹å¯¹åº”Goè¯­è¨€ä¸­çš„<span class="type">rune</span>æ•´æ•°ç±»å‹ï¼ˆè¯‘æ³¨ï¼š<span class="type">rune</span>æ˜¯<span class="type">int32</span>ç­‰ä»·ç±»å‹ï¼‰</span><br><span class="line"></span><br><span class="line">* å°†ä¸€ä¸ªæ•´æ•°è½¬å‹ä¸ºå­—ç¬¦ä¸²æ„æ€æ˜¯ç”Ÿæˆä»¥åªåŒ…å«å¯¹åº”Unicodeç ç‚¹å­—ç¬¦çš„UTF8å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">  <span class="string">``</span><span class="string">`go</span></span><br><span class="line"><span class="string">  fmt.Println(string(65))     // &quot;A&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>stringsåŒ…æä¾›äº†è®¸å¤šå¦‚å­—ç¬¦ä¸²çš„æŸ¥è¯¢ã€æ›¿æ¢ã€æ¯”è¾ƒã€æˆªæ–­ã€æ‹†åˆ†å’Œåˆå¹¶ç­‰åŠŸèƒ½</p>
</li>
<li><p>bytesåŒ…ä¹Ÿæä¾›äº†å¾ˆå¤šç±»ä¼¼åŠŸèƒ½çš„å‡½æ•°ï¼Œä½†æ˜¯é’ˆå¯¹å’Œå­—ç¬¦ä¸²æœ‰ç€ç›¸åŒç»“æ„çš„[]byteç±»å‹ã€‚å› ä¸ºå­—ç¬¦ä¸²æ˜¯åªè¯»çš„</p>
</li>
<li><p>strconvåŒ…æä¾›äº†å¸ƒå°”å‹ã€æ•´å‹æ•°ã€æµ®ç‚¹æ•°å’Œå¯¹åº”å­—ç¬¦ä¸²çš„ç›¸äº’è½¬æ¢ï¼Œè¿˜æä¾›äº†åŒå¼•å·è½¬ä¹‰ç›¸å…³çš„è½¬æ¢</p>
</li>
<li><p>unicodeåŒ…æä¾›äº†IsDigitã€IsLetterã€IsUpperå’ŒIsLowerç­‰ç±»ä¼¼åŠŸèƒ½ï¼Œå®ƒä»¬ç”¨äºç»™å­—ç¬¦åˆ†ç±»</p>
</li>
<li><p>å°†ä¸€ä¸ªæ•´æ•°è½¬ä¸ºå­—ç¬¦ä¸²fmt.Sprintf æˆ–è€… strconv.Itoa()</p>
</li>
<li><p>å°†å­—ç¬¦ä¸²è§£æä¸ºæ•´æ•°strconvåŒ…Atoi() æˆ–è€… ParseInt()</p>
</li>
</ul>
<h2 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h2><ul>
<li><p>å¸¸é‡è¡¨è¾¾å¼åœ¨ç¼–è¯‘æœŸè®¡ç®—</p>
</li>
<li><p>å’Œå˜é‡å£°æ˜ä¸€æ ·å¯ä»¥æ‰¹é‡å£°æ˜å¤šä¸ªå¸¸é‡</p>
</li>
<li><p>æ‰¹é‡å£°æ˜çš„å¸¸é‡ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå¤–å…¶å®ƒçš„å¸¸é‡å³è¾¹çš„åˆå§‹åŒ–è¡¨è¾¾å¼éƒ½å¯ä»¥çœç•¥ï¼Œå¦‚æœçœç•¥åˆå§‹åŒ–è¡¨è¾¾å¼åˆ™è¡¨ç¤ºä½¿ç”¨å‰é¢å¸¸é‡çš„åˆå§‹åŒ–è¡¨è¾¾å¼å†™æ³•</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    b</span><br><span class="line">    c = <span class="number">2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¸¸é‡å£°æ˜å¯ä»¥ä½¿ç”¨iotaå¸¸é‡ç”Ÿæˆå™¨åˆå§‹åŒ–ï¼Œç”¨äºç”Ÿæˆä¸€ç»„ä»¥ç›¸ä¼¼è§„åˆ™åˆå§‹åŒ–çš„å¸¸é‡</p>
</li>
<li><p>åœ¨ä¸€ä¸ªconstå£°æ˜è¯­å¥ä¸­ï¼Œåœ¨ç¬¬ä¸€ä¸ªå£°æ˜çš„å¸¸é‡æ‰€åœ¨çš„è¡Œï¼Œiotaå°†ä¼šè¢«ç½®ä¸º0ï¼Œç„¶ååœ¨æ¯ä¸€ä¸ªæœ‰å¸¸é‡å£°æ˜çš„è¡ŒåŠ ä¸€(æšä¸¾)</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Weekday <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    Sunday Weekday = <span class="literal">iota</span></span><br><span class="line">    Monday</span><br><span class="line">    Tuesday</span><br><span class="line">    Wednesday</span><br><span class="line">    Thursday</span><br><span class="line">    Friday</span><br><span class="line">    Saturday</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¯‘å™¨ä¸ºæ²¡æœ‰æ˜ç¡®åŸºç¡€ç±»å‹çš„æ•°å­—å¸¸é‡æä¾›æ¯”åŸºç¡€ç±»å‹æ›´é«˜ç²¾åº¦çš„ç®—æœ¯è¿ç®—ï¼Œæ— ç±»å‹çš„å¸¸é‡ä¸ä»…å¯ä»¥æä¾›æ›´é«˜çš„è¿ç®—ç²¾åº¦ï¼Œè€Œä¸”å¯ä»¥ç›´æ¥ç”¨äºæ›´å¤šçš„è¡¨è¾¾å¼è€Œä¸éœ€è¦æ˜¾å¼çš„ç±»å‹è½¬æ¢ å¦‚math.Piæ— ç±»å‹çš„æµ®ç‚¹æ•°å¸¸é‡ï¼Œå¯ä»¥ç›´æ¥ç”¨äºä»»æ„éœ€è¦æµ®ç‚¹æ•°æˆ–å¤æ•°çš„åœ°æ–¹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x <span class="type">float32</span> = math.Pi</span><br><span class="line"><span class="keyword">var</span> y <span class="type">float64</span> = math.Pi</span><br><span class="line"><span class="keyword">var</span> z <span class="type">complex128</span> = math.Pi</span><br></pre></td></tr></table></figure>
</li>
<li><p>å½“ä¸€ä¸ªæ— ç±»å‹çš„å¸¸é‡è¢«èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œæ— ç±»å‹çš„å¸¸é‡å°†ä¼šè¢«éšå¼è½¬æ¢ä¸ºå¯¹åº”çš„ç±»å‹ï¼Œå¦‚æœè½¬æ¢åˆæ³•çš„è¯</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f <span class="type">float64</span> = <span class="number">3</span> + <span class="number">0i</span> <span class="comment">// untyped complex -&gt; float64</span></span><br><span class="line">f = <span class="number">2</span>                  <span class="comment">// untyped integer -&gt; float64</span></span><br><span class="line">f = <span class="number">1e123</span>              <span class="comment">// untyped floating-point -&gt; float64</span></span><br><span class="line">f = <span class="string">&#x27;a&#x27;</span>                <span class="comment">// untyped rune -&gt; float64</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><ul>
<li>æ•°ç»„æ˜¯ä¸€ä¸ªç”±å›ºå®šé•¿åº¦çš„ç‰¹å®šç±»å‹å…ƒç´ ç»„æˆçš„åºåˆ—ã€</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½è¢«åˆå§‹åŒ–ä¸ºå…ƒç´ ç±»å‹å¯¹åº”çš„é›¶å€¼</li>
<li>å¦‚æœåœ¨æ•°ç»„çš„é•¿åº¦ä½ç½®å‡ºç°çš„æ˜¯â€œâ€¦â€çœç•¥å·ï¼Œåˆ™è¡¨ç¤ºæ•°ç»„çš„é•¿åº¦æ˜¯æ ¹æ®åˆå§‹åŒ–å€¼çš„ä¸ªæ•°æ¥è®¡ç®—</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a [<span class="number">3</span>]<span class="type">int</span>             <span class="comment">// array of 3 integers</span></span><br><span class="line"><span class="keyword">var</span> q [<span class="number">3</span>]<span class="type">int</span> = [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">var</span> r [<span class="number">3</span>]<span class="type">int</span> = [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">p := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¯ä»¥æŒ‡å®šä¸€ä¸ªç´¢å¼•å’Œå¯¹åº”å€¼åˆ—è¡¨çš„æ–¹å¼åˆå§‹åŒ–</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    USD Currency = <span class="literal">iota</span> <span class="comment">// ç¾å…ƒ</span></span><br><span class="line">    EUR                 <span class="comment">// æ¬§å…ƒ</span></span><br><span class="line">    GBP                 <span class="comment">// è‹±é•‘</span></span><br><span class="line">    RMB                 <span class="comment">// äººæ°‘å¸</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">symbol := [...]<span class="type">string</span>&#123;USD: <span class="string">&quot;$&quot;</span>, EUR: <span class="string">&quot;â‚¬&quot;</span>, GBP: <span class="string">&quot;ï¿¡&quot;</span>, RMB: <span class="string">&quot;ï¿¥&quot;</span>&#125;</span><br><span class="line">fmt.Println(RMB, symbol[RMB]) <span class="comment">// &quot;3 ï¿¥&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>åˆå§‹åŒ–æ—¶æ²¡ç”¨åˆ°çš„ç´¢å¼•å¯ä»¥çœç•¥ï¼ŒæœªæŒ‡å®šåˆå§‹å€¼çš„å…ƒç´ å°†ç”¨é›¶å€¼åˆå§‹åŒ–</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">r := [...]<span class="type">int</span>&#123;<span class="number">99</span>: <span class="number">-1</span>&#125; <span class="comment">// 100ä¸ªå…ƒç´ çš„æ•°ç»„rï¼Œæœ€åä¸€ä¸ªåˆå§‹åŒ–ä¸º-1ï¼Œå…¶ä»–éƒ½ç”¨0åˆå§‹åŒ–</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¯ä»¥ç›´æ¥é€šè¿‡&#x3D;&#x3D;æ¯”è¾ƒè¿ç®—ç¬¦æ¥æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„ï¼Œåªæœ‰å½“ä¸¤ä¸ªæ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ç›¸ç­‰çš„æ—¶å€™æ•°ç»„æ‰æ˜¯ç›¸ç­‰çš„</li>
<li>å‡½æ•°è°ƒç”¨ä¼ é€’æ•°ç»„å‚æ•°æ—¶ï¼Œå‡½æ•°å‚æ•°å˜é‡æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå¤åˆ¶çš„å‰¯æœ¬ï¼Œå¯¹æ•°ç»„å‚æ•°çš„ä»»ä½•çš„ä¿®æ”¹éƒ½æ˜¯å‘ç”Ÿåœ¨å¤åˆ¶çš„æ•°ç»„ï¼Œå¯ä»¥æ˜¾å¼åœ°ä¼ å…¥ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œé‚£æ ·çš„è¯å‡½æ•°é€šè¿‡æŒ‡é’ˆå¯¹æ•°ç»„çš„ä»»ä½•ä¿®æ”¹éƒ½å¯ä»¥ç›´æ¥åé¦ˆåˆ°è°ƒç”¨è€…</li>
</ul>
<h2 id="Slice"><a href="#Slice" class="headerlink" title="Slice"></a>Slice</h2><ul>
<li>Sliceï¼ˆåˆ‡ç‰‡ï¼‰ä»£è¡¨å˜é•¿çš„åºåˆ—</li>
<li>ä¸€ä¸ªsliceç”±ä¸‰ä¸ªéƒ¨åˆ†æ„æˆï¼šæŒ‡é’ˆã€é•¿åº¦å’Œå®¹é‡</li>
<li>å†…ç½®çš„lenå’Œcapå‡½æ•°åˆ†åˆ«è¿”å›sliceçš„é•¿åº¦å’Œå®¹é‡</li>
<li>sliceçš„åˆ‡ç‰‡æ“ä½œs[i:j]ï¼Œå…¶ä¸­0 â‰¤ iâ‰¤ jâ‰¤ cap(s)ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„sliceï¼Œå¼•ç”¨sçš„ä»ç¬¬iä¸ªå…ƒç´ å¼€å§‹åˆ°ç¬¬j-1ä¸ªå…ƒç´ çš„å­åºåˆ—ï¼Œiä½ç½®çš„ç´¢å¼•è¢«çœç•¥çš„è¯å°†ä½¿ç”¨0ä»£æ›¿ï¼Œå¦‚æœjä½ç½®çš„ç´¢å¼•è¢«çœç•¥çš„è¯å°†ä½¿ç”¨len(s)ä»£æ›¿</li>
<li>å¦‚æœåˆ‡ç‰‡æ“ä½œè¶…å‡ºcap(s)çš„ä¸Šé™å°†å¯¼è‡´ä¸€ä¸ªpanicå¼‚å¸¸ï¼Œä½†æ˜¯è¶…å‡ºlen(s)åˆ™æ˜¯æ„å‘³ç€æ‰©å±•äº†sliceï¼Œå› ä¸ºæ–°sliceçš„é•¿åº¦ä¼šå˜å¤§</li>
<li>å› ä¸ºsliceå€¼åŒ…å«æŒ‡å‘ç¬¬ä¸€ä¸ªsliceå…ƒç´ çš„æŒ‡é’ˆï¼Œå› æ­¤å‘å‡½æ•°ä¼ é€’sliceå°†å…è®¸åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹åº•å±‚æ•°ç»„çš„å…ƒç´ </li>
<li>å› ä¸ºsliceå€¼åŒ…å«æŒ‡å‘ç¬¬ä¸€ä¸ªsliceå…ƒç´ çš„æŒ‡é’ˆï¼Œå› æ­¤å‘å‡½æ•°ä¼ é€’sliceå°†å…è®¸åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹åº•å±‚æ•°ç»„çš„å…ƒç´ </li>
<li>sliceä¹‹é—´ä¸èƒ½æ¯”è¾ƒï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨&#x3D;&#x3D;æ“ä½œç¬¦æ¥åˆ¤æ–­ä¸¤ä¸ªsliceæ˜¯å¦å«æœ‰å…¨éƒ¨ç›¸ç­‰å…ƒç´ ã€‚ä¸è¿‡æ ‡å‡†åº“æä¾›äº†é«˜åº¦ä¼˜åŒ–çš„bytes.Equalå‡½æ•°æ¥åˆ¤æ–­ä¸¤ä¸ªå­—èŠ‚å‹sliceæ˜¯å¦ç›¸ç­‰ï¼ˆ[]byteï¼‰</li>
<li>sliceå”¯ä¸€åˆæ³•çš„æ¯”è¾ƒæ“ä½œæ˜¯å’Œnilæ¯”è¾ƒï¼Œä¸€ä¸ªé›¶å€¼çš„sliceç­‰äºnilï¼Œä¸€ä¸ªnilå€¼çš„sliceå¹¶æ²¡æœ‰åº•å±‚æ•°ç»„ã€‚ä¸€ä¸ªnilå€¼çš„sliceçš„é•¿åº¦å’Œå®¹é‡éƒ½æ˜¯0</li>
<li>ä¸€ä¸ªnilå€¼çš„sliceçš„è¡Œä¸ºå’Œå…¶å®ƒä»»æ„0é•¿åº¦çš„sliceä¸€æ ·ï¼Œæ‰€æœ‰çš„Goè¯­è¨€å‡½æ•°åº”è¯¥ä»¥ç›¸åŒçš„æ–¹å¼å¯¹å¾…nilå€¼çš„sliceå’Œ0é•¿åº¦çš„slice</li>
<li>å†…ç½®çš„makeå‡½æ•°åˆ›å»ºä¸€ä¸ªæŒ‡å®šå…ƒç´ ç±»å‹ã€é•¿åº¦å’Œå®¹é‡çš„sliceï¼Œå®¹é‡éƒ¨åˆ†å¯ä»¥çœç•¥</li>
<li>appendå‡½æ•°ç”¨äºå‘sliceè¿½åŠ å…ƒç´ </li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> runes []<span class="type">rune</span></span><br><span class="line"><span class="keyword">for</span> _, r := <span class="keyword">range</span> <span class="string">&quot;Hello, ä¸–ç•Œ&quot;</span> &#123;</span><br><span class="line">    runes = <span class="built_in">append</span>(runes, r)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%q\n&quot;</span>, runes) <span class="comment">// &quot;[&#x27;H&#x27; &#x27;e&#x27; &#x27;l&#x27; &#x27;l&#x27; &#x27;o&#x27; &#x27;,&#x27; &#x27; &#x27; &#x27;ä¸–&#x27; &#x27;ç•Œ&#x27;]&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç”¨stackæ¥æ¨¡æ‹Ÿæ ˆ</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">stack = <span class="built_in">append</span>(stack, v) <span class="comment">// push v</span></span><br><span class="line">top := stack[<span class="built_in">len</span>(stack)<span class="number">-1</span>] <span class="comment">// top of stack</span></span><br><span class="line">stack = stack[:<span class="built_in">len</span>(stack)<span class="number">-1</span>] <span class="comment">// pop</span></span><br></pre></td></tr></table></figure>

<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><ul>
<li>Goè¯­è¨€ä¸­ï¼Œä¸€ä¸ªmapå°±æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨çš„å¼•ç”¨ï¼Œmapç±»å‹å¯ä»¥å†™ä¸ºmap[K]V</li>
<li>å†…ç½®çš„makeå‡½æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ªmapï¼š</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ages := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>) <span class="comment">// mapping from strings to ints</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¯ä»¥ç”¨mapå­—é¢å€¼çš„è¯­æ³•åˆ›å»ºmapï¼ŒåŒæ—¶è¿˜å¯ä»¥æŒ‡å®šä¸€äº›æœ€åˆçš„key&#x2F;valueï¼š</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ages := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;</span><br><span class="line">    <span class="string">&quot;alice&quot;</span>:   <span class="number">31</span>,</span><br><span class="line">    <span class="string">&quot;charlie&quot;</span>: <span class="number">34</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>map[string]int&#123;&#125;</code>ä¹Ÿå¯ä»¥åˆ›å»ºç©ºçš„map</li>
<li>å†…ç½®çš„deleteå‡½æ•°å¯ä»¥åˆ é™¤å…ƒç´ </li>
<li>é€šè¿‡keyä½œä¸ºç´¢å¼•ä¸‹æ ‡æ¥è®¿é—®mapå°†äº§ç”Ÿä¸€ä¸ªvalueã€‚å¦‚æœkeyåœ¨mapä¸­æ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆå°†å¾—åˆ°ä¸keyå¯¹åº”çš„valueï¼›å¦‚æœkeyä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†å¾—åˆ°valueå¯¹åº”ç±»å‹çš„é›¶å€¼</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ages[<span class="string">&quot;bob&quot;</span>] == <span class="number">0</span> <span class="comment">// true if &quot;bob&quot; is not in the map</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¦æ­¢å¯¹mapå…ƒç´ å–å€ï¼Œå› ä¸ºmapå¯èƒ½éšç€å…ƒç´ æ•°é‡çš„å¢é•¿è€Œé‡æ–°åˆ†é…æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼Œä»è€Œå¯èƒ½å¯¼è‡´ä¹‹å‰çš„åœ°å€æ— æ•ˆ</li>
<li>éå†map</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> name, age := <span class="keyword">range</span> ages &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%s\t%d\n&quot;</span>, name, age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>è¦æŒ‰é¡ºåºéå†key&#x2F;valueå¯¹ï¼Œæˆ‘ä»¬å¿…é¡»æ˜¾å¼åœ°å¯¹keyè¿›è¡Œæ’åº</p>
</li>
<li><p>mapç±»å‹çš„é›¶å€¼æ˜¯nil</p>
</li>
<li><p>mapä¸Šçš„å¤§éƒ¨åˆ†æ“ä½œï¼ŒåŒ…æ‹¬æŸ¥æ‰¾ã€åˆ é™¤ã€lenå’Œrangeå¾ªç¯éƒ½å¯ä»¥å®‰å…¨å·¥ä½œåœ¨nilå€¼çš„mapä¸Šï¼Œå®ƒä»¬çš„è¡Œä¸ºå’Œä¸€ä¸ªç©ºçš„mapç±»ä¼¼ã€‚ä½†æ˜¯å‘ä¸€ä¸ªnilå€¼çš„mapå­˜å…¥å…ƒç´ å°†å¯¼è‡´ä¸€ä¸ªpanicå¼‚å¸¸</p>
</li>
<li><p>mapçš„ä¸‹æ ‡è¯­æ³•å¯ä»¥äº§ç”Ÿä¸¤ä¸ªå€¼ï¼›ç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºæŠ¥å‘Šå…ƒç´ æ˜¯å¦çœŸçš„å­˜åœ¨</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> age, ok := ages[<span class="string">&quot;bob&quot;</span>]; !ok &#123; <span class="comment">/* ... */</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Goè¯­è¨€ä¸­å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªsetç±»å‹ï¼Œä½†æ˜¯mapä¸­çš„keyä¹Ÿæ˜¯ä¸ç›¸åŒçš„ï¼Œå¯ä»¥ç”¨mapå®ç°ç±»ä¼¼setçš„åŠŸèƒ½</li>
</ul>
<h2 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h2><ul>
<li>é€šå¸¸ä¸€è¡Œå¯¹åº”ä¸€ä¸ªç»“æ„ä½“æˆå‘˜ï¼Œæˆå‘˜çš„åå­—åœ¨å‰ç±»å‹åœ¨åï¼Œä¸è¿‡å¦‚æœç›¸é‚»çš„æˆå‘˜ç±»å‹å¦‚æœç›¸åŒçš„è¯å¯ä»¥è¢«åˆå¹¶åˆ°ä¸€è¡Œ</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">    ID            <span class="type">int</span></span><br><span class="line">    Name, Address <span class="type">string</span></span><br><span class="line">    DoB           time.Time</span><br><span class="line">    Position      <span class="type">string</span></span><br><span class="line">    Salary        <span class="type">int</span></span><br><span class="line">    ManagerID     <span class="type">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚æœç»“æ„ä½“æˆå‘˜åå­—æ˜¯ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„ï¼Œé‚£ä¹ˆè¯¥æˆå‘˜å°±æ˜¯å¯¼å‡ºçš„</li>
<li>ç»“æ„ä½“ç±»å‹çš„é›¶å€¼æ˜¯æ¯ä¸ªæˆå‘˜éƒ½æ˜¯é›¶å€¼ï¼Œå¦‚æœç»“æ„ä½“æ²¡æœ‰ä»»ä½•æˆå‘˜çš„è¯å°±æ˜¯ç©ºç»“æ„ä½“ï¼Œå†™ä½œstruct{}ã€‚å®ƒçš„å¤§å°ä¸º0</li>
<li>è€ƒè™‘æ•ˆç‡ï¼Œè¾ƒå¤§çš„ç»“æ„ä½“é€šå¸¸ä¼šç”¨æŒ‡é’ˆçš„æ–¹å¼ä¼ å…¥å’Œè¿”å›</li>
<li>å¯ä»¥ç”¨ä¸‹é¢çš„å†™æ³•æ¥åˆ›å»ºå¹¶åˆå§‹åŒ–ä¸€ä¸ªç»“æ„ä½“å˜é‡ï¼Œå¹¶è¿”å›ç»“æ„ä½“çš„åœ°å€</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">pp := &amp;Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Goè¯­è¨€æœ‰ä¸€ä¸ªç‰¹æ€§è®©æˆ‘ä»¬åªå£°æ˜ä¸€ä¸ªæˆå‘˜å¯¹åº”çš„æ•°æ®ç±»å‹è€Œä¸æŒ‡åæˆå‘˜çš„åå­—ï¼›è¿™ç±»æˆå‘˜å°±å«åŒ¿åæˆå‘˜ï¼ŒåŒ¿ååµŒå…¥çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®å¶å­å±æ€§è€Œä¸éœ€è¦ç»™å‡ºå®Œæ•´çš„è·¯å¾„</li>
<li>ä¸èƒ½åŒæ—¶åŒ…å«ä¸¤ä¸ªç±»å‹ç›¸åŒçš„åŒ¿åæˆå‘˜ã€‚ä¼šå¯¼è‡´åå­—å†²çª</li>
<li>åŒ¿åæˆå‘˜ä¹Ÿæœ‰å¯è§æ€§çš„è§„åˆ™çº¦æŸ</li>
</ul>
<h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><ul>
<li>å°†ä¸€ä¸ªGoè¯­è¨€ä¸­ç±»ä¼¼moviesçš„ç»“æ„ä½“sliceè½¬ä¸ºJSONçš„è¿‡ç¨‹å«ç¼–ç»„ï¼ˆmarshalingï¼‰ã€‚ç¼–ç»„é€šè¿‡è°ƒç”¨json.Marshalå‡½æ•°ï¼ŒMarshalå‡½æ•°è¿”å›ä¸€ä¸ªç¼–ç åçš„å­—èŠ‚sliceï¼ŒåŒ…å«å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æ²¡æœ‰ç©ºç™½ç¼©è¿›ï¼›json.MarshalIndentå‡½æ•°å°†äº§ç”Ÿæ•´é½ç¼©è¿›çš„è¾“å‡ºï¼Œè¯¥å‡½æ•°æœ‰ä¸¤ä¸ªé¢å¤–çš„å­—ç¬¦ä¸²å‚æ•°ç”¨äºè¡¨ç¤ºæ¯ä¸€è¡Œè¾“å‡ºçš„å‰ç¼€å’Œæ¯ä¸€ä¸ªå±‚çº§çš„ç¼©è¿›</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">data, err := json.Marshal(movies)</span><br><span class="line">data, err := json.MarshalIndent(movies, <span class="string">&quot;&quot;</span>, <span class="string">&quot;    &quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸€ä¸ªç»“æ„ä½“æˆå‘˜Tagæ˜¯å’Œåœ¨ç¼–è¯‘é˜¶æ®µå…³è”åˆ°è¯¥æˆå‘˜çš„å…ƒä¿¡æ¯å­—ç¬¦ä¸²ï¼Œç»“æ„ä½“çš„æˆå‘˜Tagå¯ä»¥æ˜¯ä»»æ„çš„å­—ç¬¦ä¸²é¢å€¼ï¼Œä½†æ˜¯é€šå¸¸æ˜¯ä¸€ç³»åˆ—ç”¨ç©ºæ ¼åˆ†éš”çš„key:â€valueâ€é”®å€¼å¯¹åºåˆ—ï¼›å› ä¸ºå€¼ä¸­å«æœ‰åŒå¼•å·å­—ç¬¦ï¼Œå› æ­¤æˆå‘˜Tagä¸€èˆ¬ç”¨åŸç”Ÿå­—ç¬¦ä¸²é¢å€¼çš„å½¢å¼ä¹¦å†™ï¼Œjsonå¼€å¤´é”®åå¯¹åº”çš„å€¼ç”¨äºæ§åˆ¶encoding&#x2F;jsonåŒ…çš„ç¼–ç å’Œè§£ç çš„è¡Œä¸º</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Date <span class="keyword">struct</span> &#123;</span><br><span class="line">  Year <span class="type">int</span> <span class="string">`json:&quot;Y&quot;`</span></span><br><span class="line">  Month <span class="type">int</span> <span class="string">`json:&quot;M&quot;`</span></span><br><span class="line">  Day <span class="type">int</span> <span class="string">`json:&quot;D,omitempty&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	Dayæˆå‘˜çš„Tagè¿˜å¸¦äº†ä¸€ä¸ªé¢å¤–çš„omitemptyé€‰é¡¹ï¼Œè¡¨ç¤ºå½“Goè¯­è¨€ç»“æ„ä½“æˆå‘˜ä¸ºç©ºæˆ–é›¶å€¼æ—¶ä¸ç”Ÿæˆè¯¥JSONå¯¹è±¡	ï¼ˆè¿™é‡Œfalseä¸ºé›¶å€¼ï¼‰</p>
<ul>
<li>å°†JSONæ•°æ®è§£ç ä¸ºGoè¯­è¨€çš„æ•°æ®ç»“æ„ï¼ŒGoè¯­è¨€ä¸­ä¸€èˆ¬å«unmarshalingï¼Œé€šè¿‡json.Unmarshalå‡½æ•°å®Œæˆ</li>
</ul>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go basic</tag>
      </tags>
  </entry>
  <entry>
    <title>go in action chapter1-4</title>
    <url>/goinactionChapter1-4/</url>
    <content><![CDATA[<h2 id="Go-è¯­è¨€ä»‹ç»"><a href="#Go-è¯­è¨€ä»‹ç»" class="headerlink" title="Go è¯­è¨€ä»‹ç»"></a>Go è¯­è¨€ä»‹ç»</h2><h3 id="å¼€å‘é€Ÿåº¦"><a href="#å¼€å‘é€Ÿåº¦" class="headerlink" title="å¼€å‘é€Ÿåº¦"></a>å¼€å‘é€Ÿåº¦</h3><p>ç¼–è¯‘å™¨ä¸¥æ ¼<br>ï¼ˆ1ï¼‰ç¼–è¯‘å™¨åªå…³æ³¨ç›´æ¥è¢«å¼•ç”¨çš„åº“ï¼ˆæ²¡æœ‰è¢«å¼•ç”¨çš„åº“ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼‰<br>ï¼ˆ2ï¼‰å£°æ˜æœªä½¿ç”¨çš„å˜é‡ä¼šæŠ¥é”™ï¼Œç”±ç±»å‹æ£€æŸ¥<br>ï¼ˆ3ï¼‰å†…å­˜ç®¡ç†ç”±ç¼–è¯‘å™¨å¤„ç†</p>
<h3 id="æ”¯æŒå¹¶å‘"><a href="#æ”¯æŒå¹¶å‘" class="headerlink" title="æ”¯æŒå¹¶å‘"></a>æ”¯æŒå¹¶å‘</h3><p>goroutineç±»ä¼¼çº¿ç¨‹ï¼Œä½†ä½¿ç”¨å†…å­˜å°‘äºçº¿ç¨‹<br>é€šè¿‡å†…ç½®çš„æ•°æ®ç»“æ„é€šé“(channel)è®©ç”¨æˆ·åœ¨ä¸åŒgoroutineé—´åŒæ­¥å‘é€æ¶ˆæ¯ï¼Œè€Œä¸æ˜¯è®©å¤šä¸ªgoroutineäº‰å¤ºåŒä¸€ä¸ªæ•°æ®çš„ä½¿ç”¨æƒ<br>goroutineä½¿ç”¨é€šé“å‘é€æ•°æ®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    &quot;fmt&quot;</span><br><span class="line">    &quot;sync&quot;</span><br><span class="line">)</span><br><span class="line">var wg sync.WaitGroup // å®šä¹‰ä¸€ä¸ª WaitGroup å¯¹è±¡ï¼Œç”¨äºç­‰å¾…ä¸€ç»„ goroutine çš„ç»“æŸ</span><br><span class="line">func printer(c chan int) &#123;</span><br><span class="line">    for i: = range c &#123; // ä½¿ç”¨ for-range å¾ªç¯è¯»å– channel ä¸­çš„æ•°æ®ï¼Œç›´åˆ° channel è¢«å…³é—­ä¸ºæ­¢</span><br><span class="line">        fmt.Printf(&quot;receive i:%d &quot;, i)</span><br><span class="line">    &#125;</span><br><span class="line">    wg.Done() // è®¡æ•°å‡ä¸€</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">    c: = make(chan int) // åˆ›å»ºä¸€ä¸ªæ•´å‹ channel</span><br><span class="line">    go printer(c) // åœ¨æ–°çš„ goroutine ä¸­æ‰“å° channel ä¸­çš„æ•°æ®</span><br><span class="line">    wg.Add(1) // å¢åŠ ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè¡¨ç¤ºæœ‰ä¸€ä¸ª goroutine åœ¨è¿è¡Œ</span><br><span class="line">    for i: = 1;i &lt; 10;i++&#123;</span><br><span class="line">        c &lt; -i // å°†æ•°å­—å†™å…¥ channel</span><br><span class="line">    &#125;</span><br><span class="line">    close(c) // å…³é—­ channelï¼Œé€šçŸ¥ goroutine åœæ­¢é˜»å¡å¹¶é€€å‡º</span><br><span class="line">    wg.Wait() // ç­‰å¾…æ‰€æœ‰ goroutine å®Œæˆ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/goinaction1.png" alt="image.png"><br>åœ¨ä¸¤ä¸ªgoroutineé—´ä¼ è¾“æ•°æ®æ˜¯åŒæ­¥çš„ï¼Œåœ¨goroutineé—´å®‰å…¨ä¼ è¾“æ•°æ®çš„æ–¹æ³•ä¸éœ€è¦ä»»ä½•é”å’ŒåŒæ­¥æœºåˆ¶<br>ä½†æ˜¯é€šé“æ˜¯ä¸æä¾›è·¨goroutineçš„æ•°æ®è®¿é—®ä¿æŠ¤æœºåˆ¶ï¼š<br>ï¼ˆ1ï¼‰ä¼ è¾“æ•°æ®æ˜¯å‰¯æœ¬ï¼Œgoroutineå„è‡ªæŒæœ‰å‰¯æœ¬ä¿®æ”¹æ˜¯å®‰å…¨çš„<br>ï¼ˆ2ï¼‰ä¼ è¾“æ•°æ®æ˜¯æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆï¼Œè¯»å’Œå†™ç”±ä¸åŒçš„goroutineå®Œæˆçš„ï¼Œæ¯ä¸ªgoroutineéœ€è¦é¢å¤–çš„åŒæ­¥åŠ¨ä½œ</p>
<h3 id="goè¯­è¨€çš„ç±»å‹ç³»ç»Ÿ"><a href="#goè¯­è¨€çš„ç±»å‹ç³»ç»Ÿ" class="headerlink" title="goè¯­è¨€çš„ç±»å‹ç³»ç»Ÿ"></a>goè¯­è¨€çš„ç±»å‹ç³»ç»Ÿ</h3><p>æ— ç»§æ‰¿çš„ç±»å‹ç³»ç»Ÿï¼Œæ”¯æŒé¢å‘å¯¹è±¡å¼€å‘</p>
<h4 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h4><p>ï¼ˆ1ï¼‰åœ¨javaé‡Œï¼Œè®¾è®¡éœ€è¦å›´ç»•æ¥å£å±•å¼€ï¼Œå¿…é¡»æ»¡è¶³æ¥å£é‡Œçš„æ‰€æœ‰çº¦æŸï¼Œéœ€è¦æ˜¾ç¤ºå£°æ˜è¿™ä¸ªç±»å®ç°äº†æ¥å£</p>
<ul>
<li>é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª Shape æ¥å£ï¼Œå…¶ä¸­åªåŒ…å«ä¸€ä¸ª getArea() æ–¹æ³•ã€‚</li>
<li>åˆ†åˆ«åˆ›å»ºäº† Circle å’Œ Rectangle ç±»ï¼Œéƒ½å®ç°äº† Shape æ¥å£ï¼Œå¹¶å®ç°äº† getArea() æ–¹æ³•æ¥è®¡ç®—å®ƒä»¬çš„é¢ç§¯ã€‚</li>
<li>åœ¨ main() å‡½æ•°ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ª Circle å¯¹è±¡å’Œä¸€ä¸ª Rectangle å¯¹è±¡ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸º Shape ç±»å‹çš„å‚æ•°ä¼ é€’ç»™ getArea() å‡½æ•°ï¼Œä»¥è®¡ç®—å®ƒä»¬çš„é¢ç§¯ã€‚<br>javaä½¿ç”¨æ¥å£</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface Shape &#123;</span><br><span class="line">    double getArea();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Circle implements Shape &#123;</span><br><span class="line">    private double radius;</span><br><span class="line"></span><br><span class="line">    public Circle(double radius) &#123;</span><br><span class="line">        this.radius = radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getArea() &#123;</span><br><span class="line">        return Math.PI * radius * radius;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Rectangle implements Shape &#123;</span><br><span class="line">    private double width;</span><br><span class="line">    private double height;</span><br><span class="line"></span><br><span class="line">    public Rectangle(double width, double height) &#123;</span><br><span class="line">        this.width = width;</span><br><span class="line">        this.height = height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getArea() &#123;</span><br><span class="line">        return width * height;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Shape c = new Circle(5);</span><br><span class="line">        Shape r = new Rectangle(3, 4);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;Circle area: &quot; + c.getArea());</span><br><span class="line">        System.out.println(&quot;Rectangle area: &quot; + r.getArea());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰åœ¨goé‡Œ</p>
<ul>
<li>å®šä¹‰äº†ä¸¤ä¸ªç»“æ„ä½“ç±»å‹ Circle å’Œ Rectangleï¼Œå¹¶ä¸ºå®ƒä»¬åˆ†åˆ«å®šä¹‰äº† area() æ–¹æ³•æ¥è®¡ç®—å®ƒä»¬çš„é¢ç§¯ã€‚</li>
</ul>
<p>Circleç±»å‹çš„æ–¹æ³•å’ŒRectangleç±»å‹çš„æ–¹æ³•<br>ï¼ˆgoé‡Œçš„å‡½æ•°å’Œæ–¹æ³•ä¸åŒï¼šå‡½æ•°æ˜¯ç‹¬ç«‹çš„ä»£ç å—ï¼Œæ²¡æœ‰å±äºç‰¹å®šç±»å‹ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å‡½æ•°åè¿›è¡Œè°ƒç”¨<br>æ–¹æ³•æ˜¯ä¸æŸä¸ªç±»å‹ç»‘å®šçš„å‡½æ•°ï¼Œå¯ä»¥è¢«è¯¥ç±»å‹çš„å€¼æˆ–æŒ‡é’ˆè°ƒç”¨ã€‚æ–¹æ³•é€šå¸¸ç”¨äºæè¿°è¯¥ç±»å‹çš„è¡Œä¸ºå’Œæ“ä½œï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®è¯¥ç±»å‹çš„æˆå‘˜å˜é‡ã€‚æ–¹æ³•çš„å®šä¹‰éœ€è¦åœ¨å‡½æ•°åå‰æŒ‡å®šä¸€ä¸ªæ¥æ”¶è€…å‚æ•°ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•å±äºå“ªä¸ªç±»å‹ï¼‰</p>
<ul>
<li>å®šä¹‰äº†ä¸€ä¸ª Shape æ¥å£ï¼Œå…¶ä¸­åªåŒ…å«ä¸€ä¸ª area() æ–¹æ³•ã€‚</li>
<li>åœ¨ getArea() å‡½æ•°ä¸­ï¼Œæ¥æ”¶ä¸€ä¸ª Shape ç±»å‹çš„å‚æ•°ï¼Œå¹¶è°ƒç”¨å…¶ area() æ–¹æ³•æ¥è®¡ç®—é¢ç§¯ã€‚</li>
<li>åœ¨ main() å‡½æ•°ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ª Circle ç±»å‹çš„å˜é‡å’Œä¸€ä¸ª Rectangle ç±»å‹çš„å˜é‡ï¼Œå¹¶åˆ†åˆ«å°†å®ƒä»¬ä½œä¸ºå‚æ•°ä¼ é€’ç»™ getArea() å‡½æ•°ã€‚</li>
</ul>
<p>Circle å’Œ Rectangle ç»“æ„ä½“ç±»å‹å¹¶æ²¡æœ‰æ˜¾å¼åœ°å£°æ˜å®ƒä»¬å®ç°äº† Shape æ¥å£ï¼Œä½†ç”±äºå®ƒä»¬éƒ½å®šä¹‰äº† area() æ–¹æ³•ï¼Œå› æ­¤å®ƒä»¬éšå¼åœ°æ»¡è¶³äº† Shape æ¥å£çš„è¦æ±‚ã€‚è¿™å°±ä½“ç°äº†Goè¯­è¨€ä¸­çš„â€œé¸­å­ç±»å‹â€ç‰¹ç‚¹ï¼Œå³åªè¦ä¸€ä¸ªç»“æ„ä½“ç±»å‹å…·å¤‡æŸä¸ªæ–¹æ³•æˆ–æ“ä½œï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥è¢«çœ‹ä½œå…·æœ‰ç›¸åº”æ¥å£çš„èƒ½åŠ›ï¼Œæ— éœ€æ˜¾å¼åœ°å£°æ˜å®ç°äº†è¯¥æ¥å£ã€‚</p>
<p>goä½¿ç”¨æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type Circle struct &#123;</span><br><span class="line">    radius float64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Rectangle struct &#123;</span><br><span class="line">    width, height float64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func(c Circle) area() float64 &#123;</span><br><span class="line">    return math.Pi * c.radius * c.radius</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func(r Rectangle) area() float64 &#123;</span><br><span class="line">    return r.width * r.height</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Shape interface &#123;</span><br><span class="line">    area() float64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func getArea(s Shape) float64 &#123;</span><br><span class="line">    return s.area()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">    c: = Circle &#123;</span><br><span class="line">        radius: 5</span><br><span class="line">    &#125;</span><br><span class="line">    r: = Rectangle &#123;</span><br><span class="line">        width: 3,</span><br><span class="line">        height: 4</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fmt.Println(&quot;Circle area:&quot;, getArea(c))</span><br><span class="line">    fmt.Println(&quot;Rectangle area:&quot;, getArea(r))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>tips: go online: <a href="https://go.dev/play/">https://go.dev/play/</a></p>
<h2 id="æ‰“åŒ…å’Œå·¥å…·é“¾"><a href="#æ‰“åŒ…å’Œå·¥å…·é“¾" class="headerlink" title="æ‰“åŒ…å’Œå·¥å…·é“¾"></a>æ‰“åŒ…å’Œå·¥å…·é“¾</h2><p>goè¯­è¨€çš„ç¨‹åºéƒ½ä¼šç»„ç»‡æˆè‹¥å¹²ç»„æ–‡ä»¶ï¼Œæ¯ç»„æ–‡ä»¶è¢«ç§°ä¸ºä¸€ä¸ªåŒ…<br>åŒ…åï¼š<br>ï¼ˆ1ï¼‰ä½¿ç”¨åŒ…æ‰€åœ¨ç›®å½•çš„åå­— -&gt; ç”¨æˆ·å¯¼å…¥åŒ…çš„æ—¶å€™ï¼Œèƒ½æ¸…æ™°çŸ¥é“åŒ…å<br>ï¼ˆ2ï¼‰å…¨å°å†™ -&gt; æœ‰åˆ©äºå¼€å‘æ—¶é¢‘ç¹è¾“å…¥åŒ…å<br>ï¼ˆ3ï¼‰åŒ…åå¯ä»¥ç›¸åŒ -&gt; å¯¼å…¥åŒ…çš„æ—¶å€™ä½¿ç”¨å…¨è·¯å¾„ï¼Œå¯ä»¥åŒºåˆ†åŒåçš„ä¸åŒåŒ…</p>
<h3 id="mainåŒ…"><a href="#mainåŒ…" class="headerlink" title="mainåŒ…"></a>mainåŒ…</h3><p>ï¼ˆ1ï¼‰æ‰€æœ‰ç”¨goè¯­è¨€ç¼–è¯‘çš„å¯æ‰§è¡Œç¨‹åºå¿…é¡»æœ‰ä¸€ä¸ªåå«mainçš„åŒ…<br>åŒ…åä¸ºmainï¼Œä¸€å®šä¹Ÿä¼šæœ‰mainå‡½æ•°ï¼Œå¦åˆ™ä¸ä¼šåˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶ -&gt; mainå‡½æ•°æ˜¯ç¨‹åºå…¥å£<br>mainåŒ… é‡Œçš„go æºæ–‡ä»¶ éƒ½ä¼šè¢«ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶<br>ï¼ˆ2ï¼‰ä¸åŒç›®å½•ä¸‹å¯ä»¥æœ‰å¤šä¸ª package mainï¼Œä½†æ˜¯åŒä¸€ç›®å½•ä¸‹ä¸èƒ½æœ‰å¤šä¸ª package main</p>
<h3 id="åŒ…å¯¼å…¥"><a href="#åŒ…å¯¼å…¥" class="headerlink" title="åŒ…å¯¼å…¥"></a>åŒ…å¯¼å…¥</h3><p>import (<br>â€œfmtâ€<br>â€œgithub.com&#x2F;spf12&#x2F;viperâ€ &#x2F;&#x2F;è¿œç¨‹å¯¼å…¥<br>myfmt â€œmylib&#x2F;fmtâ€  &#x2F;&#x2F;å‘½åå¯¼å…¥<br>)<br>é€šè¿‡go moduleç®¡ç†åŒ…ï¼ˆä»¥å‰æ˜¯åœ¨gopathç¯å¢ƒå˜é‡ç›®å½•ä¸‹ç®¡ç†åŒ…ï¼‰<br>go mod init modulename<br>go mod tidy -&gt; æŸ¥æ‰¾ä¸‹è½½ä¾èµ–åŒ…</p>
<p>ç”Ÿæˆgo.mod  go.sum</p>
<h3 id="å‡½æ•°init"><a href="#å‡½æ•°init" class="headerlink" title="å‡½æ•°init"></a>å‡½æ•°init</h3><p>æ¯ä¸ªåŒ…å¯ä»¥æœ‰å¤šä¸ªinitå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨ç¨‹åºæ‰§è¡Œå¼€å§‹çš„æ—¶å€™è¢«è°ƒç”¨ -&gt; åœ¨mainå‡½æ•°ä¹‹å‰æ‰§è¡Œ<br>goè¯­è¨€è¦æ±‚ä¸èƒ½å¯¼å…¥ä¸ä½¿ç”¨çš„åŒ…ï¼š<br>å¦‚æœæœ‰initå‡½æ•°ï¼Œä½†æ˜¯è¯¥åŒ…é‡Œçš„å†…å®¹æ²¡æœ‰è¢«mainå‡½æ•°ä½¿ç”¨ï¼Œåˆ™ä½¿ç”¨ç©ºç™½æ ‡è¯†ç¬¦ä½œä¸ºåŒ…çš„åˆ«åï¼š<br>import (<br>â€œdatabase&#x2F;sqlâ€<br>_ â€œgithub.com&#x2F;goinaction&#x2F;code&#x2F;testâ€  &#x2F;&#x2F;é¿å…ç¼–è¯‘é”™è¯¯<br>)</p>
<h3 id="ä½¿ç”¨goå·¥å…·"><a href="#ä½¿ç”¨goå·¥å…·" class="headerlink" title="ä½¿ç”¨goå·¥å…·"></a>ä½¿ç”¨goå·¥å…·</h3><p>ç¼–è¯‘ï¼š go build demo.go<br>æ¸…é™¤ç¼–è¯‘ç”Ÿæˆæ–‡ä»¶ï¼š go clean<br>æ£€æŸ¥ä»£ç ï¼š go vet demo.go<br>ä»£ç æ ¼å¼åŒ–ï¼šgo fmt demo.go</p>
<h2 id="æ•°ç»„ä»¥åŠåˆ‡ç‰‡å’Œæ˜ å°„"><a href="#æ•°ç»„ä»¥åŠåˆ‡ç‰‡å’Œæ˜ å°„" class="headerlink" title="æ•°ç»„ä»¥åŠåˆ‡ç‰‡å’Œæ˜ å°„"></a>æ•°ç»„ä»¥åŠåˆ‡ç‰‡å’Œæ˜ å°„</h2><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><p>é•¿åº¦å›ºå®šï¼Œå­˜å‚¨ä¸€æ®µç›¸åŒç±»å‹çš„å…ƒç´ çš„è¿ç»­å—</p>
<h4 id="æ•°ç»„åˆ›å»ºå’Œåˆå§‹åŒ–"><a href="#æ•°ç»„åˆ›å»ºå’Œåˆå§‹åŒ–" class="headerlink" title="æ•°ç»„åˆ›å»ºå’Œåˆå§‹åŒ–"></a>æ•°ç»„åˆ›å»ºå’Œåˆå§‹åŒ–</h4><p>å£°æ˜åç±»å‹å’Œé•¿åº¦ä¸èƒ½æ”¹å˜</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arry [5]int  -&gt; å£°æ˜æ—¶å¯¹åº”ç±»å‹çš„é›¶å€¼æ¥åˆå§‹åŒ–</span><br><span class="line">var arry = [5]int&#123;1, 2, 3, 4, 5&#125; -&gt; å£°æ˜çš„æ—¶å€™åˆå§‹åŒ–</span><br><span class="line">array := [5]int&#123;1,2,3,4,5&#125;  -&gt; ä½¿ç”¨æ•°ç»„å­—é¢é‡å£°æ˜æ•°ç»„</span><br><span class="line">array := [...]int&#123;1,2,3,4,5&#125;  -&gt; è‡ªåŠ¨è®¡ç®—å£°æ˜æ•°ç»„é•¿åº¦</span><br><span class="line">array := [5]int&#123;1:10, 3:20&#125; -&gt; å£°æ˜æ•°ç»„ï¼ŒæŒ‡å®šç‰¹å®šå…ƒç´ çš„å€¼</span><br></pre></td></tr></table></figure>


<h4 id="ä½¿ç”¨æ•°ç»„"><a href="#ä½¿ç”¨æ•°ç»„" class="headerlink" title="ä½¿ç”¨æ•°ç»„"></a>ä½¿ç”¨æ•°ç»„</h4><p>ï¼ˆ1ï¼‰è®¿é—®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">array[2] = 25 -&gt; è®¿é—®æ•°ç»„å…ƒç´ ï¼Œå¹¶ä¿®æ”¹å¯¹åº”ç´¢å¼•å…ƒç´ çš„å€¼</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰æŒ‡é’ˆ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">array := [5]*int -&gt; ä»…å£°æ˜æœªåˆå§‹åŒ– ä¸èƒ½ç›´æ¥ä½¿ç”¨</span><br><span class="line">array := [5]*int&#123;&#125; -&gt; å£°æ˜å¹¶åˆå§‹åŒ–ä¸ºnil</span><br><span class="line">array := [5]*int&#123;0:new(int), 1:new(int)&#125; -&gt; æ•´å‹æŒ‡é’ˆåˆå§‹åŒ–ç´¢å¼•0å’Œ1çš„æ•°ç»„å…ƒç´ </span><br></pre></td></tr></table></figure>

<p>ï¼ˆ3ï¼‰åŒç±»å‹äº’ç›¸èµ‹å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var array1 [5]int</span><br><span class="line">array2 := [5]int&#123;1,2,3,4,5&#125;</span><br><span class="line">array1 = array2 -&gt; correct</span><br><span class="line">å¯¹æ¯”:</span><br><span class="line">var array1 [4]int</span><br><span class="line">array1 = array2 -&gt; not correct</span><br></pre></td></tr></table></figure>



<h4 id="å¤šç»´æ•°ç»„"><a href="#å¤šç»´æ•°ç»„" class="headerlink" title="å¤šç»´æ•°ç»„"></a>å¤šç»´æ•°ç»„</h4><p>var array [4][2]int</p>
<h4 id="å‡½æ•°é—´ä¼ é€’æ•°ç»„"><a href="#å‡½æ•°é—´ä¼ é€’æ•°ç»„" class="headerlink" title="å‡½æ•°é—´ä¼ é€’æ•°ç»„"></a>å‡½æ•°é—´ä¼ é€’æ•°ç»„</h4><p>å‡½æ•°é—´ä¼ é€’å˜é‡ï¼Œé€šè¿‡å€¼ä¼ é€’ï¼Œå¦‚æœä¼ é€’æ•°ç»„ï¼Œä¼šèµ‹å€¼æ•´ä¸ªæ•°ç»„çš„å€¼  -&gt; å¼€é”€å¾ˆå¤§<br>solution: ä¼ é€’æŒ‡é’ˆï¼ŒæŒ‡é’ˆå¤§å°8å­—èŠ‚ ï¼ˆ64ä½ç³»ç»Ÿï¼‰ -&gt; æœ‰æ•ˆåˆ©ç”¨å†…å­˜</p>
<h3 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h3><p>å›´ç»•åŠ¨æ€æ•°ç»„æ„å»ºï¼ŒæŒ‰éœ€å¢é•¿å‡å°ã€‚åº•å±‚å†…å­˜æ˜¯åœ¨è¿ç»­å—ä¸­åˆ†é…å†…å­˜ï¼Œå¯¹åº•å±‚æ•°ç»„è¿›è¡Œäº†æŠ½è±¡<br>åˆ‡ç‰‡æœ‰ä¸‰ä¸ªå­—æ®µçš„æ•°æ®ç»“æ„ï¼š<br>ï¼ˆ1ï¼‰æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆ<br>ï¼ˆ2ï¼‰é•¿åº¦ï¼šåˆ‡ç‰‡è®¿é—®çš„å…ƒç´ çš„ä¸ªæ•° lenå‡½æ•°<br>ï¼ˆ3ï¼‰å®¹é‡ï¼šåˆ‡ç‰‡å…è®¸å¢é•¿åˆ°çš„å…ƒç´ ä¸ªæ•° capå‡½æ•°</p>
<h4 id="åˆ‡ç‰‡åˆ›å»ºå’Œåˆå§‹åŒ–"><a href="#åˆ‡ç‰‡åˆ›å»ºå’Œåˆå§‹åŒ–" class="headerlink" title="åˆ‡ç‰‡åˆ›å»ºå’Œåˆå§‹åŒ–"></a>åˆ‡ç‰‡åˆ›å»ºå’Œåˆå§‹åŒ–</h4><p>makeå’Œåˆ‡ç‰‡å­—é¢é‡<br>tips : make å‡½æ•°ä¸»è¦ç”¨äºåˆ›å»ºå’Œåˆå§‹åŒ–æŸäº›ç±»å‹çš„å†…ç½®æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚ sliceã€map å’Œ channel</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">slice := make([]int, 3, 5) -&gt; make ä½¿ç”¨é•¿åº¦ï¼Œå®¹é‡åˆå§‹åŒ–ï¼ˆå®¹é‡å¯çœç•¥ï¼Œæ­¤æ—¶é•¿åº¦å’Œå®¹é‡ç›¸åŒï¼‰</span><br><span class="line">åˆ‡ç‰‡èƒ½è®¿é—®3ä¸ªå…ƒç´ ï¼Œåº•å±‚æ•°æ®æ‹¥æœ‰5ä¸ª</span><br><span class="line">slice := make([]int, 3, 2) -&gt; make ä½¿ç”¨é•¿åº¦å¤§äºå®¹é‡ï¼Œç¼–è¯‘æŠ¥é”™</span><br><span class="line">slice := []int&#123;1,2,3&#125;  -&gt; åˆ‡ç‰‡å­—é¢é‡ï¼ˆä¸æŒ‡å®š[]çš„å€¼ï¼ŒåŸºäºåˆå§‹åŒ–çš„å…ƒç´ ä¸ªæ•°ç¡®å®šé•¿åº¦å’Œå®¹é‡)</span><br></pre></td></tr></table></figure>

<p>æ•°ç»„å’Œåˆ‡ç‰‡å£°æ˜çš„åŒºåˆ«ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[]è¿ç®—ç¬¦é‡ŒæŒ‡å®šäº†å€¼ï¼Œåˆ›å»ºçš„æ˜¯æ•°ç»„ -&gt; slice := [3]int&#123;1,2,3&#125; -&gt; ä¸‰ä¸ªå…ƒç´ çš„æ•°ç»„</span><br><span class="line">[]è¿ç®—ç¬¦é‡Œä¸æŒ‡å®šå€¼ï¼Œåˆ›å»ºçš„æ˜¯åˆ‡ç‰‡ -&gt; slice := []int&#123;1,2,3&#125; -&gt; é•¿åº¦å®¹é‡éƒ½ä¸º3çš„åˆ‡ç‰‡</span><br></pre></td></tr></table></figure>

<p>å£°æ˜ç©ºåˆ‡ç‰‡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">slice : = make([]int, 0)</span><br><span class="line">slice := []int&#123;&#125;</span><br></pre></td></tr></table></figure>



<h4 id="ä½¿ç”¨åˆ‡ç‰‡"><a href="#ä½¿ç”¨åˆ‡ç‰‡" class="headerlink" title="ä½¿ç”¨åˆ‡ç‰‡"></a>ä½¿ç”¨åˆ‡ç‰‡</h4><p>(1)å…±äº«åº•å±‚æ•°ç»„çš„ä¸¤ä¸ªåˆ‡ç‰‡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">slice := []int&#123;10,20,30,40,50&#125;</span><br><span class="line">newSlice := slice[1:3]  -&gt; ç”¨åˆ‡ç‰‡åˆ›å»ºåˆ‡ç‰‡</span><br></pre></td></tr></table></figure>



<p><img src="/images/goinaction2.png" alt="image.png"><br>æ–°åˆ‡ç‰‡slice[i:j]çš„é•¿åº¦å’Œå®¹é‡, åº•å±‚æ•°ç»„çš„å®¹é‡k<br>é•¿åº¦ï¼šj-i<br>å®¹é‡ï¼šk-i<br>ä¿®æ”¹åˆ‡ç‰‡å†…å®¹ -&gt; newSlice[1] &#x3D; 35 -&gt;sliceç¬¬ä¸‰ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º35</p>
<p>(2)åˆ‡ç‰‡é¢å¤–çš„å®¹é‡<br>1ï¼‰åˆ‡ç‰‡åªèƒ½è®¿é—®åˆ°é•¿åº¦å†…çš„å…ƒç´ <br>2ï¼‰ä¸åˆ‡ç‰‡çš„å®¹é‡ç›¸å…³è”çš„å…ƒç´ åªèƒ½ç”¨äºå¢é•¿åˆ‡ç‰‡ï¼Œåœ¨ä½¿ç”¨è¿™éƒ¨åˆ†å…ƒç´ å‰ï¼Œè¦å°†å…¶åˆå¹¶åˆ°åˆ‡ç‰‡é•¿åº¦é‡Œ<br>å¦‚æœä¸èƒ½æŠŠè¿™äº›åˆå¹¶åˆ°åˆ‡ç‰‡é•¿åº¦é‡Œï¼Œè¿™äº›å®¹é‡å°±æ²¡æœ‰ç”¨å¤„ï¼ˆå¯ä½¿ç”¨appendåšåˆå¹¶ï¼‰</p>
<p>(3)åˆ‡ç‰‡å¢é•¿<br>appendä¼šåˆ›å»ºæ–°çš„åº•å±‚æ•°ç»„ï¼ŒæŠŠç°æœ‰çš„å€¼èµ‹å€¼åˆ°æ–°æ•°ç»„é‡Œï¼Œå†è¿½åŠ æ–°çš„å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">slice := []int&#123;10,20,30,40&#125;</span><br><span class="line">newSlice := append(slice, 50)</span><br></pre></td></tr></table></figure>

<p>newSliceæœ‰ç”¨å…¨æ–°çš„åº•å±‚æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯åŸæ¥å®¹é‡çš„ä¸¤å€<br><img src="/images/goinaction3.png" alt="image.png"><br>appendåªèƒ½å¤„ç†åº•å±‚æ•°ç»„çš„å®¹é‡å¢é•¿ï¼Œå®¹é‡å°äº1000ï¼Œä¸¤å€å¢é•¿ã€‚è¶…è¿‡1000ï¼Œå¢é•¿å› å­1.25</p>
<p>(4)åˆ›å»ºåˆ‡ç‰‡çš„3ä¸ªç´¢å¼•<br>é™åˆ¶å®¹é‡ï¼Œä¸ºé¡¶å±‚æ•°ç»„æä¾›ä¿æŠ¤ï¼Œæ§åˆ¶è¿½åŠ æ“ä½œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source := []string&#123;&quot;Apple&quot;, &quot;Orange&quot;, &quot;Plum&quot;, &#x27;Banana&quot;, &#x27;Grape&quot;&#125;</span><br><span class="line">slice := source[2:3:4]</span><br><span class="line">source[i:j:k]</span><br><span class="line">é•¿åº¦ï¼šj-i</span><br><span class="line">å®¹é‡ï¼šk-i</span><br></pre></td></tr></table></figure>


<p><img src="/images/goinaction4.png" alt="image.png"><br>(5)è¿­ä»£åˆ‡ç‰‡: range<br>for index, value :&#x3D; range slice{<br>}<br>rangeè¿”å›ï¼šè¿­ä»£åˆ°çš„ç´¢å¼•ä½ç½®ï¼Œå¯¹åº”ä½ç½®å…ƒç´ çš„å‰¯æœ¬ï¼ˆå‰¯æœ¬æ— æ³•å–åœ°å€ï¼Œä½¿ç”¨è¯¥å€¼å˜é‡çš„åœ°å€ä½œä¸ºæŒ‡å‘æ¯ä¸ªå…ƒç´ çš„æŒ‡é’ˆåœ°å€æ˜¯ä¸€æ ·çš„ï¼š&amp;valueçš„å€¼æ˜¯ä¸€æ ·çš„ -&gt; éœ€è¦ç”¨&amp;slice[index]ï¼‰<br>ä¸éœ€è¦çš„å€¼å¯ä»¥ç”¨å ä½ç¬¦_è¡¨ç¤ºå¿½ç•¥ -&gt; for _, value :&#x3D; range slice</p>
<h4 id="å¤šç»´åˆ‡ç‰‡"><a href="#å¤šç»´åˆ‡ç‰‡" class="headerlink" title="å¤šç»´åˆ‡ç‰‡"></a>å¤šç»´åˆ‡ç‰‡</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">slice := [][]int&#123;&#123;10&#125;,&#123;20,30&#125;&#125;  å¯ä»¥åˆ©ç”¨åˆ›å»ºå¤æ‚æ•°æ®ç»“æ„</span><br></pre></td></tr></table></figure>


<h4 id="å‡½æ•°é—´ä¼ é€’åˆ‡ç‰‡"><a href="#å‡½æ•°é—´ä¼ é€’åˆ‡ç‰‡" class="headerlink" title="å‡½æ•°é—´ä¼ é€’åˆ‡ç‰‡"></a>å‡½æ•°é—´ä¼ é€’åˆ‡ç‰‡</h4><p>åˆ‡ç‰‡ä»¥å€¼å¾—æ–¹å¼ä¼ é€’ç»™å‡½æ•°ï¼Œåªå¤åˆ¶åˆ‡ç‰‡æœ¬ç´ ï¼Œä¸å¤åˆ¶åº•å±‚æ•°ç»„ï¼Œæ‰€ä»¥åªéœ€è¦24ä¸ªå­—èŠ‚ï¼šæŒ‡é’ˆ8ä¸ªå­—èŠ‚ï¼Œé•¿åº¦å’Œå®¹é‡åˆ†åˆ«8å­—èŠ‚ã€‚<br>å› æ­¤åˆ‡ç‰‡æ•ˆç‡é«˜ï¼Œå¦‚æœå‡½æ•°éœ€è¦ä¿®æ”¹æ•°æ®ï¼Œä¼ é€’å›ä¸€ä»½æ–°å¾—åˆ‡ç‰‡å‰¯æœ¬å³å¯</p>
<h3 id="æ˜ å°„"><a href="#æ˜ å°„" class="headerlink" title="æ˜ å°„"></a>æ˜ å°„</h3><p>å­˜å‚¨æ— åºé”®å€¼å¯¹</p>
<h4 id="æ˜ å°„åˆ›å»ºå’Œåˆå§‹åŒ–"><a href="#æ˜ å°„åˆ›å»ºå’Œåˆå§‹åŒ–" class="headerlink" title="æ˜ å°„åˆ›å»ºå’Œåˆå§‹åŒ–"></a>æ˜ å°„åˆ›å»ºå’Œåˆå§‹åŒ–</h4><p>ä½¿ç”¨makeå£°æ˜ï¼ˆkey valueéƒ½æ˜¯stringç±»å‹ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dict := make(map[string]string)</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå¹¶åˆå§‹åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dict := map[string]string&#123;&quot;red&quot;:&quot;hello&quot;, &quot;yellow&quot;:&quot;world&quot;&#125;</span><br></pre></td></tr></table></figure>

<p>æ˜ å°„çš„é”®ä¸èƒ½æ˜¯åˆ‡ç‰‡ï¼ŒåŒ…å«åˆ‡ç‰‡çš„ç±»å‹ï¼Œå‡½æ•°çš„ç»“æ„ç±»å‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dict := map[[]string]string&#123;&#125; -&gt; ç¼–è¯‘æŠ¥é”™</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½œä¸ºæ˜ å°„çš„å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dict := map[string][]string&#123;&#125; -&gt; ok</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨æ˜ å°„"><a href="#ä½¿ç”¨æ˜ å°„" class="headerlink" title="ä½¿ç”¨æ˜ å°„"></a>ä½¿ç”¨æ˜ å°„</h4><p>ä¸ºæ˜ å°„èµ‹å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dict := map[string]string&#123;&#125;</span><br><span class="line">dict[&quot;red&quot;] = &quot;hello&quot;</span><br></pre></td></tr></table></figure>

<p>æœªåˆå§‹åŒ–çš„æ˜ å°„ -&gt; nilæ˜ å°„ -&gt; èµ‹å€¼è¿è¡Œé”™è¯¯ï¼šnilæ˜ å°„ä¸èƒ½ç”¨äºå­˜å‚¨é”®å€¼å¯¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dict := map[string]string</span><br><span class="line">dict[&quot;red&quot;] = &quot;hello&quot;</span><br></pre></td></tr></table></figure>

<p>ä»æ˜ å°„è·å–å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">value, exist := dict[&quot;red&quot;]  -&gt; è¿”å›æ˜ å°„é”®å¯¹åº”çš„å€¼å’Œè¯¥å€¼æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœé”®ä¸å­˜åœ¨ï¼Œexistè¿”å›false</span><br><span class="line">value := dict[&quot;red&quot;]</span><br><span class="line">if value != &quot;&quot;        -&gt; åˆ¤æ–­valueæ˜¯å¦æ˜¯é›¶å€¼æ¥çœ‹æ˜ å°„é”®æ˜¯å¦å­˜åœ¨</span><br></pre></td></tr></table></figure>

<p>range è¿­ä»£æ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for key,value := range dict &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤æ˜ å°„ä¸­çš„ä¸€é¡¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delete(dict, &quot;red&quot;)</span><br></pre></td></tr></table></figure>

<p>æ˜ å°„çš„å¢é•¿æ²¡æœ‰å®¹é‡é™åˆ¶ï¼šå¯é€šè¿‡lenå‡½æ•°å¾—åˆ°æ˜ å°„é•¿åº¦</p>
<h4 id="åœ¨å‡½æ•°é—´ä¼ é€’æ˜ å°„"><a href="#åœ¨å‡½æ•°é—´ä¼ é€’æ˜ å°„" class="headerlink" title="åœ¨å‡½æ•°é—´ä¼ é€’æ˜ å°„"></a>åœ¨å‡½æ•°é—´ä¼ é€’æ˜ å°„</h4><p>å‡½æ•°é—´ä¼ é€’æ˜ å°„ä¸ä¼šåˆ¶é€ é”™è¯¥æ˜ å°„çš„å‰¯æœ¬ï¼Œå¦‚æœå¯¹æ˜ å°„ä¿®æ”¹ï¼Œæ‰€æœ‰å¯¹è¿™ä¸ªæ˜ å°„çš„å¼•ç”¨éƒ½ä¼šå¯Ÿè§‰ã€‚ç‰¹æ€§ä¸åˆ‡ç‰‡ç±»ä¼¼ï¼Œä¼ é€’ç»™å‡½æ•°æˆæœ¬å¾ˆå°ï¼Œä¸ä¼šå¤åˆ¶åº•å±‚çš„æ•°æ®ç»“æ„</p>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go in action</tag>
      </tags>
  </entry>
  <entry>
    <title>acm</title>
    <url>/acm/</url>
    <content><![CDATA[<h1 id="ç´ æ•°ï¼ˆåŸƒæ‹‰æ‰˜è‰²å°¼ç­›æ³•ï¼‰"><a href="#ç´ æ•°ï¼ˆåŸƒæ‹‰æ‰˜è‰²å°¼ç­›æ³•ï¼‰" class="headerlink" title="ç´ æ•°ï¼ˆåŸƒæ‹‰æ‰˜è‰²å°¼ç­›æ³•ï¼‰"></a>ç´ æ•°ï¼ˆåŸƒæ‹‰æ‰˜è‰²å°¼ç­›æ³•ï¼‰</h1><p>é¢˜ç›®ï¼šç»™å®šä¸€ä¸ªæ•° nï¼Œæ‰“å°æ‰€æœ‰å°äºæˆ–ç­‰äº n çš„ç´ æ•°ã€‚</p>
<p>ç´ æ•°æ˜¯æ°å¥½æœ‰ä¸¤ä¸ªä¸åŒçš„è‡ªç„¶æ•°çº¦æ•°çš„è‡ªç„¶æ•°ï¼šæ•°å­—1å’Œå®ƒæœ¬èº«ï¼Œåˆ™ç´ æ•°ä¸å¯èƒ½æœ‰å› æ•°</p>
<p>ï¼ˆ1ï¼‰2æ˜¯æœ€å°çš„ç´ æ•°</p>
<p>ï¼ˆ2ï¼‰2çš„å€æ•°åˆ™ä¸æ˜¯ç´ æ•°ï¼Œå°†2çš„å€æ•°çš„æ•°å­—éƒ½è¿›è¡Œæ ‡è®°</p>
<p>ï¼ˆ3ï¼‰æŒ‰ç…§è¿™ç§æ–¹æ³•æ ‡è®°æ‰€æœ‰æ•°å­—ï¼Œå‰©ä½™æ²¡æœ‰æ ‡è®°çš„å°±æ˜¯ç´ æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrimeNumer</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">	<span class="type">bool</span> prime[num + <span class="number">1</span>];</span><br><span class="line">	<span class="built_in">memset</span>(prime, <span class="literal">true</span>, num + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; (i * i) &lt; (num + <span class="number">1</span>); i++) &#123;</span><br><span class="line">		<span class="keyword">if</span>(prime[i] == <span class="literal">true</span>) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> j = i * i; j &lt; (num + <span class="number">1</span>); j = j + i) &#123;</span><br><span class="line">				prime[j] = <span class="literal">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span> ; i &lt; num + <span class="number">1</span>; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span>(prime[i])</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, i);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span> *args[])</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> n = <span class="number">30</span>;</span><br><span class="line">	<span class="built_in">PrimeNumer</span>(n);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>output: 30ä»¥å†…çš„ç´ æ•° 2 3 5 7 11 13 17 19 23 29 </p>
<p>ç›¸å…³é¢˜ç›®ï¼šç»™å®šä¸¤ä¸ªæ•´æ•° M å’Œ Nï¼Œç”Ÿæˆ M å’Œ N ä¹‹é—´çš„æ‰€æœ‰ç´ æ•°ï¼ŒåŒ…æ‹¬ M å’Œ Nã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼ŒæŠŠç¬¬äºŒä¸ªå¾ªç¯ä¸­å–ç´ æ•°çš„èŒƒå›´æ”¹ä¸ºï¼ˆM,N), å¦‚æœM&lt;2, åˆ™å–çš„èŒƒå›´æ˜¯ä»ï¼ˆ2ï¼ŒN)</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> begin = <span class="built_in">max</span>(M, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = begin ; i &lt; N + <span class="number">1</span>; i++) &#123;</span><br><span class="line">	<span class="keyword">if</span>(prime[i])</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>geek link: <a href="https://practice.geeksforgeeks.org/problems/sieve-of-eratosthenes5242/1">https://practice.geeksforgeeks.org/problems/sieve-of-eratosthenes5242/1</a></p>
<h1 id="æ¨¡è¿ç®—ä¸­çš„å¹‚"><a href="#æ¨¡è¿ç®—ä¸­çš„å¹‚" class="headerlink" title="æ¨¡è¿ç®—ä¸­çš„å¹‚"></a>æ¨¡è¿ç®—ä¸­çš„å¹‚</h1><p>ç»™ä¸‰ä¸ªæ•° x, y and p, è®¡ç®—(x^y) % p. </p>
<p>ï¼ˆ1ï¼‰yå¦‚æœæ˜¯å¥‡æ•°ï¼Œåˆ™æŠŠxå…ˆä¹˜ä»¥res;</p>
<p>æœ€åä¸€ä¸ªyè‚¯å®šæ˜¯1ï¼ŒæŠŠä¹‹å‰çš„ç»“æœéƒ½ä¹˜ç»™res</p>
<p>ï¼ˆ2ï¼‰è®¡ç®—x^yæ—¶éœ€è¦æ³¨æ„ï¼Œå¦‚æœx,yå¾ˆå¤§ï¼Œå–å¹‚æ¬¡æ–¹å®¹æ˜“è¶Šç•Œï¼Œå¯¼è‡´ç»“æœä¸º0</p>
<p>å› æ­¤æ¯æ¬¡è®¡ç®—ç»“æœéœ€è¦å–ä½™åå†è¿›è¡Œä¸‹ä¸€æ¬¡å¹‚è¿ç®—</p>
<p>ï¼ˆ2ï¼‰yå·¦ç§»ä¸€ä½åï¼Œxå–å¹³æ–¹è®°å½•åœ¨åŸå§‹å€¼ä¸­</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">PowerInmod</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(y &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="comment">//yå¦‚æœæ˜¯å¥‡æ•°ï¼Œåˆ™æŠŠxå…ˆä¹˜ä»¥res;</span></span><br><span class="line">        <span class="comment">//æœ€åä¸€ä¸ªyè‚¯å®šæ˜¯1ï¼ŒæŠŠä¹‹å‰çš„ç»“æœéƒ½ä¹˜ç»™res</span></span><br><span class="line">		<span class="keyword">if</span>(y % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">			res = (res * x) % p; <span class="comment">//å…ˆå–ä½™æ˜¯ä¸ºäº†å¦‚æœx,yå¾ˆå¤§ï¼Œå–å¹‚æ¬¡æ–¹å®¹æ˜“è¶Šç•Œï¼Œå¯¼è‡´ç»“æœä¸º0</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//yå·¦ç§»ä¸€ä½ï¼Œxä¹˜ä»¥2ï¼Œç»“æœéƒ½ä¿ç•™åœ¨xä¸­</span></span><br><span class="line">		<span class="comment">//y = y &gt;&gt; 1; ç­‰ä»·äºä¸‹é¢è¿™ä¸€è¡Œ</span></span><br><span class="line">		y = y / <span class="number">2</span>;</span><br><span class="line">		x = (x * x) % p; <span class="comment">//å…ˆå–ä½™æ˜¯ä¸ºäº†å¦‚æœx,yå¾ˆå¤§ï¼Œå–å¹‚æ¬¡æ–¹å®¹æ˜“è¶Šç•Œï¼Œå¯¼è‡´ç»“æœä¸º0</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span> *args[])</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> x = <span class="number">136</span>, y = <span class="number">926</span>, p = <span class="number">961</span>;</span><br><span class="line">	<span class="type">int</span> res = <span class="built_in">PowerInmod</span>(x, y, p);</span><br><span class="line">	cout&lt;&lt;res&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>output:165</p>
<h1 id="æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•"><a href="#æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•" class="headerlink" title="æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•"></a>æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•</h1><p>é¢˜ç›®ï¼šæ‰¾åˆ°æ•´æ•°ç³»æ•° x å’Œ yï¼Œä½¿å¾—ï¼š ax + by &#x3D; gcd(a, b) </p>
<p>æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼šä¸¤ä¸ªæ­£æ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°ç­‰äºè¾ƒå°çš„æ•°å’Œä¸¤æ•°çš„ä½™æ•°çš„æœ€å¤§å…¬çº¦æ•°</p>
<p>gcd(a,b) &#x3D; gcd(b%a, a)</p>
<p>gcd(b%a, a) &#x3D; b%a x1 + a y1</p>
<p>ax + by &#x3D; b%a x1 + a y1</p>
<p>ax + by &#x3D; (b-(b&#x2F;a * a))x1 +  a y1</p>
<p>ax + by &#x3D; a (y1 - b&#x2F;a x1) + b x1</p>
<p>ç»¼ä¸Šï¼Œ</p>
<p>x &#x3D; (y1 - b&#x2F;a x1)</p>
<p>y &#x3D;  x1</p>
<p>æ¯æ¬¡é€’å½’æ±‚æœ€å¤§å…¬çº¦æ•°çš„æ—¶å€™ï¼Œæ›´æ–°x, yçš„å€¼</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">GcdExtend</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> *x, <span class="type">int</span> *y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(a == <span class="number">0</span>) &#123;</span><br><span class="line">		*x = <span class="number">0</span>;</span><br><span class="line">		*y = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">return</span> b;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> x1, y1;</span><br><span class="line">	<span class="type">int</span> res = <span class="built_in">GcdExtend</span>(b%a, a, &amp;x1, &amp;y1);</span><br><span class="line">	*x = (y1 - (b/a) * x1);</span><br><span class="line">	*y = x1;</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">Gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> x, y;</span><br><span class="line">	<span class="type">int</span> gcd = <span class="built_in">GcdExtend</span>(a, b, &amp;x, &amp;y);</span><br><span class="line">	<span class="keyword">return</span> vector&lt;<span class="type">int</span>&gt; &#123;gcd, x, y&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span> *args[])</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> x, y;</span><br><span class="line">	<span class="type">int</span> res = <span class="built_in">GcdExtend</span>(<span class="number">35</span>, <span class="number">15</span>, &amp;x, &amp;y);</span><br><span class="line">	cout&lt;&lt;res&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>output: 5</p>
]]></content>
      <categories>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>string</tag>
      </tags>
  </entry>
  <entry>
    <title>typedef å‡½æ•°ä¸å‡½æ•°æŒ‡é’ˆçš„ä½¿ç”¨</title>
    <url>/typedefFunc/</url>
    <content><![CDATA[<p>å‡½æ•°åæ˜¯è¯¥å‡½æ•°çš„å…¥å£åœ°å€</p>
<p>å‡½æ•°æŒ‡é’ˆï¼šæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼Œå¯ä»¥ç”¨æ¥è°ƒç”¨å‡½æ•°</p>
<h2 id="typedef"><a href="#typedef" class="headerlink" title="typedef"></a>typedef</h2><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><p>å½¢å¼ï¼štypedef  è¿”å›ç±»å‹(æ–°ç±»å‹)(å‚æ•°åˆ—è¡¨)</p>
<p>ï¼ˆ1ï¼‰å£°æ˜ï¼šæ–°ç±»å‹ *å˜é‡ (éœ€è¦å£°æ˜ä¸€ä¸ªæŒ‡é’ˆ)</p>
<p>ï¼ˆ2ï¼‰åˆå§‹åŒ–ï¼šå˜é‡ &#x3D; å‡½æ•°è¿”å›åœ°å€</p>
<p>ï¼ˆ3ï¼‰ä½¿ç”¨ï¼šå˜é‡ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰</p>
<p>æ­¤æ—¶çš„å˜é‡æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œåˆ™å¯ä»¥æŒ‡å‘ä¸€ä¸ªå‡½æ•°çš„å…¥å£åœ°å€ã€‚å¯ä»¥å°†å‡½æ•°åèµ‹å€¼ç»™è¯¥æŒ‡é’ˆï¼Œæ¥è°ƒç”¨å‡½æ•°</p>
<h3 id="å‡½æ•°æŒ‡é’ˆ"><a href="#å‡½æ•°æŒ‡é’ˆ" class="headerlink" title="å‡½æ•°æŒ‡é’ˆ"></a>å‡½æ•°æŒ‡é’ˆ</h3><p>å½¢å¼ï¼štypedef  è¿”å›ç±»å‹(*æ–°ç±»å‹)(å‚æ•°åˆ—è¡¨)</p>
<p>ï¼ˆ1ï¼‰å£°æ˜ï¼šæ–°ç±»å‹ å˜é‡</p>
<p>ï¼ˆ2ï¼‰åˆå§‹åŒ–ï¼šå˜é‡ &#x3D; å‡½æ•°è¿”å›åœ°å€</p>
<p>ï¼ˆ3ï¼‰ä½¿ç”¨ï¼šå˜é‡ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰</p>
<p>æ­¤æ—¶çš„å˜é‡æ˜¯ç›´æ¥å°±æ˜¯ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼Œå¯ä»¥å°†å‡½æ•°åèµ‹å€¼ç»™è¯¥æŒ‡é’ˆï¼Œæ¥è°ƒç”¨å‡½æ•°</p>
<h3 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><ul>
<li>typedef  å‡½æ•°: å°±æ˜¯é‡æ–°å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œå¦‚æœéœ€è¦è°ƒç”¨åˆ™éœ€è¦å£°æ˜æŒ‡å‘è¯¥å‡½æ•°ç±»å‹çš„æŒ‡é’ˆ</li>
<li>typedef  å‡½æ•°æŒ‡é’ˆ: æ˜¯é‡æ–°å®šä¹‰äº†ä¸€ä¸ªæŒ‡å‘å‡½æ•°ç±»å‹çš„æŒ‡é’ˆï¼Œè¦è°ƒç”¨å‡½æ•°ç›´æ¥ä½¿ç”¨å³å¯</li>
</ul>
<h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*funPoint_t)</span><span class="params">(<span class="type">char</span> c)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(<span class="type">function_t</span>)</span><span class="params">(<span class="type">char</span> c)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f0</span><span class="params">(<span class="type">char</span> c)</span> </span>&#123; <span class="built_in">printf</span>(<span class="string">&quot;f0, c = %c\n&quot;</span>, c); <span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f1</span><span class="params">(<span class="type">char</span> c)</span> </span>&#123; <span class="built_in">printf</span>(<span class="string">&quot;f1, c = %c\n&quot;</span>, c); <span class="keyword">return</span> <span class="number">1</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> ret;</span><br><span class="line">    funPoint_t fp;<span class="comment">//fpæ˜¯ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼ˆè¿”å›çš„æ˜¯intï¼Œå‚æ•°æ˜¯charï¼‰çš„å‡½æ•°æŒ‡é’ˆ</span></span><br><span class="line">    <span class="type">function_t</span> *fn;<span class="comment">//function_tæ˜¯å‡½æ•°ç±»å‹ï¼Œæ‰€ä»¥fnæ˜¯æŒ‡å‘æ­¤å‡½æ•°ç±»å‹çš„æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">    fp = f0;</span><br><span class="line">    ret = <span class="built_in">fp</span>(<span class="string">&#x27;a&#x27;</span>);<span class="comment">//é€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    fn = f1;</span><br><span class="line">    ret = <span class="built_in">fn</span>(<span class="string">&#x27;x&#x27;</span>);<span class="comment">//é€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>outputï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">f0, c = a</span><br><span class="line">f1, c = x</span><br></pre></td></tr></table></figure>

<h2 id="å›è°ƒå‡½æ•°"><a href="#å›è°ƒå‡½æ•°" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h2><p>å«ä¹‰ï¼šä½¿ç”¨è€…å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°†è¯¥å‡½æ•°ä½œä¸ºå‚æ•°ä¼ ç»™è°ƒç”¨è€…çš„å‡½æ•°ä¸­ï¼Œç”±è°ƒç”¨è€…çš„å‡½æ•°åœ¨è¿è¡Œæ—¶æ¥è°ƒç”¨çš„å‡½æ•°ã€‚</p>
<p>å³åˆ«äººå‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­æ¥å›è°ƒä½ å®ç°çš„å‡½æ•°</p>
<p>ï¼ˆ1ï¼‰å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹ï¼šhelloWorldFunc ï¼ˆå‡½æ•°æŒ‡é’ˆç±»å‹å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå› ä¸ºå®ƒç›´æ¥æŒ‡å‘äº†å‡½æ•°çš„å…¥å£åœ°å€ï¼‰</p>
<p>ï¼ˆ2ï¼‰å°†helloWorldä½œä¸ºå‚æ•°ä¼ ç»™callBackæ–¹æ³•ï¼Œå…¶ä¸­callBackçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹</p>
<p>ï¼ˆ3ï¼‰åœ¨callBackä¸­è°ƒç”¨helloWorld</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*helloWorldFunc)</span><span class="params">(string buffer)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">helloWorld</span><span class="params">(string buffer)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;string is:%s&quot;</span>, buffer.<span class="built_in">c_str</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">callBack</span><span class="params">(helloWorldFunc fp, string s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="built_in">fp</span>(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span> *args[])</span></span>&#123;</span><br><span class="line">	string s = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    <span class="comment">//helloWorldFunc fp = helloWorld;</span></span><br><span class="line">    <span class="comment">//callBack(fp, s);</span></span><br><span class="line">    <span class="comment">//ä¸Šé¢ä¸¤è¡Œç­‰ä»·äºä¸‹é¢è¿™ä¸€è¡Œ</span></span><br><span class="line">	<span class="built_in">callBack</span>(helloWorld, s);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>c++</category>
      </categories>
      <tags>
        <tag>typedef</tag>
      </tags>
  </entry>
  <entry>
    <title>go package ä½¿ç”¨</title>
    <url>/goPackage/</url>
    <content><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>ç¯å¢ƒï¼šgo version<br>go version go1.19.3 windows&#x2F;amd64</p>
<p>éœ€è¦åœ¨main.goé‡Œå¯¼å…¥è‡ªå·±å†™çš„åŒ…</p>
<p><img src="/images/goPackage.png" alt="é¡¹ç›®ç»“æ„"></p>
<p>åœ¨main.goé‡Œè°ƒç”¨tempconv.go å‡ºç°error:</p>
<p>go run â€œd:\vsProject\gocode\main.goâ€<br>main.go:5:2: package tempconv is not in GOROOT (D:\soft\Go\src\tempconv)</p>
<h1 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h1><ul>
<li><p>åœ¨go 1.11ä»¥å‰æ— æ³•åœ¨é™¤äº†rootçš„ç›®å½•ä¸‹å¼€å‘ï¼Œ1.11åæä¾›äº†go modæ¥ç®¡ç†åŒ…</p>
</li>
<li><p>åœ¨åŒä¸€ç›®å½•ä¸‹åªèƒ½ä¸€ä¸ªpackage</p>
</li>
</ul>
<h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><h2 id="GO-ENV"><a href="#GO-ENV" class="headerlink" title="GO ENV"></a>GO ENV</h2><p>è®¾ç½®GO111MODULE</p>
<p>on: ä½¿ç”¨modules, ä¸ä¼šå»gopathä¸‹æŸ¥æ‰¾</p>
<p>off: ä¸æ”¯æŒmodules, å»gopathä¸‹æŸ¥æ‰¾</p>
<p>auto: æ ¹æ®å½“å‰ç›®å½•å†³å®šæ˜¯å¦å¯åŠ¨modules</p>
<h3 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export GO111MODULE=off</span><br><span class="line">export GO111MODULE=on</span><br></pre></td></tr></table></figure>

<h3 id="winodows"><a href="#winodows" class="headerlink" title="winodows"></a>winodows</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set GO111MODULE=off</span><br><span class="line">set GO111MODULE=on</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡</p>
<h2 id="GOPATH"><a href="#GOPATH" class="headerlink" title="GOPATH"></a>GOPATH</h2><p>ï¼ˆ1ï¼‰å…³é—­ go mod æ¨¡å¼ï¼šè®¾ç½®GO111MODULE off</p>
<p>ï¼ˆ2ï¼‰go envæŸ¥çœ‹å½“å‰çš„GOPATH,  å°†éœ€è¦å¯¼å…¥çš„tempconv.goæ”¾å…¥$GOPATH&#x2F;srcä¸‹</p>
<p>note: ä¸å»ºè®®è¿™ç§æ–¹å¼ï¼Œéœ€è¦ä¿®æ”¹$GOPATH&#x2F;src</p>
<h2 id="GO-MOD"><a href="#GO-MOD" class="headerlink" title="GO MOD"></a>GO MOD</h2><p>ï¼ˆ1ï¼‰æ‰“å¼€ go mod æ¨¡å¼ï¼šè®¾ç½®GO111MODULE off</p>
<p>ï¼ˆ2ï¼‰go mod init xx</p>
<p>ï¼ˆ3ï¼‰import xxx&#x2F;filename</p>
<p>go mod init gocode</p>
<p>é¡¹ç›®ç»“æ„ï¼š</p>
<p>gocode</p>
<p>â€”-module&#x2F;tempconv.go</p>
<p>â€”-main.go</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &quot;gocode/module&quot;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go package</tag>
      </tags>
  </entry>
  <entry>
    <title>å­¦ä¹ è®¡åˆ’</title>
    <url>/studyPlan/</url>
    <content><![CDATA[<h2 id="å­¦ä¹ è®¡åˆ’"><a href="#å­¦ä¹ è®¡åˆ’" class="headerlink" title="å­¦ä¹ è®¡åˆ’"></a>å­¦ä¹ è®¡åˆ’</h2><table>
<thead>
<tr>
<th>Summary</th>
<th>Tasks</th>
<th>Effort Estimastion</th>
<th>Comment</th>
</tr>
</thead>
<tbody><tr>
<td>preparationï¼ˆ11æœˆï¼‰</td>
<td>å­¦ä¹ ä¹¦ç±</td>
<td>1 day</td>
<td>The Go Programming Languageï¼š <a href="https://gopl-zh.github.io/">https://gopl-zh.github.io/</a>     Go in action ebook</td>
</tr>
<tr>
<td></td>
<td>åšå®¢ç½‘ç«™</td>
<td>5 days</td>
<td>hexo æ­å»ºåšå®¢ç½‘ç«™ï¼š <a href="https://blog.csdn.net/yaorongke/article/details/119089190">https://blog.csdn.net/yaorongke/article/details/119089190</a></td>
</tr>
<tr>
<td></td>
<td>ç¬”è®°å·¥å…·</td>
<td>2 day</td>
<td>Typoraï¼šæ‰€è§å³æ‰€å¾— <a href="https://zahui.fan/posts/64b52e0d/">https://zahui.fan/posts/64b52e0d/</a></td>
</tr>
<tr>
<td>knowledgeï¼ˆ12æœˆï¼‰</td>
<td>goåŸºç¡€çŸ¥è¯†(æ•°æ®ç±»å‹+å‡½æ•°)</td>
<td>3 days</td>
<td></td>
</tr>
<tr>
<td></td>
<td>æ–¹æ³•+æ¥å£</td>
<td>3 days</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Goroutines ,Channels+å¹¶å‘</td>
<td>3 days</td>
<td></td>
</tr>
<tr>
<td></td>
<td>åŒ…+æµ‹è¯•+åå°„</td>
<td>3 days</td>
<td></td>
</tr>
<tr>
<td>practiceï¼ˆ1æœˆï¼‰</td>
<td>goé¡¹ç›®ç»ƒä¹ ï¼ˆæ‰“åŒ…+å·¥å…·é“¾ï¼‰</td>
<td>3 days</td>
<td></td>
</tr>
<tr>
<td></td>
<td>æ•°ç»„ï¼Œåˆ‡ç‰‡+æ˜ å°„</td>
<td>3 days</td>
<td></td>
</tr>
<tr>
<td></td>
<td>ç±»å‹ç³»ç»Ÿ</td>
<td>3 days</td>
<td></td>
</tr>
<tr>
<td></td>
<td>å¹¶å‘</td>
<td>3 days</td>
<td></td>
</tr>
<tr>
<td>project</td>
<td>githubï¼š go web</td>
<td>15 days</td>
<td></td>
</tr>
</tbody></table>
<h2 id="Todo"><a href="#Todo" class="headerlink" title="Todo"></a>Todo</h2><p>ï¼ˆ1ï¼‰åšå®¢è¯„è®º</p>
<p>ï¼ˆ2ï¼‰ui menu ä¼˜åŒ–</p>
<p>ï¼ˆ3ï¼‰blog url link</p>
<p>ï¼ˆ4ï¼‰git push+git desktop</p>
<p>ï¼ˆ5ï¼‰hexo picture</p>
]]></content>
      <categories>
        <category>plan</category>
      </categories>
      <tags>
        <tag>study</tag>
      </tags>
  </entry>
  <entry>
    <title>linux å¸¸ç”¨å‘½ä»¤</title>
    <url>/linuxCommand/</url>
    <content><![CDATA[<h1 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h1><p>åˆ‡æ¢ä¸åŒæ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">:e filename </span><br></pre></td></tr></table></figure>

<p>dd åˆ é™¤ä¸€è¡Œ</p>
<p>gg dG åˆ é™¤æ‰€æœ‰</p>
<h1 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h1><p>main command</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker pull æ‹‰image</span><br><span class="line">docker run è·‘image</span><br><span class="line">docker ps æŸ¥çœ‹å½“å‰è¿è¡Œçš„image</span><br><span class="line">docker stop åœæ­¢container</span><br><span class="line">docker rm åˆ é™¤container</span><br></pre></td></tr></table></figure>

<p>debug contaniner</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker logs [-f]  æŸ¥çœ‹containerçš„log</span><br><span class="line">docker exec -it containerId /bin/bash è¿›å…¥å®¹å™¨  ä½¿ç”¨/bin/shè¿›å…¥å,ç›´æ¥æ˜¾ç¤ºçš„æ˜¯#ï¼Œè€Œä½¿ç”¨/bin/bashç›´æ¥æ˜¾ç¤ºçš„æ˜¯root@xxxx:/#</span><br><span class="line">docker stat æŸ¥çœ‹å®¹å™¨èµ„æºçš„ä½¿ç”¨æƒ…å†µï¼ŒCPUã€å†…å­˜ã€ç½‘ç»œ I/Oç­‰</span><br><span class="line">docker inspect æŸ¥çœ‹å®¹å™¨æ§åˆ¶çš„å„ç§ç»“æ„çš„è¯¦ç»†ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<h1 id="json"><a href="#json" class="headerlink" title="json"></a>json</h1><p>æŠŠä¸€ä¸ªjsonæ–‡ä»¶åœ¨terminal prettyæŸ¥çœ‹</p>
<p>(1) ä½¿ç”¨python tool</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat [file] | python3 -m json.tool </span><br></pre></td></tr></table></figure>

<p>(2) ä½¿ç”¨jq è§£æå·¥å…·</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat [file] | jq .</span><br></pre></td></tr></table></figure>

<p>jqè¿˜å¯ä»¥ç›´æ¥å®šä½å¯¹åº”jsonä¸­keyçš„value</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat test.txt|jq .</span><br><span class="line">&#123;</span><br><span class="line">  &quot;foo&quot;: &#123;</span><br><span class="line">    &quot;bar&quot;: &#123;</span><br><span class="line">      &quot;baz&quot;: 123</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">cat test.txt|jq &quot;.foo&quot;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;bar&quot;: &#123;</span><br><span class="line">    &quot;baz&quot;: 123</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h1><p>åœ¨file.hä¸­æ‰¾åˆ°xxxä»£è¡¨çš„å«ä¹‰</p>
<p>In file.h</p>
<p>#define xxx â€œhello worldâ€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">grep xxx file.h | cut -d &#x27;&quot;&#x27; -f2</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºhello worldï¼Œå‘½ä»¤ç±»ä¼¼splitç”¨æ³•ï¼Œf1(#define xxx ) f2(hello world)</p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>command</tag>
      </tags>
  </entry>
  <entry>
    <title>basic</title>
    <url>/basic/</url>
    <content><![CDATA[<ul>
<li>Go is especially well suited for building infrastructure like <strong>networked servers</strong>, and <strong>tools</strong> and <strong>systems</strong> for programmers</li>
<li>Its facilities for <strong>concurrency</strong> are new and efficient</li>
<li>It has <strong>automatic memory management</strong> or <strong>garbage collection</strong>.</li>
<li>Go æ˜¯ä¸€é—¨ç¼–è¯‘å‹è¯­è¨€</li>
<li>Hello World<br>  $ go run helloworld.go<br>  $ go build helloworld.go</li>
</ul>
<ul>
<li>Go è¯­è¨€çš„ä»£ç é€šè¿‡<strong>package</strong>ç»„ç»‡<ol>
<li>ç±»ä¼¼äºå…¶å®ƒè¯­è¨€é‡Œçš„åº“æˆ–è€…æ¨¡å—</li>
<li><code>main</code>Â åŒ…æ¯”è¾ƒç‰¹æ®Šã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªç‹¬ç«‹å¯æ‰§è¡Œçš„ç¨‹åºï¼ŒmainåŒ…ä¸­çš„mainå‡½æ•°æ˜¯æ•´ä¸ªç¨‹åºæ‰§è¡Œçš„å…¥å£</li>
</ol>
</li>
</ul>
<ul>
<li>ç´§éšåœ¨<strong>package</strong>å£°æ˜åçš„<strong>import</strong>å£°æ˜æ˜¯å¯¼å…¥çš„åŒ…</li>
<li>importä¹‹åæ˜¯å­˜å‚¨åœ¨è¯¥æ–‡ä»¶ä¸­çš„ç¨‹åºè¯­å¥</li>
<li>goè¯­è¨€çš„ç¼–è¯‘è¿‡ç¨‹æ²¡æœ‰è­¦å‘Šâš ï¸ä¿¡æ¯</li>
</ul>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go basic</tag>
      </tags>
  </entry>
</search>
